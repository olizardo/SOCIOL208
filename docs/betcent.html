<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOCIOL 208 - Betwenness Centrality</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="SOCIOL 208 - Betwenness Centrality">
<meta property="og:description" content="Recall that, according to Freeman (1979), the key conceptual distinction between closeness and betweenness is between (pun intended) the capacity to reach others quickly (e.g.">
<meta property="og:site-name" content="SOCIOL 208">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Betwenness Centrality</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SOCIOL 208</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">208A</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208A.html" class="sidebar-item-text sidebar-link">208A Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208A-F24.html" class="sidebar-item-text sidebar-link">SOCIOL 208A Reading Schedule (Fall 2024)</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Lecture Notes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic.html" class="sidebar-item-text sidebar-link">Basic Network Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ego.html" class="sidebar-item-text sidebar-link">Analyzing Ego Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eigen.html" class="sidebar-item-text sidebar-link">Matrix Eigendecomposition</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Centrality</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./degcent.html" class="sidebar-item-text sidebar-link">Degree Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./closcent.html" class="sidebar-item-text sidebar-link">Closeness Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./betcent.html" class="sidebar-item-text sidebar-link active">Betwenness Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cube.html" class="sidebar-item-text sidebar-link">The Centrality Cube</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-centrality.html" class="sidebar-item-text sidebar-link">Centrality in Two-Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Status and Prestige</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pagerank.html" class="sidebar-item-text sidebar-link">PageRank Prestige Scoring</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hits.html" class="sidebar-item-text sidebar-link">Hubs and Authorities</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prestige-ml.html" class="sidebar-item-text sidebar-link">Prestige in Multilayer Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige in Two Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">Equivalence and Similarity</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structequiv.html" class="sidebar-item-text sidebar-link">Role Equivalence and Structural Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./similarity.html" class="sidebar-item-text sidebar-link">Vertex Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./random-walk.html" class="sidebar-item-text sidebar-link">Random Walk Concepts in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./blondel.html" class="sidebar-item-text sidebar-link">Role Similarity Across Graphs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-similarity.html" class="sidebar-item-text sidebar-link">Similarity and Equivalence in Two-Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Communities and Clustering</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./community.html" class="sidebar-item-text sidebar-link">Community Structure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spectral.html" class="sidebar-item-text sidebar-link">Community Detection Using Spectral Clustering</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-community-ca.html" class="sidebar-item-text sidebar-link">Community Detection in Two-Mode Networks Using CA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-spectral.html" class="sidebar-item-text sidebar-link">Spectral Clustering of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ahn.html" class="sidebar-item-text sidebar-link">Assigning Nodes to Multiple Communities</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Two-Mode Networks</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-basic.html" class="sidebar-item-text sidebar-link">Analyzing Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-duality.html" class="sidebar-item-text sidebar-link">The Duality of Persons and Groups</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-ca.html" class="sidebar-item-text sidebar-link">Correspondence Analysis (CA) of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-reflections.html" class="sidebar-item-text sidebar-link">The Method of Reflections in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-fitness.html" class="sidebar-item-text sidebar-link">Fitness and Complexity in Two Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-null.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./backbone.html" class="sidebar-item-text sidebar-link">Extracting the Backbone of Bipartite Projections Using Two-Mode Graph Ensembles</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">Statistical Models</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./swap.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./qap.html" class="sidebar-item-text sidebar-link">Network Regression Using Permutation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm1.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm2.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models II</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">Data Management</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loading.html" class="sidebar-item-text sidebar-link">Loading Network Data from a File</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./network-lists.html" class="sidebar-item-text sidebar-link">Handling Graph Objects in Lists</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subgraph-select.html" class="sidebar-item-text sidebar-link">Selecting a Subgraph Based on Edge Conditions</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">208B</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208B.html" class="sidebar-item-text sidebar-link">208B Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208B-S24.html" class="sidebar-item-text sidebar-link">SOCIOL 208B Reading Schedule (Spring 2024)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#pairwise-dependency-one-sided-dependency-and-betweenness" id="toc-pairwise-dependency-one-sided-dependency-and-betweenness" class="nav-link active" data-scroll-target="#pairwise-dependency-one-sided-dependency-and-betweenness">Pairwise Dependency, One-Sided Dependency, and Betweenness</a></li>
  <li><a href="#betweenness-geodesic-distance-and-shortest-paths" id="toc-betweenness-geodesic-distance-and-shortest-paths" class="nav-link" data-scroll-target="#betweenness-geodesic-distance-and-shortest-paths">Betweenness, Geodesic Distance and Shortest Paths</a></li>
  <li><a href="#computing-pairwise-dependencies" id="toc-computing-pairwise-dependencies" class="nav-link" data-scroll-target="#computing-pairwise-dependencies">Computing Pairwise Dependencies</a></li>
  <li><a href="#computing-one-sided-dependencies" id="toc-computing-one-sided-dependencies" class="nav-link" data-scroll-target="#computing-one-sided-dependencies">Computing One-Sided Dependencies</a></li>
  <li><a href="#computing-betweenness" id="toc-computing-betweenness" class="nav-link" data-scroll-target="#computing-betweenness">Computing Betweenness</a></li>
  <li><a href="#computing-normalized-betweenness" id="toc-computing-normalized-betweenness" class="nav-link" data-scroll-target="#computing-normalized-betweenness">Computing Normalized Betweenness</a></li>
  <li><a href="#betwenness-in-directed-graphs" id="toc-betwenness-in-directed-graphs" class="nav-link" data-scroll-target="#betwenness-in-directed-graphs">Betwenness in Directed Graphs</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/olizardo/SOCIOL208/blob/main/betcent.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Betwenness Centrality</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Recall that, according to <span class="citation" data-cites="freeman79">Freeman (<a href="#ref-freeman79" role="doc-biblioref">1979</a>)</span>, the key conceptual distinction between <a href="./closcent.html">closeness</a> and betweenness is between (pun intended) the capacity to reach others quickly (e.g., via the shortest paths) and the capacity to <em>intermediate</em> among those same paths. High betweenness nodes control the flow of information in the network between other nodes that flows via shortest.</p>
<p>Let us begin by defining some basic concepts on which betweenness centrality measures are built.</p>
<section id="pairwise-dependency-one-sided-dependency-and-betweenness" class="level3">
<h3 class="anchored" data-anchor-id="pairwise-dependency-one-sided-dependency-and-betweenness">Pairwise Dependency, One-Sided Dependency, and Betweenness</h3>
<p>We can define the <strong>pair dependency</strong> <span class="math inline">\(\delta_{i(k)j}\)</span> <span class="citation" data-cites="brandes01">(<a href="#ref-brandes01" role="doc-biblioref">Brandes 2001, 166</a>)</span> of any two nodes <span class="math inline">\(\{i, j\}\)</span> on any third node <span class="math inline">\(k\)</span> in the graph as follows:</p>
<p><span id="eq-pair"><span class="math display">\[
\delta_{i(k)j}= \frac{\sigma_{i(k)j}}{\sigma_{ij}}
\tag{1}\]</span></span></p>
<p>Where the denominator of the fraction (<span class="math inline">\(\sigma_{ij}\)</span>) is a count of the <em>total</em> number of shortest paths that start and end with nodes <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> and the numerator of the fraction (<span class="math inline">\(\sigma_{i(k)j}\)</span>) is the subset of those paths that include node <span class="math inline">\(k\)</span> as an <strong>inner node</strong>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Because <a href="#eq-pair">Equation&nbsp;1</a> is a ratio it can range from zero to one with everything in between. As such the pair dependency of a pair of nodes relative to a third has an intuitive interpretation as a <em>probability</em>, namely the probability that if you send something starting from <span class="math inline">\(i\)</span> in order for it to get to <span class="math inline">\(j\)</span> it has to go <em>through</em> <span class="math inline">\(k\)</span>. This probability is 1.0 if <span class="math inline">\(k\)</span> stands in <em>every</em> shortest path between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> and zero if <span class="math inline">\(k\)</span> does not lie in <em>any</em> of the shortest paths linking <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</p>
<p>We can also define the <strong>one-sided dependency</strong> of any one node <span class="math inline">\(i\)</span> on any other node <span class="math inline">\(k\)</span> in the graph as the sum of the pairwise dependencies on <span class="math inline">\(k\)</span> that involve <span class="math inline">\(i\)</span> across every other node <span class="math inline">\(j\)</span>: <span id="eq-one"><span class="math display">\[
\delta_{i|k} = \sum_j \delta_{i(k)j}
\tag{2}\]</span></span></p>
<p>The <strong>betweenness centrality</strong> of a node <span class="math inline">\(k\)</span> is then defined as the <em>sum of the dependencies</em> that <em>every pair</em> of nodes in the graph has on that node:</p>
<p><span id="eq-bet1"><span class="math display">\[
C^{B}_k = \sum_{i,j} \frac{\sigma_{i(k)j}}{\sigma_{ij}}
\tag{3}\]</span></span></p>
</section>
<section id="betweenness-geodesic-distance-and-shortest-paths" class="level2">
<h2 class="anchored" data-anchor-id="betweenness-geodesic-distance-and-shortest-paths">Betweenness, Geodesic Distance and Shortest Paths</h2>
<p>Let’s see an example of how to calculate betweenness centrality using real data. We first load our trusty <em>Pulp Fiction</em> data set from the <code>networkdata</code> package, which is an <strong>undirected</strong> graph of character scene co-appearances in the film:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>    <span class="fu">library</span>(networkdata)</span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="fu">library</span>(igraph)</span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="fu">library</span>(stringr) <span class="co">#using stringr to change names from all caps to title case</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>    g <span class="ot">&lt;-</span> movie_559</span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="fu">V</span>(g)<span class="sc">$</span>name <span class="ot">&lt;-</span> <span class="fu">str_to_title</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name)</span>
<span id="cb1-6"><a href="#cb1-6"></a>    <span class="fu">V</span>(g)<span class="sc">$</span>name[<span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name <span class="sc">==</span> <span class="st">"Esmarelda"</span>)] <span class="ot">&lt;-</span> <span class="st">"Esmeralda"</span> <span class="co">#fixing misspelled name</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>    <span class="fu">E</span>(g)<span class="sc">$</span>weight <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co">#setting weights to 1.0 (relevant for betweenness calculation)</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>    <span class="fu">V</span>(g)<span class="sc">$</span>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Brett"           "Buddy"           "Butch"           "Capt Koons"     
 [5] "Ed Sullivan"     "English Dave"    "Esmeralda"       "Fabienne"       
 [9] "Fourth Man"      "Gawker #2"       "Honey Bunny"     "Jimmie"         
[13] "Jody"            "Jules"           "Lance"           "Manager"        
[17] "Marsellus"       "Marvin"          "Maynard"         "Mia"            
[21] "Mother"          "Patron"          "Pedestrian"      "Preacher"       
[25] "Pumpkin"         "Raquel"          "Roger"           "Sportscaster #1"
[29] "Sportscaster #2" "The Gimp"        "The Wolf"        "Vincent"        
[33] "Waitress"        "Winston"         "Woman"           "Young Man"      
[37] "Young Woman"     "Zed"            </code></pre>
</div>
</div>
<p>To compute the components of the betweenness centrality defined earlier, we need two pieces of information. First we need to know the <em>length</em> of the shortest path between every pair of nodes. As we saw in our discussion of <a href="./closcent.html">closeness</a>, this is stored in the <strong>geodesic distance matrix</strong> (<span class="math inline">\(\mathbf{G}\)</span>) of dimensions <span class="math inline">\(N \times N\)</span>. In <code>igraph</code> we can calculate the entries for <span class="math inline">\(\mathbf{G}\)</span> using the <code>distances</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>    G <span class="ot">&lt;-</span> <span class="fu">distances</span>(g)</span>
<span id="cb3-2"><a href="#cb3-2"></a>    G[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Brett Buddy Butch Capt Koons Ed Sullivan English Dave Esmeralda
Brett            0     2     1          2           2            2         2
Buddy            2     0     2          2           2            2         3
Butch            1     2     0          1           2            1         1
Capt Koons       2     2     1          0           2            2         2
Ed Sullivan      2     2     2          2           0            2         3
English Dave     2     2     1          2           2            0         2
Esmeralda        2     3     1          2           3            2         0
Fabienne         1     3     1          2           3            2         2
Fourth Man       2     2     2          2           2            2         3
Gawker #2        2     3     1          2           3            2         2
             Fabienne Fourth Man Gawker #2
Brett               1          2         2
Buddy               3          2         3
Butch               1          2         1
Capt Koons          2          2         2
Ed Sullivan         3          2         3
English Dave        2          2         2
Esmeralda           2          3         2
Fabienne            0          2         2
Fourth Man          2          0         3
Gawker #2           2          3         0</code></pre>
</div>
</div>
<p>Next we need to know the <em>number</em> of shortest paths linking every pair of nodes (as nodes can be linked by multiple distinct shortest paths). In <code>igraph</code> we can use the <code>all_shortest_paths</code> function to figure out this information.</p>
<p>For instance, let’s say we wanted to find the number of shortest paths between the pair of nodes “Young Man” (at the diner) and “The Pedestrian” (who appears when Butch encounters Marsellus on the street). To do that we can just type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>    ap <span class="ot">&lt;-</span> <span class="fu">all_shortest_paths</span>(g, <span class="at">from =</span> <span class="st">"Pedestrian"</span>, <span class="at">to =</span> <span class="st">"Young Man"</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>    ap<span class="sc">$</span>vpaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian  Butch       Jules       Honey Bunny Young Man  

[[2]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian  Marsellus   Jules       Honey Bunny Young Man  

[[3]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian  Butch       Vincent     Honey Bunny Young Man  

[[4]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian  Marsellus   Vincent     Honey Bunny Young Man  

[[5]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian Butch      Jules      Pumpkin    Young Man 

[[6]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian Marsellus  Jules      Pumpkin    Young Man 

[[7]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian Butch      Vincent    Pumpkin    Young Man 

[[8]]
+ 5/38 vertices, named, from 9e7cc7a:
[1] Pedestrian Marsellus  Vincent    Pumpkin    Young Man </code></pre>
</div>
</div>
<p>The <code>all_shortest_paths</code> function has three arguments: The graph <code>g</code>, the <code>from</code> node (the starting node in the path count) and the <code>to</code> node (the end node in the path count).<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>The function stores the results in a list object containing various sub-objects. The actual paths (containing the node ids) are in a list sub-object called <code>vpaths</code>, which is itself a list (with named vectors containing the indices of the nodes of each path as elements). The <code>length</code> of this list is the number of shortest paths between the young man at the diner and the pedestrian:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>    <span class="fu">length</span>(ap<span class="sc">$</span>vpaths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>We can see that the list is of length eight, indicating that there are eight total shortest paths between the pedestrian and the young man.</p>
<p>If we wanted to verify the <em>length of the shortest path</em> between these two nodes, we could just type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>    G[<span class="st">"Young Man"</span>, <span class="st">"Pedestrian"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>Which provides us with the relevant entry in the geodesic distance matrix, telling us that the young man is four steps away from the pedestrian in the network. This also means that each path will involve five nodes (counting the young man and the pedestrian, with three intermediary nodes).</p>
<p>Note that we could have gotten the same information using the <code>distances</code> function in <code>igraph</code> specifying the <code>v</code> and <code>to</code> nodes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>    <span class="fu">distances</span>(g, <span class="at">v =</span> <span class="st">"Young Man"</span>, <span class="at">to =</span> <span class="st">"Pedestrian"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Pedestrian
Young Man          4</code></pre>
</div>
</div>
<p>Now, to populate the entries of the <strong>shortest paths matrix</strong> (<span class="math inline">\(\mathbf{S}\)</span>), we can just loop through each pair of (non-adjacent) nodes in the graph and record the length of the <code>vpaths</code> object obtained when we run the <code>all_shortest_paths</code> function on those nodes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">vcount</span>(g)</span>
<span id="cb13-2"><a href="#cb13-2"></a>    A <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(g))</span>
<span id="cb13-3"><a href="#cb13-3"></a>    S <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>, n, n) <span class="co">#intializing shortest paths matrix</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="fu">diag</span>(S) <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co">#setting diagonals to zero (Brandes, 2008, p. 137)</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="fu">rownames</span>(S) <span class="ot">&lt;-</span> <span class="fu">V</span>(g)<span class="sc">$</span>name</span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="fu">colnames</span>(S) <span class="ot">&lt;-</span> <span class="fu">V</span>(g)<span class="sc">$</span>name</span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb13-8"><a href="#cb13-8"></a>        <span class="cf">for</span> (j <span class="cf">in</span> i<span class="sc">:</span>n) { <span class="co">#looping through upper triangle</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>            <span class="cf">if</span> (A[i,j] <span class="sc">==</span> <span class="dv">0</span>) { <span class="co">#restrict to non-adjancent nodes </span></span>
<span id="cb13-10"><a href="#cb13-10"></a>                S[i,j] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">all_shortest_paths</span>(g, <span class="at">from =</span> i, <span class="at">to =</span> j)<span class="sc">$</span>vpaths)</span>
<span id="cb13-11"><a href="#cb13-11"></a>                }</span>
<span id="cb13-12"><a href="#cb13-12"></a>            }</span>
<span id="cb13-13"><a href="#cb13-13"></a>        }</span>
<span id="cb13-14"><a href="#cb13-14"></a>    S[<span class="fu">lower.tri</span>(S)] <span class="ot">&lt;-</span> <span class="fu">t</span>(S)[<span class="fu">lower.tri</span>(S)] <span class="co">#copying upper triangle into lower triangle</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>    S[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Brett Buddy Butch Capt Koons Ed Sullivan English Dave Esmeralda
Brett            1     1     1          2           1            3         1
Buddy            1     1     2          2           2            2         2
Butch            1     2     1          1           2            1         1
Capt Koons       2     2     1          1           2            3         1
Ed Sullivan      1     2     2          2           1            2         2
English Dave     3     2     1          3           2            1         1
Esmeralda        1     2     1          1           2            1         1
Fabienne         1     4     1          1           4            1         1
Fourth Man       2     1     2          1           1            1         2
Gawker #2        2     4     1          1           4            2         1
             Fabienne Fourth Man Gawker #2
Brett               1          2         2
Buddy               4          1         4
Butch               1          2         1
Capt Koons          1          1         1
Ed Sullivan         4          1         4
English Dave        1          1         2
Esmeralda           1          2         1
Fabienne            1          1         1
Fourth Man          1          1         4
Gawker #2           1          4         1</code></pre>
</div>
</div>
<p>Once we have the information stored in the <span class="math inline">\(\mathbf{G}\)</span> and <span class="math inline">\(\mathbf{S}\)</span> matrices, we have all we need to compute the various quantities defined earlier.</p>
</section>
<section id="computing-pairwise-dependencies" class="level2">
<h2 class="anchored" data-anchor-id="computing-pairwise-dependencies">Computing Pairwise Dependencies</h2>
<p><span class="citation" data-cites="brandes01">Brandes (<a href="#ref-brandes01" role="doc-biblioref">2001, 166</a>)</span> shows that we can take advantage of the fact that a node <span class="math inline">\(k\)</span> can only lie on a shortest path between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> if the sum of the geodesic distances between <span class="math inline">\(i\)</span> and <span class="math inline">\(k\)</span> and between <span class="math inline">\(k\)</span> and <span class="math inline">\(j\)</span> is equal to the geodesic distance between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>: <span class="math display">\[
g_{ij} = g_{ik} + g_{kj}
\]</span></p>
<p>If the above equality obtains, then the number of shortest paths between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> that involve <span class="math inline">\(k\)</span> as an inner node (the numerator of <a href="#eq-pair">Equation&nbsp;1</a>) is simply <span class="math inline">\(s_{ik} \times s_{kj}\)</span>. This means that the pair dependency of <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> on <span class="math inline">\(k\)</span> will be just:</p>
<p><span class="math display">\[
\delta_{i(k)j}= \frac{s_{ik} s_{kj}}{s_{ij}}
\]</span></p>
<p>Where <span class="math inline">\(s_{ij}\)</span> is the corresponding entry for <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> in the <span class="math inline">\(\mathbf{S}\)</span> matrix (the total number of shortest paths between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>).</p>
<p>This also means that if the above equality does <em>not</em> obtain and <span class="math inline">\(g_{ij} &lt; g_{ik} + g_{kj}\)</span>, then we know for sure that the pair dependency of <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> on <span class="math inline">\(k\)</span> is zero (<span class="math inline">\(k\)</span> does not lie on any shortest path between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>).</p>
<p>Using this approach, we can write a simple function to compute the pair dependency of any two nodes on a third node, using information stored in the <span class="math inline">\(\mathbf{G}\)</span> and <span class="math inline">\(\mathbf{S}\)</span> matrices:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>    pair.dep <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b, c) {</span>
<span id="cb15-2"><a href="#cb15-2"></a>        <span class="cf">if</span> (G[a, b] <span class="sc">==</span> G[a, c] <span class="sc">+</span> G[c, b]) {<span class="fu">return</span>((S[a, c]<span class="sc">*</span>S[c, b])<span class="sc">/</span>S[a, b])}</span>
<span id="cb15-3"><a href="#cb15-3"></a>        <span class="cf">else</span> {<span class="fu">return</span>(<span class="dv">0</span>)}</span>
<span id="cb15-4"><a href="#cb15-4"></a>        }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This function computes the pair dependency of the nodes entered as values of the <code>a</code> and <code>b</code> arguments on the node entered as the value of the <code>c</code> argument.</p>
<p>We can test it out to compute the pair dependency of the young man and the pedestrian on Vincent:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>    <span class="fu">pair.dep</span>(<span class="st">"Pedestrian"</span>, <span class="st">"Young Man"</span>, <span class="st">"Vincent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5</code></pre>
</div>
</div>
<p>Which says that Vicent lies on 50% of the paths between the The Young Man and The Pedestrian (four out of eight).</p>
</section>
<section id="computing-one-sided-dependencies" class="level2">
<h2 class="anchored" data-anchor-id="computing-one-sided-dependencies">Computing One-Sided Dependencies</h2>
<p>As noted in <a href="#eq-one">Equation&nbsp;2</a>, the <em>one-sided dependency</em> of a node <span class="math inline">\(i\)</span> on another node <span class="math inline">\(k\)</span> is just the sum of the pairwise dependencies involving <span class="math inline">\(i\)</span> as a source and <span class="math inline">\(k\)</span> as an intermediary across every destination node <span class="math inline">\(j\)</span>. We can get these using a simple wrapper function over the <code>pair.dep</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>    one.sided <span class="ot">&lt;-</span> <span class="cf">function</span>(a, c) {</span>
<span id="cb18-2"><a href="#cb18-2"></a>        od <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>        i <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name <span class="sc">==</span> a)</span>
<span id="cb18-4"><a href="#cb18-4"></a>        k <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name <span class="sc">==</span> c)</span>
<span id="cb18-5"><a href="#cb18-5"></a>        <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(g))[<span class="sc">-</span><span class="fu">c</span>(i, k)]) {od <span class="ot">&lt;-</span> od <span class="sc">+</span> <span class="fu">pair.dep</span>(i, j, k)}</span>
<span id="cb18-6"><a href="#cb18-6"></a>        <span class="fu">return</span>(od)</span>
<span id="cb18-7"><a href="#cb18-7"></a>        }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So the one-sided dependence of the young man on Vincent is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>    <span class="fu">one.sided</span>(<span class="st">"Young Man"</span>, <span class="st">"Vincent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 19</code></pre>
</div>
</div>
<p>Which is the sum of the pair dependencies that involve the young man as a starting node and Vincent as an inner node.</p>
<p>Note that while the young man is highly dependent on Vincent to reach others, the reverse is not the case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>    <span class="fu">one.sided</span>(<span class="st">"Vincent"</span>, <span class="st">"Young Man"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>As the young man stands on none of the paths that link Vincent to other nodes in the graph.</p>
</section>
<section id="computing-betweenness" class="level2">
<h2 class="anchored" data-anchor-id="computing-betweenness">Computing Betweenness</h2>
<p>As noted in <a href="#eq-bet1">Equation&nbsp;3</a>, Vincent’s <em>betweenness</em> is just the sum of the dependencies of each pair of nodes in the graph on him. We could compute that quantity (not very efficiently) for any node in the graph using the following wrapper function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>    bet.cent <span class="ot">&lt;-</span> <span class="cf">function</span>(c) {</span>
<span id="cb23-2"><a href="#cb23-2"></a>        n <span class="ot">&lt;-</span> <span class="fu">vcount</span>(g)</span>
<span id="cb23-3"><a href="#cb23-3"></a>        bc <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>        k <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name <span class="sc">==</span> c)</span>
<span id="cb23-5"><a href="#cb23-5"></a>        <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb23-6"><a href="#cb23-6"></a>            <span class="cf">for</span> (j <span class="cf">in</span> i<span class="sc">:</span>n) {</span>
<span id="cb23-7"><a href="#cb23-7"></a>                <span class="cf">if</span> (i <span class="sc">!=</span> k <span class="sc">&amp;</span> j <span class="sc">!=</span> k <span class="sc">&amp;</span> A[i, j] <span class="sc">==</span> <span class="dv">0</span>) {bc <span class="ot">&lt;-</span> bc <span class="sc">+</span> <span class="fu">pair.dep</span>(i, j, k)}</span>
<span id="cb23-8"><a href="#cb23-8"></a>            }</span>
<span id="cb23-9"><a href="#cb23-9"></a>        }</span>
<span id="cb23-10"><a href="#cb23-10"></a>    <span class="fu">return</span>(bc)</span>
<span id="cb23-11"><a href="#cb23-11"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And now to find Vicent’s betweenness:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>    <span class="fu">bet.cent</span>(<span class="st">"Vincent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 301</code></pre>
</div>
</div>
<p>Which is the same result we would have gotten had we used the <code>betweenness</code> function in <code>igraph</code> specifying that we want the answer just for the Vincent node:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>    <span class="fu">betweenness</span>(g, <span class="at">v =</span> <span class="st">"Vincent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Vincent 
    301 </code></pre>
</div>
</div>
<p>We can of course use the same <code>igraph</code> function to—efficiently, using Brandes’s <span class="citation" data-cites="brandes01">(<a href="#ref-brandes01" role="doc-biblioref">2001</a>)</span> algorithm—compute the betweenness centrality of each node in the graph stored in a vector of length <span class="math inline">\(N\)</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>    pulp.bet <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We should expect a character to have high betweenness in this network to the extent that they appear in scenes with characters who themselves don’t appear in any scenes together, thus inter-mediating between different parts of the story. Characters who only appear in one scene with some others (like The Wolf or The Gimp) are likely to be low in betweenness.</p>
<p>Using the information stored in the <code>pulp.bet</code> vector of betweenness centralities for each node, we can create a top ten table of betweenness for the <em>Pulp Fiction</em> network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>    <span class="fu">library</span>(kableExtra)</span>
<span id="cb29-2"><a href="#cb29-2"></a>    top.<span class="fl">10.</span>bet <span class="ot">&lt;-</span> <span class="fu">sort</span>(pulp.bet, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="fu">kbl</span>(<span class="fu">round</span>(top.<span class="fl">10.</span>bet, <span class="dv">2</span>), <span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>),</span>
<span id="cb29-4"><a href="#cb29-4"></a>        <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Character"</span>, <span class="st">"Betweenness"</span>),</span>
<span id="cb29-5"><a href="#cb29-5"></a>        <span class="at">caption =</span> <span class="st">"Top Ten Betweenness Characters in Pulp Fiction Network."</span>) <span class="sc">|&gt;</span> </span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>Top Ten Betweenness Characters in Pulp Fiction Network.</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Character </th>
   <th style="text-align:left;"> Betweenness </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Vincent </td>
   <td style="text-align:left;"> 301.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Butch </td>
   <td style="text-align:left;"> 248.33 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Jules </td>
   <td style="text-align:left;"> 114.17 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Maynard </td>
   <td style="text-align:left;"> 70.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Honey Bunny </td>
   <td style="text-align:left;"> 49.50 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Pumpkin </td>
   <td style="text-align:left;"> 49.50 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sportscaster #1 </td>
   <td style="text-align:left;"> 36.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mia </td>
   <td style="text-align:left;"> 33.50 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Marsellus </td>
   <td style="text-align:left;"> 26.67 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brett </td>
   <td style="text-align:left;"> 2.67 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Unsurprisingly, the three main characters in the story are also the highest in betweenness, with the already considered Vincent at the top of the list (that makes sense since Vincent intermediates between Butch and the rest of the story as he sadly found out in the <a href="https://www.youtube.com/watch?v=fm9VPN1r4Hk">toilet</a>). Somewhat surprisingly, the main antagonist of the story (the pawn shop owner) is also up there. After that we see a big drop in the bottom five of the top ten.</p>
</section>
<section id="computing-normalized-betweenness" class="level2">
<h2 class="anchored" data-anchor-id="computing-normalized-betweenness">Computing Normalized Betweenness</h2>
<p>The <code>betweenness</code> function in <code>igraph</code> uses Freeman’s <span class="citation" data-cites="freeman79">(<a href="#ref-freeman79" role="doc-biblioref">1979</a>)</span> normalization for the betweenness centrality, which is equal to:</p>
<p><span id="eq-nbet"><span class="math display">\[
C^{NB}_k = = \frac{2\left[\sum_{i,j} \frac{\sigma_{i(k)j}}{\sigma_{ij}}\right]}{(n-1)(n-2)}
\tag{4}\]</span></span></p>
<p>Where the denominator of the fraction, <span class="math inline">\((n-1)(n-2)\)</span>, is equal to (two times) the betweenness a node would have if it was the center of a <strong>star graph</strong> of the same order as the observed network.</p>
<p>So for the <em>Pulp Fiction</em> network the normalized betweenness is equal to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">vcount</span>(g)</span>
<span id="cb30-2"><a href="#cb30-2"></a>    pulp.nbet <span class="ot">&lt;-</span> (<span class="dv">2</span><span class="sc">*</span>pulp.bet)<span class="sc">/</span>((n<span class="dv">-1</span>)<span class="sc">*</span>(n<span class="dv">-2</span>))</span>
<span id="cb30-3"><a href="#cb30-3"></a>    top.<span class="fl">10.</span>nbet <span class="ot">&lt;-</span> <span class="fu">sort</span>(pulp.nbet, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb30-4"><a href="#cb30-4"></a>    <span class="fu">round</span>(top.<span class="fl">10.</span>nbet, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Vincent           Butch           Jules         Maynard     Honey Bunny 
         0.4520          0.3729          0.1714          0.1051          0.0743 
        Pumpkin Sportscaster #1             Mia       Marsellus           Brett 
         0.0743          0.0541          0.0503          0.0400          0.0040 </code></pre>
</div>
</div>
<p>Which are the same scores we would obtain using the <code>igraph</code> function with the argument <code>normalized</code> set to <code>TRUE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>    pulp.nbet <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(g, <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-2"><a href="#cb32-2"></a>    top.<span class="fl">10.</span>nbet <span class="ot">&lt;-</span> <span class="fu">sort</span>(pulp.nbet, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb32-3"><a href="#cb32-3"></a>    <span class="fu">round</span>(top.<span class="fl">10.</span>nbet, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Vincent           Butch           Jules         Maynard     Honey Bunny 
         0.4520          0.3729          0.1714          0.1051          0.0743 
        Pumpkin Sportscaster #1             Mia       Marsellus           Brett 
         0.0743          0.0541          0.0503          0.0400          0.0040 </code></pre>
</div>
</div>
</section>
<section id="betwenness-in-directed-graphs" class="level2">
<h2 class="anchored" data-anchor-id="betwenness-in-directed-graphs">Betwenness in Directed Graphs</h2>
<p>In contrast to closeness, there is no problem computing betweenness in the directed case. The reason is that if the graph is not strongly connected, and therefore there exists a pair of nodes <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> with no directed path from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span> (e.g., <span class="math inline">\(g_{ij}=\infty\)</span>), then we just set <span class="math inline">\(\sigma_{ij} = 0\)</span> in <a href="#eq-bet1">Equation&nbsp;3</a>.</p>
<p>Let us examine betweenness centrality in the directed young women lawyers advice network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>    g <span class="ot">&lt;-</span> law_advice</span>
<span id="cb34-2"><a href="#cb34-2"></a>    women <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">2</span>) <span class="co">#selecting women</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>    wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, women)</span>
<span id="cb34-4"><a href="#cb34-4"></a>    young <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(wg)<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">40</span>) <span class="co">#selecting women under forty</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>    wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(wg, young)</span>
<span id="cb34-6"><a href="#cb34-6"></a>    <span class="fu">V</span>(wg)<span class="sc">$</span>name <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(wg) <span class="co">#naming nodes</span></span>
<span id="cb34-7"><a href="#cb34-7"></a>    w.bet <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(wg)</span>
<span id="cb34-8"><a href="#cb34-8"></a>    <span class="fu">round</span>(w.bet, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1      2      3      4      5      6      7      8      9     10     11 
 0.000  3.000 16.333 11.000  7.000  0.000  0.000  5.000  0.000  0.333  1.000 
    12 
 0.333 </code></pre>
</div>
</div>
<p>Here we see that node 3 is the highest in betweenness, pictured in red in <a href="#fig-yw">Figure&nbsp;1</a>. For comparison, the node with the highest <em>closeness</em> centrality is pictured in blue in the same figure.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-yw" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="betcent_files/figure-html/fig-yw-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Women lawyers advice network with highest closeness centrality node in blue and highest betweenness centrality node in red</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>This result makes sense. Node 3 intermediates all the connections linking the tightly knit group of nodes on the left side (6, 10, 11, 12) with the rest of the network. Also if nodes 5 and 7 need to pass something along to the rest, they have to use 3 at least half time. Node 4 also needs 3 to reach 6.</p>
<p>This result nicely illustrates the difference between closeness and betweenness.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-brandes01" class="csl-entry" role="doc-biblioentry">
Brandes, Ulrik. 2001. <span>“A Faster Algorithm for Betweenness Centrality.”</span> <em>Journal of Mathematical Sociology</em> 25 (2): 163–77.
</div>
<div id="ref-brandes08" class="csl-entry" role="doc-biblioentry">
———. 2008. <span>“On Variants of Shortest-Path Betweenness Centrality and Their Generic Computation.”</span> <em>Social Networks</em> 30 (2): 136–45.
</div>
<div id="ref-freeman79" class="csl-entry" role="doc-biblioentry">
Freeman, Linton C. 1979. <span>“Centrality in Social Networks Conceptual Clarification.”</span> <em>Social Networks</em> 1: 215–39.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>As <span class="citation" data-cites="brandes08">Brandes (<a href="#ref-brandes08" role="doc-biblioref">2008, 137</a>)</span> notes, when <span class="math inline">\(i = j\)</span>, then <span class="math inline">\(\sigma_{ij} = 1\)</span> and when <span class="math inline">\(k \in \{i, j\}\)</span>, then <span class="math inline">\(\sigma_{i(k)j} = 0\)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>In an undirected graph you get the same result for a pair of nodes regardless of which one you put on the <code>from</code> or <code>to</code> slots.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>