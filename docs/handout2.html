<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOCIOL 208 - Centrality</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="SOCIOL 208 - Centrality">
<meta property="og:description" content="In this handout we will go through the basic centrality metrics. Particularly, the “big three” according to Freeman (1979), namely, degree, closeness (in two flavors) and betweenness.">
<meta property="og:site-name" content="SOCIOL 208">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Centrality</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SOCIOL 208</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">208A</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208A.html" class="sidebar-item-text sidebar-link">208A Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208A-F24.html" class="sidebar-item-text sidebar-link">SOCIOL 208A Reading Schedule (Fall 2024)</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Handouts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout1.html" class="sidebar-item-text sidebar-link">Basic Network Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout2.html" class="sidebar-item-text sidebar-link active">Centrality</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">208B</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208B.html" class="sidebar-item-text sidebar-link">208B Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208B-S24.html" class="sidebar-item-text sidebar-link">SOCIOL 208B Reading Schedule (Spring 2024)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#degree-cenntrality" id="toc-degree-cenntrality" class="nav-link active" data-scroll-target="#degree-cenntrality">Degree Cenntrality</a></li>
  <li><a href="#indegree-and-outdegree" id="toc-indegree-and-outdegree" class="nav-link" data-scroll-target="#indegree-and-outdegree">Indegree and Outdegree</a>
  <ul class="collapse">
  <li><a href="#subsetting-the-graph-according-to-a-node-attribute" id="toc-subsetting-the-graph-according-to-a-node-attribute" class="nav-link" data-scroll-target="#subsetting-the-graph-according-to-a-node-attribute">Subsetting the Graph According to a Node Attribute</a></li>
  <li><a href="#computing-in-and-outdegree" id="toc-computing-in-and-outdegree" class="nav-link" data-scroll-target="#computing-in-and-outdegree">Computing in and outdegree</a></li>
  </ul></li>
  <li><a href="#closeness-centrality" id="toc-closeness-centrality" class="nav-link" data-scroll-target="#closeness-centrality">Closeness Centrality</a>
  <ul class="collapse">
  <li><a href="#harmonic-centrality" id="toc-harmonic-centrality" class="nav-link" data-scroll-target="#harmonic-centrality">Harmonic Centrality</a></li>
  </ul></li>
  <li><a href="#betweenness" id="toc-betweenness" class="nav-link" data-scroll-target="#betweenness">Betweenness</a></li>
  <li><a href="#edge-betweenness" id="toc-edge-betweenness" class="nav-link" data-scroll-target="#edge-betweenness">Edge Betweenness</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/olizardo/SOCIOL208/blob/main/handout2.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Centrality</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this handout we will go through the basic centrality metrics. Particularly, the “big three” according to <span class="citation" data-cites="freeman79">Freeman (<a href="#ref-freeman79" role="doc-biblioref">1979</a>)</span>, namely, <strong>degree</strong>, <strong>closeness</strong> (in two flavors) and <strong>betweenness</strong>.</p>
<p>We first load our trusty <em>Pulp Fiction</em> data set from the <code>networkdata</code> package, which is an <strong>undirected</strong> graph of character scene co-appearances in the film:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>   <span class="fu">library</span>(networkdata)</span>
<span id="cb1-2"><a href="#cb1-2"></a>   <span class="fu">library</span>(igraph)</span>
<span id="cb1-3"><a href="#cb1-3"></a>   g <span class="ot">&lt;-</span> movie_559</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="degree-cenntrality" class="level2">
<h2 class="anchored" data-anchor-id="degree-cenntrality">Degree Cenntrality</h2>
<p>Degree centrality is the simplest and most straightforward measure. In fact, we are already computed in <a href="https://olizardo.github.io/SOCIOL208/handout1.html">handout 1</a> since it is the same as obtaining the graph’s <strong>degree sequence</strong>. So the <code>igraph</code> function <code>degree</code> would do it as we already saw.</p>
<p>Here we follow a different approach using the row (or column) sums of the graph’s <strong>adjacency matrix</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>   A <span class="ot">&lt;-</span> <span class="fu">as_adjacency_matrix</span>(g)</span>
<span id="cb2-2"><a href="#cb2-2"></a>   A <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(A)</span>
<span id="cb2-3"><a href="#cb2-3"></a>   <span class="fu">rowSums</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          BRETT           BUDDY           BUTCH      CAPT KOONS     ED SULLIVAN 
              7               2              17               5               2 
   ENGLISH DAVE       ESMARELDA        FABIENNE      FOURTH MAN       GAWKER #2 
              4               1               3               2               3 
    HONEY BUNNY          JIMMIE            JODY           JULES           LANCE 
              8               3               4              16               4 
        MANAGER       MARSELLUS          MARVIN         MAYNARD             MIA 
              5              10               6               3              11 
         MOTHER          PATRON      PEDESTRIAN        PREACHER         PUMPKIN 
              5               5               3               3               8 
         RAQUEL           ROGER SPORTSCASTER #1 SPORTSCASTER #2        THE GIMP 
              3               6               2               1               2 
       THE WOLF         VINCENT        WAITRESS         WINSTON           WOMAN 
              3              25               4               3               5 
      YOUNG MAN     YOUNG WOMAN             ZED 
              4               4               2 </code></pre>
</div>
</div>
<p>The <code>igraph</code> function <code>as_adjancency_matrix</code> doesn’t quite return a regular <code>R</code> matrix object, so we have to further coerce the resulting object into a numerical matrix containing zeroes and ones using the <code>as.matrix</code> function in line 2. Then we can apply the native <code>rowSums</code> function to obtain each node’s degree. Note that this is same output we got using the <code>degree</code> function before.</p>
</section>
<section id="indegree-and-outdegree" class="level2">
<h2 class="anchored" data-anchor-id="indegree-and-outdegree">Indegree and Outdegree</h2>
<p>The movie network is based on the relationship of co-appearance in a scene which by nature lacks any natural directionality (it’s a symmetric relation) and can therefore be represented in an <strong>undirected graph</strong>. The concepts of in and outdegree, by contrast, are only applicable to directed relations. So to illustrate them, we need to switch to a different source of data.</p>
<p>We pick an <strong>advice network</strong> which is a classical directed kind of (asymmetric) relation. I can give advice to you, but that doesn’t necessarily mean you can give advice to me. The <code>networkdata</code> package contains one such data set collected in the late 80s early 1990s in a New England law firm (see the description <a href="https://rdrr.io/github/schochastics/networkdata/man/law_advice.html">here</a>), called <code>law_advice</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>   d.g <span class="ot">&lt;-</span> law_advice</span>
<span id="cb4-2"><a href="#cb4-2"></a>   <span class="fu">V</span>(d.g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 71/71 vertices, from d1a9da7:
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
[51] 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>   <span class="fu">vertex_attr</span>(d.g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$status
 [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2
[39] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2

$gender
 [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 1 1 1 1 2 1 1 1 2
[39] 2 1 1 1 2 2 1 2 1 2 1 1 2 1 1 1 1 1 2 1 2 2 2 1 1 2 1 1 2 1 2 1 2

$office
 [1] 1 1 2 1 2 2 2 1 1 1 1 1 1 2 3 1 1 2 1 1 1 1 1 1 2 1 1 2 1 2 2 2 2 1 2 1 3 1
[39] 1 1 1 1 1 3 1 2 3 1 1 2 2 1 1 1 1 1 1 2 2 1 1 1 2 1 1 1 1 1 1 1 1

$seniority
 [1] 31 32 13 31 31 29 29 28 25 25 23 24 22  1 21 20 23 18 19 19 17  9 16 15 15
[26] 15 13 11 10  7  8  8  8  8  8  5  5  7  6  6  5  4  5  5  3  3  3  1  4  3
[51]  4  4 10  3  3  3  3  3  2  2  2  2  2  2  2  1  1  1  1  1  1

$age
 [1] 64 62 67 59 59 55 63 53 53 53 50 52 57 56 48 46 50 45 46 49 43 49 45 44 43
[26] 41 47 38 38 39 34 33 37 36 33 43 44 53 37 34 31 31 47 53 38 42 38 35 36 31
[51] 29 29 38 29 34 38 33 33 30 31 34 32 29 45 28 43 35 26 38 31 26

$practice
 [1] 1 2 1 2 1 1 2 1 2 2 1 2 1 2 2 2 2 1 2 1 1 1 1 1 2 1 1 2 2 1 1 1 1 2 2 1 2 1
[39] 1 1 1 2 1 2 2 2 1 2 1 2 1 1 2 1 1 1 1 1 1 2 2 2 2 2 1 1 1 1 1 2 1

$law_school
 [1] 1 1 1 3 2 1 3 3 1 3 1 2 2 1 3 1 1 2 1 1 2 3 2 2 2 3 1 2 3 3 2 3 3 2 3 3 3 2
[39] 1 1 2 2 2 1 3 2 3 3 2 2 3 3 3 3 3 2 2 3 2 2 3 2 2 2 3 3 2 3 3 2 2</code></pre>
</div>
</div>
<p>We can see that the graph has 71 vertices, and that there are various <strong>attributes</strong> associated with each vertex, like gender, age, seniority, status in the law firm, etc. We can query those attributes using the <code>igraph</code> function <code>vertex_attr</code>, which takes the graph object as input.</p>
<section id="subsetting-the-graph-according-to-a-node-attribute" class="level3">
<h3 class="anchored" data-anchor-id="subsetting-the-graph-according-to-a-node-attribute">Subsetting the Graph According to a Node Attribute</h3>
<p>To keep things manageable, we will restrict our analysis to partners. To do that we need to select the <strong>subgraph</strong> that only includes the vertices with value of 1 in the “status” vertex attribute. From the <a href="https://rdrr.io/github/schochastics/networkdata/man/law_advice.html">data description</a>, we know the first 36 nodes (with value of 1 in the status attribute) are the law firm’s partners (the rest are associates). In <code>igraph</code> we can do this as using the <code>subgraph</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>   d.g <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(d.g, <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a>   <span class="fu">V</span>(d.g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 36/36 vertices, from 10ef295:
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31 32 33 34 35 36</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>   <span class="fu">V</span>(d.g)<span class="sc">$</span>status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<p>The first line just tells <code>igraph</code> to generate the subgraph containing the first 36 nodes (the partners). The <code>subgraph</code> function thus takes two main inputs: The graph object, and then a vector of node ids (or node labels) telling the function which nodes to select to create the <strong>node-induced subgraph</strong>.</p>
<p>Of course we already knew from the data description that the first 36 nodes where the partners. But let’s say we have a large data set and we don’t know <em>which</em> nodes are the partners. A smarter way of selecting a subgraph based on a node attribute is as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>   partners <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(law_advice)<span class="sc">$</span>status <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a>   d.g <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(law_advice, partners)</span>
<span id="cb12-3"><a href="#cb12-3"></a>   <span class="fu">V</span>(d.g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 36/36 vertices, from 10f6ec1:
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31 32 33 34 35 36</code></pre>
</div>
</div>
<p>The first line using the native <code>R</code> vector function <code>which</code> allowing us to subset a vector based on a logical condition. The function takes a vector followed by a logical condition as input, and returns the <em>position</em> of the vector elements that meet that condition. In this case, we took the vector of values for the attribute of status and selected the node ids where status is equal to 1. We then fed that vector to the <code>subgraph</code> function in line 2.</p>
<p>We could do this with any other attribute:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>   older <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(law_advice)<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a>   older</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 12 13 14 38 44</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>   og <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(law_advice, older)</span>
<span id="cb16-2"><a href="#cb16-2"></a>   <span class="fu">V</span>(og)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 15/15 vertices, from 10fcfd3:
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15</code></pre>
</div>
</div>
<p>Here we selected the subgraph (called “og”, get it, get it) formed by the subset of nodes over the age of 50 at the firm. The values of the vector older tell us which of the 71 members meet the relevant condition.</p>
</section>
<section id="computing-in-and-outdegree" class="level3">
<h3 class="anchored" data-anchor-id="computing-in-and-outdegree">Computing in and outdegree</h3>
<p>OK, going back to the partners subgraph, we can now create our (asymmetric) adjacency matrix and compute the row and column sums:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>   d.A <span class="ot">&lt;-</span> <span class="fu">as_adjacency_matrix</span>(d.g)</span>
<span id="cb18-2"><a href="#cb18-2"></a>   d.A <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(d.A)</span>
<span id="cb18-3"><a href="#cb18-3"></a>   <span class="fu">rowSums</span>(d.A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3  7  7 17  4  0  4  2  3  7  5 18 11 13 10 19 17  5 21 10  9 12  9 16  8
[26] 22 18 22 13 15 16  9 15  6 15  7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>   <span class="fu">colSums</span>(d.A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 18 17  8 14 10 17  4  8 10  6 11 14 14 12 15 13 21  7  7 17 11 10  2 14  7
[26] 20  2 14 12 11  8 13  2 16  8  2</code></pre>
</div>
</div>
<p>Note that in contrast to the undirected case the row and column sums give you two different sets of numbers. The row sums provide the directed graph’s <strong>outdegree set</strong> (number of <em>outgoing</em> links incident to each node), and the column sums provide the graph’s <strong>indegree set</strong> (number of <em>incoming</em> links incident to each node). So if you are high in the first vector, you are an <em>advice giver</em> (perhaps indicating informal status or experience) and if you are high in the second you are advice taker.</p>
<p>Of course <code>igraph</code> has a dedicated function for this, which is just our old friend <code>degree</code> with an extra option <code>mode</code>, indicating whether you want the in or outdegrees:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>   d.o <span class="ot">&lt;-</span> <span class="fu">degree</span>(d.g, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb22-2"><a href="#cb22-2"></a>   d.i <span class="ot">&lt;-</span> <span class="fu">degree</span>(d.g, <span class="at">mode =</span> <span class="st">"in"</span>)</span>
<span id="cb22-3"><a href="#cb22-3"></a>   d.o</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3  7  7 17  4  0  4  2  3  7  5 18 11 13 10 19 17  5 21 10  9 12  9 16  8
[26] 22 18 22 13 15 16  9 15  6 15  7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>   d.i</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 18 17  8 14 10 17  4  8 10  6 11 14 14 12 15 13 21  7  7 17 11 10  2 14  7
[26] 20  2 14 12 11  8 13  2 16  8  2</code></pre>
</div>
</div>
<p>Note that the graph attributes are just vectors of values, and can be accessed from the graph object using the $ operator attached to the <code>V()</code> function as we did above.</p>
<p>So if we wanted to figure out the correlation between some vertex attribute and in or out degree centrality, all we need to do is correlate the two vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>   r <span class="ot">&lt;-</span> <span class="fu">cor</span>(d.o, <span class="fu">V</span>(d.g)<span class="sc">$</span>age)</span>
<span id="cb26-2"><a href="#cb26-2"></a>   <span class="fu">round</span>(r, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.43</code></pre>
</div>
</div>
<p>Which tells us that at least in this case, younger partners are more sought after as sources of advice than older partners.</p>
</section>
</section>
<section id="closeness-centrality" class="level2">
<h2 class="anchored" data-anchor-id="closeness-centrality">Closeness Centrality</h2>
<p>Recall that the <strong>closeness centrality</strong> is defined as the inverse of the sum of shortest paths from each node to every other node. That means that to compute it, we first need to calculate the shortest path matrix. Then, we sum the rows (or columns) and then we obtain the inverse to get the closeness of each node:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>   S <span class="ot">&lt;-</span> <span class="fu">distances</span>(g) <span class="co">#shortest paths matrix</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>   d.sum <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(S)</span>
<span id="cb28-3"><a href="#cb28-3"></a>   close1 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="dv">1</span><span class="sc">/</span>d.sum, <span class="dv">4</span>)</span>
<span id="cb28-4"><a href="#cb28-4"></a>   close1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          BRETT           BUDDY           BUTCH      CAPT KOONS     ED SULLIVAN 
         0.0125          0.0108          0.0143          0.0125          0.0108 
   ENGLISH DAVE       ESMARELDA        FABIENNE      FOURTH MAN       GAWKER #2 
         0.0105          0.0070          0.0096          0.0104          0.0097 
    HONEY BUNNY          JIMMIE            JODY           JULES           LANCE 
         0.0114          0.0093          0.0093          0.0132          0.0093 
        MANAGER       MARSELLUS          MARVIN         MAYNARD             MIA 
         0.0111          0.0104          0.0103          0.0098          0.0115 
         MOTHER          PATRON      PEDESTRIAN        PREACHER         PUMPKIN 
         0.0125          0.0111          0.0097          0.0097          0.0114 
         RAQUEL           ROGER SPORTSCASTER #1 SPORTSCASTER #2        THE GIMP 
         0.0105          0.0125          0.0096          0.0057          0.0073 
       THE WOLF         VINCENT        WAITRESS         WINSTON           WOMAN 
         0.0056          0.0139          0.0083          0.0105          0.0125 
      YOUNG MAN     YOUNG WOMAN             ZED 
         0.0083          0.0083          0.0073 </code></pre>
</div>
</div>
<p>Of course, we could have just used the available function in igraph and computed the closeness centrality directly from the graph object using the function <code>closeness</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>   close2 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">closeness</span>(g), <span class="dv">4</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a>   close2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          BRETT           BUDDY           BUTCH      CAPT KOONS     ED SULLIVAN 
         0.0125          0.0108          0.0143          0.0125          0.0108 
   ENGLISH DAVE       ESMARELDA        FABIENNE      FOURTH MAN       GAWKER #2 
         0.0105          0.0070          0.0096          0.0104          0.0097 
    HONEY BUNNY          JIMMIE            JODY           JULES           LANCE 
         0.0114          0.0093          0.0093          0.0132          0.0093 
        MANAGER       MARSELLUS          MARVIN         MAYNARD             MIA 
         0.0111          0.0104          0.0103          0.0098          0.0115 
         MOTHER          PATRON      PEDESTRIAN        PREACHER         PUMPKIN 
         0.0125          0.0111          0.0097          0.0097          0.0114 
         RAQUEL           ROGER SPORTSCASTER #1 SPORTSCASTER #2        THE GIMP 
         0.0105          0.0125          0.0096          0.0057          0.0073 
       THE WOLF         VINCENT        WAITRESS         WINSTON           WOMAN 
         0.0056          0.0139          0.0083          0.0105          0.0125 
      YOUNG MAN     YOUNG WOMAN             ZED 
         0.0083          0.0083          0.0073 </code></pre>
</div>
</div>
<p>Once we have the closeness centrality values, we are interested in who are the top nodes. The following code creates a table with the top five:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>   <span class="fu">library</span>(kableExtra)</span>
<span id="cb32-2"><a href="#cb32-2"></a>   close2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(close2, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-3"><a href="#cb32-3"></a>   close2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(close2[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb32-4"><a href="#cb32-4"></a>   <span class="fu">kbl</span>(close2, <span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>),</span>
<span id="cb32-5"><a href="#cb32-5"></a>       <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Character"</span>, <span class="st">"Closeness"</span>),</span>
<span id="cb32-6"><a href="#cb32-6"></a>       <span class="at">caption =</span> <span class="st">"Top Five Closeness Characters in Pulp Fiction Network."</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-7"><a href="#cb32-7"></a>   <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>Top Five Closeness Characters in Pulp Fiction Network.</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Character </th>
   <th style="text-align:left;"> Closeness </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> BUTCH </td>
   <td style="text-align:left;"> 0.0143 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> VINCENT </td>
   <td style="text-align:left;"> 0.0139 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> JULES </td>
   <td style="text-align:left;"> 0.0132 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> BRETT </td>
   <td style="text-align:left;"> 0.0125 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> CAPT KOONS </td>
   <td style="text-align:left;"> 0.0125 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>It makes sense that the three main characters are also the ones that are at closest distances from everyone else!</p>
<p>What about closeness centrality for a directed network? Let us see how this works using a <strong>subgraph</strong> of the advice network, this time selecting just women under the age of forty:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>   women <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(law_advice)<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb33-2"><a href="#cb33-2"></a>   wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(law_advice, women)</span>
<span id="cb33-3"><a href="#cb33-3"></a>   young <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(wg)<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">40</span>)</span>
<span id="cb33-4"><a href="#cb33-4"></a>   wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(wg, young)</span>
<span id="cb33-5"><a href="#cb33-5"></a>   <span class="fu">V</span>(wg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 12/12 vertices, from 11502b9:
 [1]  1  2  3  4  5  6  7  8  9 10 11 12</code></pre>
</div>
</div>
<p>This network is small enough that a plot could be informative about its structure. Let us plot it using the package <code>ggraph</code>, a visualization package that follows the same principles as the <code>ggplot</code> grammar of graphics but for network graphs (see <a href="https://exts.ggplot2.tidyverse.org/ggraph.html">here</a>).</p>
<div class="cell" data-fig-cap-location="margin">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>   <span class="co">#install.packages("ggraph")</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>   <span class="fu">library</span>(ggraph)</span>
<span id="cb35-3"><a href="#cb35-3"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(wg, <span class="at">layout =</span> <span class="st">'auto'</span>)</span>
<span id="cb35-4"><a href="#cb35-4"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_edge_parallel</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">edge_width =</span> <span class="fl">0.5</span>,</span>
<span id="cb35-5"><a href="#cb35-5"></a>                                <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">2.5</span>, <span class="st">'mm'</span>)),</span>
<span id="cb35-6"><a href="#cb35-6"></a>                                <span class="at">end_cap =</span> <span class="fu">circle</span>(<span class="dv">4</span>, <span class="st">'mm'</span>), </span>
<span id="cb35-7"><a href="#cb35-7"></a>                                <span class="at">sep =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">'mm'</span>))</span>
<span id="cb35-8"><a href="#cb35-8"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"tan2"</span>) </span>
<span id="cb35-9"><a href="#cb35-9"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(wg)), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb35-10"><a href="#cb35-10"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_graph</span>() </span>
<span id="cb35-11"><a href="#cb35-11"></a>    p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="handout2_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Women lawyers advice network</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Now a question we might ask is who has the greatest closeness centrality in this advice network. We could proceed as usual and compute the geodesic distances between actors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>   S <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg)</span>
<span id="cb36-2"><a href="#cb36-2"></a>   S</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
 [1,]    0    1    2    1    3    3    4    2    2     3     3     3
 [2,]    1    0    2    1    2    3    3    1    1     3     3     3
 [3,]    2    2    0    1    1    1    2    2    3     1     1     1
 [4,]    1    1    1    0    2    2    3    2    2     2     2     2
 [5,]    3    2    1    2    0    1    1    1    2     2     2     2
 [6,]    3    3    1    2    1    0    2    2    3     1     2     1
 [7,]    4    3    2    3    1    2    0    2    3     3     3     3
 [8,]    2    1    2    2    1    2    2    0    1     3     3     3
 [9,]    2    1    3    2    2    3    3    1    0     4     4     4
[10,]    3    3    1    2    2    1    3    3    4     0     1     1
[11,]    3    3    1    2    2    2    3    3    4     1     0     1
[12,]    3    3    1    2    2    1    3    3    4     1     1     0</code></pre>
</div>
</div>
<p>Note that this is not quite right. In <code>igraph</code> the default settings of the distance function treats the graph as undirected. So it doesn’t use the strict <strong>directed paths</strong>, but it just treats them all as <strong>semi-paths</strong> ignoring direction. That is why, for instance, it counts node 1 as being “adjacent” to node 4 even though there is only one incoming link from 4 to 1 and why the whole matrix is symmetric, when we know from just eyeballing the network that there is a lot of asymmetry in terms of who can reach who via directed paths.</p>
<p>To get the actual directed distance matrix, we need to specify the “mode” option, asking whether we want in or out paths. Here, let’s select out-paths:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>   S <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb38-2"><a href="#cb38-2"></a>   S</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
 [1,]    0    1  Inf  Inf  Inf  Inf  Inf  Inf  Inf   Inf   Inf   Inf
 [2,]    1    0  Inf  Inf  Inf  Inf  Inf  Inf  Inf   Inf   Inf   Inf
 [3,]    2    2    0    1  Inf    1  Inf  Inf  Inf   Inf   Inf   Inf
 [4,]    1    1    1    0  Inf    2  Inf  Inf  Inf   Inf   Inf   Inf
 [5,]    3    2    1    2    0    1    1    1    2   Inf   Inf   Inf
 [6,]    3    3    1    2  Inf    0  Inf  Inf  Inf   Inf   Inf   Inf
 [7,]    4    3    2    3    1    2    0    2    3   Inf   Inf   Inf
 [8,]    2    1  Inf  Inf  Inf  Inf  Inf    0    1   Inf   Inf   Inf
 [9,]    2    1  Inf  Inf  Inf  Inf  Inf    1    0   Inf   Inf   Inf
[10,]    3    3    1    2  Inf    1  Inf  Inf  Inf     0     1     2
[11,]    3    3    1    2  Inf    2  Inf  Inf  Inf     1     0     1
[12,]    3    3    1    2  Inf    1  Inf  Inf  Inf     1     1     0</code></pre>
</div>
</div>
<p>This is better but introduces a problem. The directed graph is not <strong>strongly connected</strong>, so it means that some nodes cannot reach other ones via a directed path of <em>any</em> length. That means that the <strong>geodesic distances</strong> from a node to an unreachable node is coded as “infinite” (Inf). The problem with infinity is that it gets in the way of calculatinng sums of distances, a requirement for the closeness centrality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>   S <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb40-2"><a href="#cb40-2"></a>   <span class="fu">rowSums</span>(S)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf</code></pre>
</div>
</div>
<p>Adding infinity to a number just returns infinity so all the rows with at least one “Inf” in the distance matrix get an Inf for the row sum. In this case that’s all of them. A bummer.</p>
<section id="harmonic-centrality" class="level3">
<h3 class="anchored" data-anchor-id="harmonic-centrality">Harmonic Centrality</h3>
<p>But dont’ worry there’s a <a href="https://olizardo.github.io/networks-textbook/lesson-sna-closeness.html#houston-we-have-a-problem">patch</a>. It is called the <strong>harmonic centrality</strong>, a kind of closeness centrality that works whether you are working with connected or disconnected graphs (or in the case of directed graphs regardless of whether the graph is strongly or weakly connected), and therefore regardless of whether the geodesic distance matrix contains Infs. The main difference is that instead of calculating the inverse of the sum of the distances for each node, we calculate the <em>sum of the inverses</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>   S <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb42-2"><a href="#cb42-2"></a>   S <span class="ot">=</span> <span class="fu">round</span>(<span class="dv">1</span><span class="sc">/</span>S, <span class="dv">2</span>)</span>
<span id="cb42-3"><a href="#cb42-3"></a>   <span class="fu">diag</span>(S) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>   S</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
 [1,] 0.00 1.00  0.0 0.00    0  0.0    0  0.0 0.00     0     0   0.0
 [2,] 1.00 0.00  0.0 0.00    0  0.0    0  0.0 0.00     0     0   0.0
 [3,] 0.50 0.50  0.0 1.00    0  1.0    0  0.0 0.00     0     0   0.0
 [4,] 1.00 1.00  1.0 0.00    0  0.5    0  0.0 0.00     0     0   0.0
 [5,] 0.33 0.50  1.0 0.50    0  1.0    1  1.0 0.50     0     0   0.0
 [6,] 0.33 0.33  1.0 0.50    0  0.0    0  0.0 0.00     0     0   0.0
 [7,] 0.25 0.33  0.5 0.33    1  0.5    0  0.5 0.33     0     0   0.0
 [8,] 0.50 1.00  0.0 0.00    0  0.0    0  0.0 1.00     0     0   0.0
 [9,] 0.50 1.00  0.0 0.00    0  0.0    0  1.0 0.00     0     0   0.0
[10,] 0.33 0.33  1.0 0.50    0  1.0    0  0.0 0.00     0     1   0.5
[11,] 0.33 0.33  1.0 0.50    0  0.5    0  0.0 0.00     1     0   1.0
[12,] 0.33 0.33  1.0 0.50    0  1.0    0  0.0 0.00     1     1   0.0</code></pre>
</div>
</div>
<p>Note that in this matrix of inverse distances, the closest (adjacent) nodes get the maximum score of one, and nodes farther apart when smaller scores (approaching zero). More importantly, those pesky Infs disappear! Unreachable directed pairs of nodes get the lowest score, corresponding to <span class="math inline">\(1/\infty = 0\)</span>. Turns out the mathematics of infinity weren’t our enemy after all.</p>
<p>Also note that the reachability relation expressed in this matrix is asymmetric: So node 4 and reach node 1 (there is a directed tie from 4 to 1), but node 1 cannot reach 4. This is precisely what we want.</p>
<p>Once we have this matrix of inverse distances, we can then we can compute the harmonic centrality the same way as regular closeness by adding up the row scores for each node and dividing by the number of nodes minus one (to get the average):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>   d.harm <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(S)</span>
<span id="cb44-2"><a href="#cb44-2"></a>   d.harm <span class="ot">&lt;-</span> d.harm<span class="sc">/</span>(<span class="fu">vcount</span>(wg) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb44-3"><a href="#cb44-3"></a>   d.harm <span class="ot">&lt;-</span> <span class="fu">round</span>(d.harm, <span class="dv">2</span>)</span>
<span id="cb44-4"><a href="#cb44-4"></a>   d.harm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.09 0.09 0.27 0.32 0.53 0.20 0.34 0.23 0.23 0.42 0.42 0.47</code></pre>
</div>
</div>
<p>We can see that the highest harmonic closeness centrality node is 5, followed by 12. Here’s a plot of the network highlighting the highest harmonic (closeness) centrality node.</p>
<div class="cell" data-fig-cap-location="margin">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>   col <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"tan2"</span>, <span class="fu">vcount</span>(wg)) <span class="co">#creating node color vector</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>   col[<span class="fu">which</span>(d.harm <span class="sc">==</span> <span class="fu">max</span>(d.harm))] <span class="ot">&lt;-</span> <span class="st">"red"</span> <span class="co">#changing color of max centrality node to red</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> col)</span>
<span id="cb46-4"><a href="#cb46-4"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(wg)), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb46-5"><a href="#cb46-5"></a>   p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="handout2_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Women lawyers advice network with highest closeness centrality node in red</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Of course, <code>igraph</code> has a built in function to calculate the harmonic centrality called (you guessed it) <code>harmonic_centrality</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>   d.harm <span class="ot">&lt;-</span> <span class="fu">harmonic_centrality</span>(wg, <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-2"><a href="#cb47-2"></a>   d.harm <span class="ot">&lt;-</span> <span class="fu">round</span>(d.harm, <span class="dv">2</span>)</span>
<span id="cb47-3"><a href="#cb47-3"></a>   d.harm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.09 0.09 0.27 0.32 0.53 0.20 0.34 0.23 0.23 0.42 0.42 0.47</code></pre>
</div>
</div>
<p>Which gives us the same results.</p>
</section>
</section>
<section id="betweenness" class="level2">
<h2 class="anchored" data-anchor-id="betweenness">Betweenness</h2>
<p>We finally come to betweenness centrality. Recall that the key conceptual distinction between closeness and betweenness according to <span class="citation" data-cites="freeman79">Freeman (<a href="#ref-freeman79" role="doc-biblioref">1979</a>)</span> is that between (pun intended) the capacity to reach others quickly (e.g., via the shortest paths) and the capacity to <em>intermediate</em> among those same paths. High betweenness nodes control the flow of information in the network between other nodes.</p>
<p>This is evident in the way betweenness is calculated. Recall that the betweenness of a node <em>k</em> relative to any pair of nodes <em>i</em> and <em>j</em> in the network is simply:</p>
<p><span class="math display">\[
\frac{\sigma_{i(k)j}}{\sigma_{ij}}
\]</span></p>
<p>Where the denominator of the fraction (<span class="math inline">\(\sigma_{ij}\)</span>) is a count of the <em>total</em> number of shortest paths that start and end with nodes <em>i</em> and <em>j</em> and the numerator of the fraction (<span class="math inline">\(\sigma_{i(k)j}\)</span>) is the subset of those paths that include node <em>k</em> as an <strong>inner node</strong>.</p>
<p>As <span class="citation" data-cites="freeman79">Freeman (<a href="#ref-freeman79" role="doc-biblioref">1979</a>)</span> also notes because this is a ratio, it can range from zero to one, with everything in between. As such the betweenness centrality of a node relative to any two others has an intuitive interpretation as a <em>probability</em>, namely the probability that if you send something from <em>i</em> to <em>j</em> it has to go <em>through</em> <em>k</em>. This probability is 1.0 if <em>k</em> stands in <em>every</em> shortest path between <em>i</em> and <em>j</em> and zero if they stand in none of the shortest paths indirectly connecting <em>i</em> and <em>j</em>.</p>
<p>The betweenness of a given node is just the sum all of these probabilities across every pair of nodes in the graph for each node:</p>
<p><span class="math display">\[
\sum_{i \neq j, i \neq n, j \neq v} \frac{\sigma_{i(k)j}}{\sigma_{ij}}
\]</span></p>
<p>Below we can see a point and line diagram of the undirectd <em>Pulp Fiction</em> network we have been working with.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="handout2_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Pulp Fiction character schene co-appearance network.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>We should expect a character to have high betweenness in this network to the extent that they appear in scenes with characters who themselves don’t appear in any scenes together, thus inter-mediating between different parts of the story. Characters who only appear in one scene with some others (like The Wolf or The Gimp) are likely to be low in betweenness.</p>
<p>Let’s create a top ten table of betweenness for the <em>Pulp Fiction</em> network. We use the <code>igraph</code> function <code>betweenness</code> to calculate the scores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>   pulp.bet <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(g)</span>
<span id="cb49-2"><a href="#cb49-2"></a>   top.<span class="fl">5.</span>bet <span class="ot">&lt;-</span> <span class="fu">sort</span>(pulp.bet, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb49-3"><a href="#cb49-3"></a>   <span class="fu">kbl</span>(<span class="fu">round</span>(top.<span class="fl">5.</span>bet, <span class="dv">2</span>), <span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>),</span>
<span id="cb49-4"><a href="#cb49-4"></a>       <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Character"</span>, <span class="st">"Betweenness"</span>),</span>
<span id="cb49-5"><a href="#cb49-5"></a>       <span class="at">caption =</span> <span class="st">"Top Five Betweenness Characters in Pulp Fiction Network."</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-6"><a href="#cb49-6"></a>   <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>Top Five Betweenness Characters in Pulp Fiction Network.</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Character </th>
   <th style="text-align:left;"> Betweenness </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> BUTCH </td>
   <td style="text-align:left;"> 275.52 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> VINCENT </td>
   <td style="text-align:left;"> 230.19 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> JULES </td>
   <td style="text-align:left;"> 142.11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MIA </td>
   <td style="text-align:left;"> 76.68 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MAYNARD </td>
   <td style="text-align:left;"> 70.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> HONEY BUNNY </td>
   <td style="text-align:left;"> 49.97 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PUMPKIN </td>
   <td style="text-align:left;"> 49.97 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> SPORTSCASTER #1 </td>
   <td style="text-align:left;"> 36.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> BRETT </td>
   <td style="text-align:left;"> 29.85 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PREACHER </td>
   <td style="text-align:left;"> 28.23 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Unsurprisingly, the top four characters are also the highest in betweenness. Somewhat surprisingly, the main antagonist of the story (the pawn shop owner) is also up there. After that we see a steep drop in the bottom five of the top ten.</p>
<p>Now let us examine betweenness centrality in our directed women lawyers advice network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>   w.bet <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(wg)</span>
<span id="cb50-2"><a href="#cb50-2"></a>   w.bet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0.0000000  3.0000000 16.3333333 11.0000000  7.0000000  0.0000000
 [7]  0.0000000  5.0000000  0.0000000  0.3333333  1.0000000  0.3333333</code></pre>
</div>
</div>
<p>Here we see that node 3 is the highest in betweenness, pictured below:</p>
<div class="cell" data-fig-cap-location="margin">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="handout2_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Women’s advice network with highest betweenness centrality node in red</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>This result makes sense. Node 3 intermediates all the connections linking the tightly knit group of nodes on the left side (6, 10, 11, 12) with the rest of the network. Also if nodes 5 and 7 need to pass something along to the rest, they have to use 3 at least half time. Node 4 also needs 3 to reach 6. This result nicely illustrates the difference between closeness and betweenness.</p>
</section>
<section id="edge-betweenness" class="level2">
<h2 class="anchored" data-anchor-id="edge-betweenness">Edge Betweenness</h2>
<p>Edge betweenness is defined in similar fashion as node betweenness:</p>
<p><span class="math display">\[
\sum_{i \neq j} \frac{\sigma_{i(e)j}}{\sigma_{ij}}
\]</span></p>
<p>This tells us that the betweenness of an edge <em>e</em> is the sum of the ratios of the number of times that edge appears in the middle of a shortest path connecting every pair of nodes in the graph <em>i</em> and <em>j</em> divided by the total number of shortest paths linking each pair of nodes.</p>
<p>Like before, this is a probability: Namely, that if you send something–using a shortest path–from any node <em>i</em> to any other node <em>j</em> it has to go through edge <em>e</em>. The resulting scores is the sum of these probabilities across every possible pair.</p>
<p>For this example, we will work with a simplified version of the women lawyers advice network, in which we transform it into an <strong>undirected</strong> graph. We use the <code>igraph</code> function <code>as.undirected</code> for that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>   wg <span class="ot">&lt;-</span> <span class="fu">as.undirected</span>(wg, <span class="at">mode =</span> <span class="st">"collapse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The “collapse” value in the “mode” argument tells <code>igraph</code> to take every edge and transform it into an undirected one, collapsing two mutual edges into a single edge and removing the arrows from the one-sided ones.</p>
<p>The resulting graph looks like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="handout2_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looking at this point and line plot of the women lawyers advice network which edge do you think has the top betweenness? Well no need to figure that out via eyeballing! We can just use the <code>igraph</code> function <code>edge_betweenness</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>   w.ebet <span class="ot">&lt;-</span> <span class="fu">edge_betweenness</span>(wg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then create a table of the top ten edges ordered by betweenness:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>   edges <span class="ot">&lt;-</span> <span class="fu">as_edgelist</span>(wg) <span class="co">#creating an edgelist</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>   etab <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(edges, <span class="at">bet =</span> <span class="fu">round</span>(w.ebet, <span class="dv">2</span>)) <span class="co">#adding bet. scores to edgelist</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>   etab <span class="ot">&lt;-</span> etab[<span class="fu">order</span>(etab<span class="sc">$</span>bet, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ] <span class="co">#ordering by bet.</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>   <span class="fu">kbl</span>(etab[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ], <span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"l"</span>, <span class="st">"c"</span>),</span>
<span id="cb54-5"><a href="#cb54-5"></a>       <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"i"</span>, <span class="st">"j"</span>, <span class="st">"Edge Bet."</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb54-6"><a href="#cb54-6"></a>       <span class="at">caption =</span> <span class="st">"Edges Sorted by Betweenness in the Women Lawyers Advice Network"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-7"><a href="#cb54-7"></a>   <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>Edges Sorted by Betweenness in the Women Lawyers Advice Network</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> i </th>
   <th style="text-align:left;"> j </th>
   <th style="text-align:center;"> Edge Bet. </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:center;"> 19.17 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:left;"> 8 </td>
   <td style="text-align:center;"> 15.83 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:center;"> 13.67 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:left;"> 7 </td>
   <td style="text-align:center;"> 11.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:center;"> 9.17 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:center;"> 8.33 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:left;"> 6 </td>
   <td style="text-align:center;"> 8.17 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 1 </td>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:center;"> 7.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 8 </td>
   <td style="text-align:center;"> 6.50 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 8 </td>
   <td style="text-align:left;"> 9 </td>
   <td style="text-align:center;"> 6.33 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Not surprisingly, the top edges are the ones linking nodes 3 and 4 and nodes 5 and 8.</p>
<p>High betweenness edges are likely to function as <strong>bridges</strong> being the only point of indirect connectivity between most nodes in the social structure. That means that an easy way to disconnect a graph is to remove the bridges <span class="citation" data-cites="girvan_newman02">(<a href="#ref-girvan_newman02" role="doc-biblioref">Girvan and Newman 2002</a>)</span>.</p>
<p>In <code>igraph</code> we can produce an <strong>edge deleted subgraph</strong> of an original graph using the “minus” operator, along with the <code>edge</code> function like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>   del.g <span class="ot">&lt;-</span> wg <span class="sc">-</span> <span class="fu">edge</span>(<span class="st">"3|4"</span>)</span>
<span id="cb55-2"><a href="#cb55-2"></a>   del.g <span class="ot">&lt;-</span> del.g <span class="sc">-</span> <span class="fu">edge</span>(<span class="st">"5|8"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first line creates a new graph object (a subgraph) which equals the original graph minus the edge linking nodes 3 and 4. The second line takes this last subgraph and further deletes the edge linking nodes 5 and 8.</p>
<p>The resulting subgraph, minus the high-betweenness edges, looks like:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="handout2_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Which is indeed disconnected!</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-freeman79" class="csl-entry" role="doc-biblioentry">
Freeman, Linton C. 1979. <span>“Centrality in Social Networks Conceptual Clarification.”</span> <em>Social Networks</em> 1: 215–39.
</div>
<div id="ref-girvan_newman02" class="csl-entry" role="doc-biblioentry">
Girvan, Michelle, and Mark EJ Newman. 2002. <span>“Community Structure in Social and Biological Networks.”</span> <em>Proceedings of the National Academy of Sciences</em> 99 (12): 7821–26.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>