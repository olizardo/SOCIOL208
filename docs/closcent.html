<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOCIOL 208 - Closeness Centrality</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="SOCIOL 208 - Closeness Centrality">
<meta property="og:description" content="The closeness centrality of a node in a graph is defined as the inverse of the sum of the lengths of shortest paths from each node to every other node.">
<meta property="og:site-name" content="SOCIOL 208">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Closeness Centrality</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SOCIOL 208</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">208A</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208A.html" class="sidebar-item-text sidebar-link">208A Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208A-F24.html" class="sidebar-item-text sidebar-link">SOCIOL 208A Reading Schedule (Fall 2024)</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Lecture Notes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic.html" class="sidebar-item-text sidebar-link">Basic Network Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ego.html" class="sidebar-item-text sidebar-link">Analyzing Ego Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eigen.html" class="sidebar-item-text sidebar-link">Matrix Eigendecomposition</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Centrality</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./degcent.html" class="sidebar-item-text sidebar-link">Degree Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./closcent.html" class="sidebar-item-text sidebar-link active">Closeness Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./betcent.html" class="sidebar-item-text sidebar-link">Betwenness Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cube.html" class="sidebar-item-text sidebar-link">The Centrality Cube</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./edgecent.html" class="sidebar-item-text sidebar-link">Edge Centralities</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-centrality.html" class="sidebar-item-text sidebar-link">Centrality in Two-Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Status and Prestige</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pagerank.html" class="sidebar-item-text sidebar-link">PageRank Prestige Scoring</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hits.html" class="sidebar-item-text sidebar-link">Hubs and Authorities</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prestige-ml.html" class="sidebar-item-text sidebar-link">Prestige in Multilayer Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige in Two Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">Equivalence and Similarity</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structequiv.html" class="sidebar-item-text sidebar-link">Role Equivalence and Structural Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./similarity.html" class="sidebar-item-text sidebar-link">Vertex Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./random-walk.html" class="sidebar-item-text sidebar-link">Random Walk Concepts in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./blondel.html" class="sidebar-item-text sidebar-link">Role Similarity Across Graphs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-similarity.html" class="sidebar-item-text sidebar-link">Similarity and Equivalence in Two-Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Communities and Clustering</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./community.html" class="sidebar-item-text sidebar-link">Community Structure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spectral.html" class="sidebar-item-text sidebar-link">Community Detection Using Spectral Clustering</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-community-ca.html" class="sidebar-item-text sidebar-link">Community Detection in Two-Mode Networks Using CA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-spectral.html" class="sidebar-item-text sidebar-link">Spectral Clustering of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ahn.html" class="sidebar-item-text sidebar-link">Assigning Nodes to Multiple Communities</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Two-Mode Networks</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-basic.html" class="sidebar-item-text sidebar-link">Analyzing Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-duality.html" class="sidebar-item-text sidebar-link">The Duality of Persons and Groups</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-ca.html" class="sidebar-item-text sidebar-link">Correspondence Analysis (CA) of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-reflections.html" class="sidebar-item-text sidebar-link">The Method of Reflections in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-fitness.html" class="sidebar-item-text sidebar-link">Fitness and Complexity in Two Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-null.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./backbone.html" class="sidebar-item-text sidebar-link">Extracting the Backbone of Bipartite Projections Using Two-Mode Graph Ensembles</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">Statistical Models</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./swap.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./qap.html" class="sidebar-item-text sidebar-link">Network Regression Using Permutation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm1.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm2.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models II</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">Data Management</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loading.html" class="sidebar-item-text sidebar-link">Loading Network Data from a File</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./network-lists.html" class="sidebar-item-text sidebar-link">Handling Graph Objects in Lists</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subgraph-select.html" class="sidebar-item-text sidebar-link">Selecting a Subgraph Based on Edge Conditions</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">208B</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208B.html" class="sidebar-item-text sidebar-link">208B Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208B-S24.html" class="sidebar-item-text sidebar-link">SOCIOL 208B Reading Schedule (Spring 2024)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#normalized-closeness" id="toc-normalized-closeness" class="nav-link active" data-scroll-target="#normalized-closeness">Normalized Closeness</a></li>
  <li><a href="#computing-the-geodesic-distance-matrix" id="toc-computing-the-geodesic-distance-matrix" class="nav-link" data-scroll-target="#computing-the-geodesic-distance-matrix">Computing the Geodesic Distance Matrix</a></li>
  <li><a href="#closeness-centrality-in-directed-graphs" id="toc-closeness-centrality-in-directed-graphs" class="nav-link" data-scroll-target="#closeness-centrality-in-directed-graphs">Closeness Centrality in Directed Graphs</a>
  <ul class="collapse">
  <li><a href="#harmonic-centrality" id="toc-harmonic-centrality" class="nav-link" data-scroll-target="#harmonic-centrality">Harmonic Centrality</a></li>
  </ul></li>
  <li><a href="#generalized-harmonic-centrality" id="toc-generalized-harmonic-centrality" class="nav-link" data-scroll-target="#generalized-harmonic-centrality">Generalized Harmonic Centrality</a></li>
  <li><a href="#computing-the-geodesic-distance-matrix-1" id="toc-computing-the-geodesic-distance-matrix-1" class="nav-link" data-scroll-target="#computing-the-geodesic-distance-matrix-1">Computing the Geodesic Distance Matrix</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/olizardo/SOCIOL208/blob/main/closcent.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Closeness Centrality</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The <strong>closeness centrality</strong> of a node in a graph is defined as the inverse of the sum of the <em>lengths</em> of shortest paths from each node to every other node. That means that to compute it, we first need to calculate the <strong>geodesic distance matrix</strong> (<span class="math inline">\(\mathbf{G}\)</span>). This is matrix in which each entry <span class="math inline">\(g_{ij}\)</span> records the <em>length</em> of the shortest path(s) between row node <span class="math inline">\(i\)</span> and column node <span class="math inline">\(j\)</span>. Then, we sum the rows (or columns) of this symmetric matrix and then we obtain the inverse to get the closeness of each node:</p>
<p><span class="math display">\[
C^{CLO}_i = \left[\sum_{j \neq i}g_{ij}\right]^{-1}
\]</span></p>
<p>Let’s see how this works. We first load our trusty <em>Pulp Fiction</em> data set from the <code>networkdata</code> package, which is an <strong>undirected</strong> graph of character scene co-appearances in the film:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>    <span class="fu">library</span>(networkdata)</span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="fu">library</span>(igraph)</span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="fu">library</span>(stringr) <span class="co">#using stringr to change names from all caps to title case</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>    g <span class="ot">&lt;-</span> movie_559</span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="fu">V</span>(g)<span class="sc">$</span>name <span class="ot">&lt;-</span> <span class="fu">str_to_title</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name)</span>
<span id="cb1-6"><a href="#cb1-6"></a>    <span class="fu">V</span>(g)<span class="sc">$</span>name[<span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name <span class="sc">==</span> <span class="st">"Esmarelda"</span>)] <span class="ot">&lt;-</span> <span class="st">"Esmeralda"</span> <span class="co">#fixing misspelled name</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>    <span class="fu">E</span>(g)<span class="sc">$</span>weight <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co">#setting edge weights to 1.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us extract the geodesic distance matrix of the graph using the <code>distances</code> function in <code>igraph</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>   G <span class="ot">&lt;-</span> <span class="fu">distances</span>(g) <span class="co">#geodesic distance matrix</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>   G[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Brett Buddy Butch Capt Koons Ed Sullivan English Dave Esmeralda
Brett            0     2     1          2           2            2         2
Buddy            2     0     2          2           2            2         3
Butch            1     2     0          1           2            1         1
Capt Koons       2     2     1          0           2            2         2
Ed Sullivan      2     2     2          2           0            2         3
English Dave     2     2     1          2           2            0         2
Esmeralda        2     3     1          2           3            2         0
Fabienne         1     3     1          2           3            2         2
Fourth Man       2     2     2          2           2            2         3
Gawker #2        2     3     1          2           3            2         2
             Fabienne Fourth Man Gawker #2
Brett               1          2         2
Buddy               3          2         3
Butch               1          2         1
Capt Koons          2          2         2
Ed Sullivan         3          2         3
English Dave        2          2         2
Esmeralda           2          3         2
Fabienne            0          2         2
Fourth Man          2          0         3
Gawker #2           2          3         0</code></pre>
</div>
</div>
<p>Then we compute the closeness of each node like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>   close1 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(G)<span class="sc">^-</span><span class="dv">1</span> <span class="co">#inverse of the row sums of G</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>   <span class="fu">round</span>(close1, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Brett           Buddy           Butch      Capt Koons     Ed Sullivan 
         0.0137          0.0115          0.0167          0.0133          0.0115 
   English Dave       Esmeralda        Fabienne      Fourth Man       Gawker #2 
         0.0132          0.0104          0.0122          0.0116          0.0106 
    Honey Bunny          Jimmie            Jody           Jules           Lance 
         0.0130          0.0118          0.0118          0.0164          0.0118 
        Manager       Marsellus          Marvin         Maynard             Mia 
         0.0125          0.0143          0.0135          0.0109          0.0145 
         Mother          Patron      Pedestrian        Preacher         Pumpkin 
         0.0133          0.0125          0.0106          0.0116          0.0130 
         Raquel           Roger Sportscaster #1 Sportscaster #2        The Gimp 
         0.0118          0.0135          0.0106          0.0077          0.0079 
       The Wolf         Vincent        Waitress         Winston           Woman 
         0.0118          0.0192          0.0091          0.0118          0.0133 
      Young Man     Young Woman             Zed 
         0.0091          0.0091          0.0079 </code></pre>
</div>
</div>
<p>Of course, we could have just used the available function in <code>igraph</code> and computed the closeness centrality directly from the graph object using the function <code>closeness</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>   close2 <span class="ot">&lt;-</span> <span class="fu">closeness</span>(g)</span>
<span id="cb6-2"><a href="#cb6-2"></a>   <span class="fu">round</span>(close2, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Brett           Buddy           Butch      Capt Koons     Ed Sullivan 
         0.0137          0.0115          0.0167          0.0133          0.0115 
   English Dave       Esmeralda        Fabienne      Fourth Man       Gawker #2 
         0.0132          0.0104          0.0122          0.0116          0.0106 
    Honey Bunny          Jimmie            Jody           Jules           Lance 
         0.0130          0.0118          0.0118          0.0164          0.0118 
        Manager       Marsellus          Marvin         Maynard             Mia 
         0.0125          0.0143          0.0135          0.0109          0.0145 
         Mother          Patron      Pedestrian        Preacher         Pumpkin 
         0.0133          0.0125          0.0106          0.0116          0.0130 
         Raquel           Roger Sportscaster #1 Sportscaster #2        The Gimp 
         0.0118          0.0135          0.0106          0.0077          0.0079 
       The Wolf         Vincent        Waitress         Winston           Woman 
         0.0118          0.0192          0.0091          0.0118          0.0133 
      Young Man     Young Woman             Zed 
         0.0091          0.0091          0.0079 </code></pre>
</div>
</div>
<p>Once we have the closeness centrality values, we are naturally interested in who are the top nodes. The following code creates a table listing the top ten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>   <span class="fu">library</span>(kableExtra)</span>
<span id="cb8-2"><a href="#cb8-2"></a>   close2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(close2, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-3"><a href="#cb8-3"></a>   close2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(close2[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb8-4"><a href="#cb8-4"></a>   <span class="fu">kbl</span>(close2, <span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>),</span>
<span id="cb8-5"><a href="#cb8-5"></a>       <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Character"</span>, <span class="st">"Closeness"</span>), <span class="at">digits =</span> <span class="dv">4</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>       <span class="at">caption =</span> <span class="st">"Top Ten Closeness Characters in Pulp Fiction Network."</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7"></a>   <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>Top Ten Closeness Characters in Pulp Fiction Network.</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Character </th>
   <th style="text-align:left;"> Closeness </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Vincent </td>
   <td style="text-align:left;"> 0.0192 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Butch </td>
   <td style="text-align:left;"> 0.0167 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Jules </td>
   <td style="text-align:left;"> 0.0164 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mia </td>
   <td style="text-align:left;"> 0.0145 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Marsellus </td>
   <td style="text-align:left;"> 0.0143 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brett </td>
   <td style="text-align:left;"> 0.0137 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Marvin </td>
   <td style="text-align:left;"> 0.0135 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Roger </td>
   <td style="text-align:left;"> 0.0135 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Capt Koons </td>
   <td style="text-align:left;"> 0.0133 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mother </td>
   <td style="text-align:left;"> 0.0133 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>It makes sense that the three main characters are also the ones that are at closest distances from everyone else!</p>
<section id="normalized-closeness" class="level2">
<h2 class="anchored" data-anchor-id="normalized-closeness">Normalized Closeness</h2>
<p>We can also compute the <strong>normalized closeness centrality</strong> which is given by:</p>
<p><span class="math display">\[
C^{NCLO}_i = \frac{N-1}{\sum_{j \neq i}g_{ij}}
\]</span></p>
<p>Where <span class="math inline">\(N\)</span> is the number of nodes in the network. The normalized closeness is just the inverse of the <em>average</em> distance of node <span class="math inline">\(i\)</span> to the other nodes in the network.</p>
<p>In <code>R</code> this is just:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>   close3 <span class="ot">&lt;-</span> (<span class="fu">vcount</span>(g) <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">/</span>(<span class="fu">rowSums</span>(G))</span>
<span id="cb9-2"><a href="#cb9-2"></a>   <span class="fu">round</span>(close3, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Brett           Buddy           Butch      Capt Koons     Ed Sullivan 
         0.5068          0.4253          0.6167          0.4933          0.4253 
   English Dave       Esmeralda        Fabienne      Fourth Man       Gawker #2 
         0.4868          0.3854          0.4512          0.4302          0.3936 
    Honey Bunny          Jimmie            Jody           Jules           Lance 
         0.4805          0.4353          0.4353          0.6066          0.4353 
        Manager       Marsellus          Marvin         Maynard             Mia 
         0.4625          0.5286          0.5000          0.4022          0.5362 
         Mother          Patron      Pedestrian        Preacher         Pumpkin 
         0.4933          0.4625          0.3936          0.4302          0.4805 
         Raquel           Roger Sportscaster #1 Sportscaster #2        The Gimp 
         0.4353          0.5000          0.3936          0.2846          0.2913 
       The Wolf         Vincent        Waitress         Winston           Woman 
         0.4353          0.7115          0.3364          0.4353          0.4933 
      Young Man     Young Woman             Zed 
         0.3364          0.3364          0.2913 </code></pre>
</div>
</div>
<p>Which gives us the same result as using the <code>igraph</code> function with the argument <code>normalized</code> set to <code>TRUE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>   close3 <span class="ot">&lt;-</span> <span class="fu">closeness</span>(g, <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a>   <span class="fu">round</span>(close3, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Brett           Buddy           Butch      Capt Koons     Ed Sullivan 
         0.5068          0.4253          0.6167          0.4933          0.4253 
   English Dave       Esmeralda        Fabienne      Fourth Man       Gawker #2 
         0.4868          0.3854          0.4512          0.4302          0.3936 
    Honey Bunny          Jimmie            Jody           Jules           Lance 
         0.4805          0.4353          0.4353          0.6066          0.4353 
        Manager       Marsellus          Marvin         Maynard             Mia 
         0.4625          0.5286          0.5000          0.4022          0.5362 
         Mother          Patron      Pedestrian        Preacher         Pumpkin 
         0.4933          0.4625          0.3936          0.4302          0.4805 
         Raquel           Roger Sportscaster #1 Sportscaster #2        The Gimp 
         0.4353          0.5000          0.3936          0.2846          0.2913 
       The Wolf         Vincent        Waitress         Winston           Woman 
         0.4353          0.7115          0.3364          0.4353          0.4933 
      Young Man     Young Woman             Zed 
         0.3364          0.3364          0.2913 </code></pre>
</div>
</div>
</section>
<section id="computing-the-geodesic-distance-matrix" class="level2">
<h2 class="anchored" data-anchor-id="computing-the-geodesic-distance-matrix">Computing the Geodesic Distance Matrix</h2>
<p>As noted by <span class="citation" data-cites="fouss_etal16">Fouss, Saerens, and Shimbo (<a href="#ref-fouss_etal16" role="doc-biblioref">2016, 56</a>, Algorithm 1.2)</span> the geodesic distance matrix returned by the <code>distances</code> function in <code>igraph</code> can be computed by a relatively simple algorithm, a version of which goes like this.</p>
<p>First we define a “cost matrix” <span class="math inline">\(\mathbf{C}\)</span> with entries <span class="math inline">\(c_{ij} = 1\)</span> if nodes <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> are adjacent in the graph and <span class="math inline">\(g_{ij} = \infty\)</span> if they are not (if <span class="math inline">\(i = j\)</span> then <span class="math inline">\(c_{ij} = 0\)</span>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>   C <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>((g))) <span class="co">#cost matrix</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>   <span class="fu">diag</span>(C) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>   C[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Brett Buddy Butch Capt Koons Ed Sullivan English Dave Esmeralda
Brett            0   Inf     1        Inf         Inf          Inf       Inf
Buddy          Inf     0   Inf        Inf         Inf          Inf       Inf
Butch            1   Inf     0          1         Inf            1         1
Capt Koons     Inf   Inf     1          0         Inf          Inf       Inf
Ed Sullivan    Inf   Inf   Inf        Inf           0          Inf       Inf
English Dave   Inf   Inf     1        Inf         Inf            0       Inf
Esmeralda      Inf   Inf     1        Inf         Inf          Inf         0
Fabienne         1   Inf     1        Inf         Inf          Inf       Inf
Fourth Man     Inf   Inf   Inf        Inf         Inf          Inf       Inf
Gawker #2      Inf   Inf     1        Inf         Inf          Inf       Inf
             Fabienne Fourth Man Gawker #2
Brett               1        Inf       Inf
Buddy             Inf        Inf       Inf
Butch               1        Inf         1
Capt Koons        Inf        Inf       Inf
Ed Sullivan       Inf        Inf       Inf
English Dave      Inf        Inf       Inf
Esmeralda         Inf        Inf       Inf
Fabienne            0        Inf       Inf
Fourth Man        Inf          0       Inf
Gawker #2         Inf        Inf         0</code></pre>
</div>
</div>
<p>Now, we loop through each node pair in the graph <span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span>, substituting the entries in the <span class="math inline">\(\mathbf{C}\)</span> matrix with the following expression at each iteration <span class="math inline">\(k\)</span>:</p>
<p><span class="math display">\[
c^{(k)}_{ij} = min\left[c^{(k-1)}_{ij}, \left(c^{(k-1)}_{ik} + c^{(k-1)}_{kj}\right)\right]
\]</span></p>
<p>We stop once none of the entries in <span class="math inline">\(\mathbf{C}\)</span> are equal to <code>Inf</code> (in the case of a connected undirected graph).</p>
<p>Here’s a little <code>R</code> program that implements this idea:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>   n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(C)</span>
<span id="cb15-2"><a href="#cb15-2"></a>   <span class="cf">while</span> (<span class="fu">sum</span>(C[<span class="fu">upper.tri</span>(C)]) <span class="sc">==</span> <span class="cn">Inf</span>) {</span>
<span id="cb15-3"><a href="#cb15-3"></a>      <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb15-4"><a href="#cb15-4"></a>         <span class="cf">for</span> (j <span class="cf">in</span> i<span class="sc">:</span>n) { <span class="co">#looping through upper triangle</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>            <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb15-6"><a href="#cb15-6"></a>               C[i,j] <span class="ot">&lt;-</span> <span class="fu">min</span>(C[i,j], (C[i, k] <span class="sc">+</span> C[k, j]))</span>
<span id="cb15-7"><a href="#cb15-7"></a>               }</span>
<span id="cb15-8"><a href="#cb15-8"></a>            }</span>
<span id="cb15-9"><a href="#cb15-9"></a>         }</span>
<span id="cb15-10"><a href="#cb15-10"></a>      }</span>
<span id="cb15-11"><a href="#cb15-11"></a>   C[<span class="fu">lower.tri</span>(C)] <span class="ot">&lt;-</span> <span class="fu">t</span>(C)[<span class="fu">lower.tri</span>(C)] <span class="co">#copying upper triangle into lower triangle</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And as we can see the entries in <code>C</code> are the same as those returned by <code>distances</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>   C[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Brett Buddy Butch Capt Koons Ed Sullivan English Dave Esmeralda
Brett            0     2     1          2           2            2         2
Buddy            2     0     2          2           2            2         3
Butch            1     2     0          1           2            1         1
Capt Koons       2     2     1          0           2            2         2
Ed Sullivan      2     2     2          2           0            2         4
English Dave     2     2     1          2           2            0         2
Esmeralda        2     3     1          2           4            2         0
Fabienne         1     3     1          2           3            2         2
Fourth Man       2     2     2          2           2            2         3
Gawker #2        2     3     1          2           3            2         2
             Fabienne Fourth Man Gawker #2
Brett               1          2         2
Buddy               3          2         3
Butch               1          2         1
Capt Koons          2          2         2
Ed Sullivan         3          2         3
English Dave        2          2         2
Esmeralda           2          3         2
Fabienne            0          2         2
Fourth Man          2          0         3
Gawker #2           2          3         0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>   <span class="fu">distances</span>(g)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Brett Buddy Butch Capt Koons Ed Sullivan English Dave Esmeralda
Brett            0     2     1          2           2            2         2
Buddy            2     0     2          2           2            2         3
Butch            1     2     0          1           2            1         1
Capt Koons       2     2     1          0           2            2         2
Ed Sullivan      2     2     2          2           0            2         3
English Dave     2     2     1          2           2            0         2
Esmeralda        2     3     1          2           3            2         0
Fabienne         1     3     1          2           3            2         2
Fourth Man       2     2     2          2           2            2         3
Gawker #2        2     3     1          2           3            2         2
             Fabienne Fourth Man Gawker #2
Brett               1          2         2
Buddy               3          2         3
Butch               1          2         1
Capt Koons          2          2         2
Ed Sullivan         3          2         3
English Dave        2          2         2
Esmeralda           2          3         2
Fabienne            0          2         2
Fourth Man          2          0         3
Gawker #2           2          3         0</code></pre>
</div>
</div>
</section>
<section id="closeness-centrality-in-directed-graphs" class="level2">
<h2 class="anchored" data-anchor-id="closeness-centrality-in-directed-graphs">Closeness Centrality in Directed Graphs</h2>
<p>What about closeness centrality for a directed network? Let us see how this works using a <strong>subgraph</strong> of the <span class="citation" data-cites="lazega01">Lazega (<a href="#ref-lazega01" role="doc-biblioref">2001</a>)</span> <code>law_advice</code> network, this time selecting just women under the age of forty:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>    g <span class="ot">&lt;-</span> law_advice</span>
<span id="cb20-2"><a href="#cb20-2"></a>    women <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(g)<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">2</span>) <span class="co">#selecting women</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>    wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, women)</span>
<span id="cb20-4"><a href="#cb20-4"></a>    young <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(wg)<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">40</span>) <span class="co">#selecting women under forty</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>    wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(wg, young)</span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="fu">V</span>(wg)<span class="sc">$</span>name <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(wg) <span class="co">#naming nodes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This network is small enough that a plot could be informative about its structure. Let us plot it using the package <code>ggraph</code>, a visualization package that follows the same principles as the <code>ggplot</code> grammar of graphics but for network graphs (see <a href="https://exts.ggplot2.tidyverse.org/ggraph.html">here</a>).</p>
<div class="cell" data-fig-cap-location="margin">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>   <span class="co">#install.packages("ggraph")</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>   <span class="fu">library</span>(ggraph)</span>
<span id="cb21-3"><a href="#cb21-3"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(wg, <span class="at">layout =</span> <span class="st">'auto'</span>)</span>
<span id="cb21-4"><a href="#cb21-4"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_edge_parallel</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">edge_width =</span> <span class="fl">0.5</span>,</span>
<span id="cb21-5"><a href="#cb21-5"></a>                                <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">2.5</span>, <span class="st">'mm'</span>)),</span>
<span id="cb21-6"><a href="#cb21-6"></a>                                <span class="at">end_cap =</span> <span class="fu">circle</span>(<span class="dv">4</span>, <span class="st">'mm'</span>), </span>
<span id="cb21-7"><a href="#cb21-7"></a>                                <span class="at">sep =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">'mm'</span>))</span>
<span id="cb21-8"><a href="#cb21-8"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"tan2"</span>) </span>
<span id="cb21-9"><a href="#cb21-9"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(wg)), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb21-10"><a href="#cb21-10"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_graph</span>() </span>
<span id="cb21-11"><a href="#cb21-11"></a>    p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="closcent_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Women lawyers advice network</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Now a question we might ask is who has the greatest closeness centrality in this advice network. We could proceed as usual and compute the geodesic distances between actors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>   G <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg)</span>
<span id="cb22-2"><a href="#cb22-2"></a>   G</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   1 2 3 4 5 6 7 8 9 10 11 12
1  0 1 2 1 3 3 4 2 2  3  3  3
2  1 0 2 1 2 3 3 1 1  3  3  3
3  2 2 0 1 1 1 2 2 3  1  1  1
4  1 1 1 0 2 2 3 2 2  2  2  2
5  3 2 1 2 0 1 1 1 2  2  2  2
6  3 3 1 2 1 0 2 2 3  1  2  1
7  4 3 2 3 1 2 0 2 3  3  3  3
8  2 1 2 2 1 2 2 0 1  3  3  3
9  2 1 3 2 2 3 3 1 0  4  4  4
10 3 3 1 2 2 1 3 3 4  0  1  1
11 3 3 1 2 2 2 3 3 4  1  0  1
12 3 3 1 2 2 1 3 3 4  1  1  0</code></pre>
</div>
</div>
<p>Note that this is not quite right. In <code>igraph</code> the default settings of the distance function treats the graph as undirected even though it is actually directed. So it doesn’t use the strict <strong>directed paths</strong>, but it just treats them all as <strong>semi-paths</strong> ignoring direction. That is why, for instance, it counts node 1 as being “adjacent” to node 4 even though there is only one incoming link from 4 to 1 and why the whole matrix is symmetric, when we know from just eyeballing the network that there is a lot of asymmetry in terms of who can reach who via directed paths.</p>
<p>To get the actual directed distance matrix, we need to specify the “mode” option, asking whether we want in or out paths. Here, we follow convention and select the out-paths:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>   G <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb24-2"><a href="#cb24-2"></a>   G</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   1 2   3   4   5   6   7   8   9  10  11  12
1  0 1 Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf
2  1 0 Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf
3  2 2   0   1 Inf   1 Inf Inf Inf Inf Inf Inf
4  1 1   1   0 Inf   2 Inf Inf Inf Inf Inf Inf
5  3 2   1   2   0   1   1   1   2 Inf Inf Inf
6  3 3   1   2 Inf   0 Inf Inf Inf Inf Inf Inf
7  4 3   2   3   1   2   0   2   3 Inf Inf Inf
8  2 1 Inf Inf Inf Inf Inf   0   1 Inf Inf Inf
9  2 1 Inf Inf Inf Inf Inf   1   0 Inf Inf Inf
10 3 3   1   2 Inf   1 Inf Inf Inf   0   1   2
11 3 3   1   2 Inf   2 Inf Inf Inf   1   0   1
12 3 3   1   2 Inf   1 Inf Inf Inf   1   1   0</code></pre>
</div>
</div>
<p>This is better but introduces a problem. The directed graph is not <strong>strongly connected</strong>, so it means that some nodes cannot reach other ones via a directed path of <em>any</em> length. That means that the <strong>geodesic distances</strong> from a node to an unreachable node is coded as “infinite” (<code>Inf</code>). The problem with infinity is that it gets in the way of calculating sums of distances, a requirement for the closeness centrality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>   G <span class="ot">&lt;-</span> <span class="fu">distances</span>(wg, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a>   <span class="fu">rowSums</span>(G)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  1   2   3   4   5   6   7   8   9  10  11  12 
Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf </code></pre>
</div>
</div>
<p>Adding infinity to a number just returns infinity so all the rows with at least one <code>Inf</code> in the distance matrix get an <code>Inf</code> for the row sum. In this case that’s all of them. A bummer.</p>
<section id="harmonic-centrality" class="level3">
<h3 class="anchored" data-anchor-id="harmonic-centrality">Harmonic Centrality</h3>
<p>But dont’ worry there’s a patch. It is called the <strong>harmonic centrality</strong> <span class="citation" data-cites="rochat09">(<a href="#ref-rochat09" role="doc-biblioref">Rochat 2009</a>)</span>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> This is a variation on the closeness centrality that works whether you are working with connected or disconnected graphs (or in the case of directed graphs regardless of whether the graph is strongly or weakly connected), and therefore regardless of whether the geodesic distance matrix contains <code>Inf</code>s.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>The main difference between the harmonic and regular closeness centrality is that instead of calculating the inverse of the sum of the distances for each node, we calculate the <em>sum of the inverses</em>:</p>
<p><span class="math display">\[
C^{HC}_i = \sum_{j \neq i}(g_{ij})^{-1}
\]</span></p>
<p>And the normalized version:</p>
<p><span class="math display">\[
C^{NHC}_i = \frac{\sum_{j \neq i}(g_{ij})^{-1}}{N-1}
\]</span></p>
<p>In <code>R</code> we can do this as follows. First, let’s compute the inverse of the entries of the geodesic distance matrix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>   inv.G <span class="ot">=</span> G<span class="sc">^-</span><span class="dv">1</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>   <span class="fu">diag</span>(inv.G) <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co">#setting diagonals to zero</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>   <span class="fu">round</span>(inv.G, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       1     2   3     4 5   6 7   8     9 10 11  12
1  0.000 1.000 0.0 0.000 0 0.0 0 0.0 0.000  0  0 0.0
2  1.000 0.000 0.0 0.000 0 0.0 0 0.0 0.000  0  0 0.0
3  0.500 0.500 0.0 1.000 0 1.0 0 0.0 0.000  0  0 0.0
4  1.000 1.000 1.0 0.000 0 0.5 0 0.0 0.000  0  0 0.0
5  0.333 0.500 1.0 0.500 0 1.0 1 1.0 0.500  0  0 0.0
6  0.333 0.333 1.0 0.500 0 0.0 0 0.0 0.000  0  0 0.0
7  0.250 0.333 0.5 0.333 1 0.5 0 0.5 0.333  0  0 0.0
8  0.500 1.000 0.0 0.000 0 0.0 0 0.0 1.000  0  0 0.0
9  0.500 1.000 0.0 0.000 0 0.0 0 1.0 0.000  0  0 0.0
10 0.333 0.333 1.0 0.500 0 1.0 0 0.0 0.000  0  1 0.5
11 0.333 0.333 1.0 0.500 0 0.5 0 0.0 0.000  1  0 1.0
12 0.333 0.333 1.0 0.500 0 1.0 0 0.0 0.000  1  1 0.0</code></pre>
</div>
</div>
<p>Note that in this matrix of inverse distances, the closest (adjacent) nodes get the maximum score of one, and nodes farther apart when smaller scores (approaching zero). More importantly, those pesky <code>Inf</code>s disappear (!) because unreachable directed pairs of nodes get the lowest score, corresponding to <span class="math inline">\(1/\infty = 0\)</span>. Turns out the mathematics of infinity weren’t our enemy after all.</p>
<p>Also note that the reachability relation expressed in this matrix is asymmetric: So node 4 can reach node 1 (there is a directed tie from 4 to 1), but node 1 cannot reach 4. This is precisely what we want.</p>
<p>Once we have this matrix of inverse distances, we can then we can compute the normalized harmonic centrality the same way as regular closeness by adding up the row scores for each node and dividing by the number of nodes minus one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>   close4 <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(inv.G)<span class="sc">/</span>(<span class="fu">vcount</span>(wg) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a>   <span class="fu">round</span>(close4, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1      2      3      4      5      6      7      8      9     10     11 
0.0909 0.0909 0.2727 0.3182 0.5303 0.1970 0.3409 0.2273 0.2273 0.4242 0.4242 
    12 
0.4697 </code></pre>
</div>
</div>
<p>We can see that the highest harmonic closeness centrality node is 5, followed by 12. Here’s a plot of the network highlighting the highest harmonic centrality node.</p>
<div class="cell" data-fig-cap-location="margin">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>   col <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"tan2"</span>, <span class="fu">vcount</span>(wg)) <span class="co">#creating node color vector</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>   col[<span class="fu">which</span>(close4 <span class="sc">==</span> <span class="fu">max</span>(close4))] <span class="ot">&lt;-</span> <span class="st">"red"</span> <span class="co">#changing color of max centrality node to red</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> col)</span>
<span id="cb32-4"><a href="#cb32-4"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(wg)), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb32-5"><a href="#cb32-5"></a>   p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="closcent_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Women lawyers advice network with highest closeness centrality node in red</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Of course, <code>igraph</code> has a built in function to calculate the harmonic centrality called (you guessed it) <code>harmonic_centrality</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>   close4 <span class="ot">&lt;-</span> <span class="fu">harmonic_centrality</span>(wg, <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-2"><a href="#cb33-2"></a>   <span class="fu">round</span>(close4, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1      2      3      4      5      6      7      8      9     10     11 
0.0909 0.0909 0.2727 0.3182 0.5303 0.1970 0.3409 0.2273 0.2273 0.4242 0.4242 
    12 
0.4697 </code></pre>
</div>
</div>
<p>Which gives us the same results (note we set the argument <code>normalized</code> to <code>TRUE</code> to get the normalized scores).</p>
</section>
</section>
<section id="generalized-harmonic-centrality" class="level2">
<h2 class="anchored" data-anchor-id="generalized-harmonic-centrality">Generalized Harmonic Centrality</h2>
<p><span class="citation" data-cites="agneessens_etal17">Agneessens, Borgatti, and Everett (<a href="#ref-agneessens_etal17" role="doc-biblioref">2017</a>)</span> propose a “generalized” version of the harmonic centrality that yields plain old degree centrality and the regular harmonic centrality as special cases. The key is to introduce a parameter <span class="math inline">\(\delta\)</span> governing how much weight we give to shortest paths based on distance. Let’s see how this works.</p>
<p>Recall that (the normalized version of) the harmonic centrality we defined earlier is given by:</p>
<p><span class="math display">\[
C^{NHC}_i = \frac{\sum_{j \neq i}(g_{ij})^{-1}}{N-1}
\]</span></p>
<p>For any node <span class="math inline">\(i\)</span>, where <span class="math inline">\(g_{ij}\)</span> is the geodesic distance between <span class="math inline">\(i\)</span> and every other node in the graph <span class="math inline">\(j\)</span>, which could be “infinite” if there is no path linking them.</p>
<p>Agneessens et al’s tweak is to instead compute:</p>
<p><span class="math display">\[
C^{GHC}_i = \frac{\sum_{j \neq i}(g_{ij})^{-\delta}}{N-1}
\]</span></p>
<p>Where <span class="math inline">\(\delta\)</span> is a free parameter chosen by the researcher with the restriction that <span class="math inline">\(\delta \geq 0\)</span> (if you want to calculate a closeness measure as we will see below).</p>
<p>When <span class="math inline">\(\delta = \infty\)</span> the numerator element <span class="math inline">\(1/(g_{ij})^{\infty} = 1\)</span> only when nodes are adjacent and <span class="math inline">\(g_{ij} = 1\)</span> (because <span class="math inline">\(1^{\infty} = 1\)</span>); otherwise, for <span class="math inline">\(g_{ij} &gt; 1\)</span> then <span class="math inline">\(1/(g_{ij})^{\infty} = 0\)</span>, and therefore the generalized harmonic centrality just becomes a (normalized) version of degree centrality. Alternatively, when <span class="math inline">\(\delta = 1\)</span> we just get the plain old harmonic centrality we defined earlier.</p>
<p>The interesting cases come from <span class="math inline">\(1 &gt; \delta &lt; \infty\)</span> and <span class="math inline">\(0 &gt; \delta &lt; 1\)</span>. In the first case, nodes at shorter distances are weighted more (like in the standard harmonic centrality measure) as <span class="math inline">\(\delta\)</span> becomes bigger and bigger then the generalized harmonic centrality approximates degree. For values below one, as <span class="math inline">\(\delta\)</span> approaches zero, then indirect connections to nodes of greater length are discounted less, and thus count for “more” in defining your generalized harmonic centrality score.</p>
<p>Let us see a real-world example of the generalized harmonic centrality in action:</p>
<p>First, we create a custom function to compute the generalized harmonic centrality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>   g.harm <span class="ot">&lt;-</span> <span class="cf">function</span>(x, d) {</span>
<span id="cb35-2"><a href="#cb35-2"></a>      <span class="fu">library</span>(igraph)</span>
<span id="cb35-3"><a href="#cb35-3"></a>      w <span class="ot">&lt;-</span> <span class="fu">distances</span>(x) <span class="co">#get distances from graph object</span></span>
<span id="cb35-4"><a href="#cb35-4"></a>      w <span class="ot">&lt;-</span> (w<span class="sc">^</span>d)<span class="sc">^-</span><span class="dv">1</span> <span class="co">#matrix of generalized inverse distances</span></span>
<span id="cb35-5"><a href="#cb35-5"></a>      <span class="fu">diag</span>(w) <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co">#set diagonals to zero</span></span>
<span id="cb35-6"><a href="#cb35-6"></a>      h <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(w)<span class="sc">/</span>(<span class="fu">vcount</span>(x) <span class="sc">-</span> <span class="dv">1</span>) <span class="co">#summing and averaging</span></span>
<span id="cb35-7"><a href="#cb35-7"></a>      <span class="fu">return</span>(h)</span>
<span id="cb35-8"><a href="#cb35-8"></a>      }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Second, we compute three versions of the harmonic centrality, with <span class="math inline">\(\delta = 5\)</span>, <span class="math inline">\(\delta = 0.05\)</span>, and <span class="math inline">\(\delta = -5\)</span>, using the full (unrestricted by age) subgraph of the <code>law_advice</code> network composed of the women lawyers at the firm, with relations constrained to be undirected:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>   women <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">V</span>(law_advice)<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb36-2"><a href="#cb36-2"></a>   wg <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(law_advice, women)</span>
<span id="cb36-3"><a href="#cb36-3"></a>   wg <span class="ot">&lt;-</span> <span class="fu">as.undirected</span>(wg)</span>
<span id="cb36-4"><a href="#cb36-4"></a>   close5 <span class="ot">&lt;-</span> <span class="fu">g.harm</span>(wg, <span class="at">d =</span> <span class="dv">5</span>)</span>
<span id="cb36-5"><a href="#cb36-5"></a>   close6 <span class="ot">&lt;-</span> <span class="fu">g.harm</span>(wg, <span class="at">d =</span> <span class="fl">0.05</span>)</span>
<span id="cb36-6"><a href="#cb36-6"></a>   far1 <span class="ot">&lt;-</span> <span class="fu">g.harm</span>(wg, <span class="at">d =</span> <span class="sc">-</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>The first version of the harmonic centrality in line 5, with a positive value of <span class="math inline">\(\delta\)</span> above zero, will compute centrality scores emphasizing <em>direct</em> (one-step) connections, thus coming closer to <strong>degree</strong>.</p></li>
<li><p>The second version, in line 6, with a value of <span class="math inline">\(\delta\)</span> close to zero, will give comparatively more emphasis to <em>indirect</em> connections weighing longer paths almost as much as shorter paths (but always a little less), thus being more similar to <strong>closeness</strong> centrality.</p></li>
<li><p>Finally, the last version, in line 7, with <span class="math inline">\(\delta &lt; 0\)</span>, will weigh <em>longer</em> paths more than shorter ones, serving as a measure of <strong>eccentricity</strong> (farness from others) not closeness.</p></li>
</ul>
<div class="cell" data-fig-cap-location="margin">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="closcent_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Full women lawyers advice network</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Above is a plot of the women lawyers network showing the top node for each of the centralities:</p>
<ul>
<li><p>In red we have node 3 who has the largest degree (<span class="math inline">\(k(3) = 8\)</span>) and thus comes out on top using the generalized harmonic centrality version emphasizing direct connections (<span class="math inline">\(\delta &gt; 1\)</span>).</p></li>
<li><p>Then in blue we have node 9 who can reach the most others via the shortest paths, and thus comes out on top when the generalized harmonic centrality emphasizes indirect connectivity.</p></li>
<li><p>Finally, in purple we have node 12, which is <em>farthest</em> from everyone else, and thus comes out on “top” when longer indirect connections count for more (<span class="math inline">\(\delta &lt; 0)\)</span>.</p></li>
</ul>
<p>As we said earlier, both regular harmonic centrality and degree are special cases of the generalized measure. We can check this by setting <span class="math inline">\(\delta\)</span> to either one or infinity.</p>
<p>When we set <span class="math inline">\(\delta=1\)</span> the generalized harmonic centrality is the same as the normalized harmonic centrality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>   <span class="fu">round</span>(<span class="fu">g.harm</span>(wg, <span class="at">d =</span> <span class="dv">1</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.598 0.534 0.706 0.598 0.657 0.627 0.426 0.539 0.696 0.647 0.667 0.407
[13] 0.588 0.520 0.583 0.603 0.559 0.544</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>   <span class="fu">round</span>(<span class="fu">harmonic_centrality</span>(wg, <span class="at">normalized =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.598 0.534 0.706 0.598 0.657 0.627 0.426 0.539 0.696 0.647 0.667 0.407
[13] 0.588 0.520 0.583 0.603 0.559 0.544</code></pre>
</div>
</div>
<p>When we set <span class="math inline">\(\delta=\infty\)</span> the generalized harmonic centrality is the same as the normalized degree centrality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>   <span class="fu">round</span>(<span class="fu">g.harm</span>(wg, <span class="at">d =</span> <span class="cn">Inf</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.235 0.176 0.471 0.235 0.353 0.294 0.059 0.176 0.412 0.353 0.412 0.059
[13] 0.235 0.176 0.235 0.353 0.235 0.235</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>   <span class="fu">round</span>(<span class="fu">degree</span>(wg, <span class="at">normalized =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.235 0.176 0.471 0.235 0.353 0.294 0.059 0.176 0.412 0.353 0.412 0.059
[13] 0.235 0.176 0.235 0.353 0.235 0.235</code></pre>
</div>
</div>
</section>
<section id="computing-the-geodesic-distance-matrix-1" class="level2">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">Computing the Geodesic Distance Matrix</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-agneessens_etal17" class="csl-entry" role="doc-biblioentry">
Agneessens, Filip, Stephen P Borgatti, and Martin G Everett. 2017. <span>“Geodesic Based Centrality: Unifying the Local and the Global.”</span> <em>Social Networks</em> 49: 12–26.
</div>
<div id="ref-boldi_vigna14" class="csl-entry" role="doc-biblioentry">
Boldi, Paolo, and Sebastiano Vigna. 2014. <span>“Axioms for Centrality.”</span> <em>Internet Mathematics</em> 10 (3-4): 222–62.
</div>
<div id="ref-fouss_etal16" class="csl-entry" role="doc-biblioentry">
Fouss, François, Marco Saerens, and Masashi Shimbo. 2016. <em>Algorithms and Models for Network Data and Link Analysis</em>. Cambridge University Press.
</div>
<div id="ref-lazega01" class="csl-entry" role="doc-biblioentry">
Lazega, Emmanuel. 2001. <em>The Collegial Phenomenon: The Social Mechanisms of Cooperation Among Peers in a Corporate Law Partnership</em>. Oxford University Press.
</div>
<div id="ref-rochat09" class="csl-entry" role="doc-biblioentry">
Rochat, Yannick. 2009. <span>“Closeness Centrality Extended to Unconnected Graphs: The Harmonic Centrality Index.”</span> Switzerland: Institute of Applied Mathematics University of Lausanne. <a href="https://infoscience.epfl.ch/server/api/core/bitstreams/7f3097a0-d7e0-4cd4-a3f3-82673aab1909/content">https://infoscience.epfl.ch/server/api/core/bitstreams/7f3097a0-d7e0-4cd4-a3f3-82673aab1909/content</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><span class="citation" data-cites="agneessens_etal17">Agneessens, Borgatti, and Everett (<a href="#ref-agneessens_etal17" role="doc-biblioref">2017</a>)</span> call the harmonic centrality “reciprocal closeness”<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Some people <span class="citation" data-cites="boldi_vigna14">(<a href="#ref-boldi_vigna14" role="doc-biblioref">Boldi and Vigna 2014</a>)</span> claim that the harmonic centrality is the <em>only</em> centrality measure that could be called by that name from a purely axiomatic mathematical approach, but that’s a different story.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>