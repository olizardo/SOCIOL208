<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOCIOL 208 - Basic Network Statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="SOCIOL 208 - Basic Network Statistics">
<meta property="og:description" content="Here we will analyze a small network and computer some basic statistics of interest. The first thing we need to do is get some data!">
<meta property="og:site-name" content="SOCIOL 208">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Basic Network Statistics</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SOCIOL 208</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">208A</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208A.html" class="sidebar-item-text sidebar-link">208A Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208A-F24.html" class="sidebar-item-text sidebar-link">SOCIOL 208A Reading Schedule (Fall 2024)</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Lecture Notes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic.html" class="sidebar-item-text sidebar-link active">Basic Network Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ego.html" class="sidebar-item-text sidebar-link">Analyzing Ego Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eigen.html" class="sidebar-item-text sidebar-link">Matrix Eigendecomposition</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Centrality and Prestige</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./centrality.html" class="sidebar-item-text sidebar-link">Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cube.html" class="sidebar-item-text sidebar-link">The Centrality Cube</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-centrality.html" class="sidebar-item-text sidebar-link">Centrality in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pagerank.html" class="sidebar-item-text sidebar-link">PageRank Prestige Scoring</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hits.html" class="sidebar-item-text sidebar-link">Hubs and Authorities</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige in Two Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Equivalence and Similarity</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structequiv.html" class="sidebar-item-text sidebar-link">Role Equivalence and Structural Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./similarity.html" class="sidebar-item-text sidebar-link">Vertex Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./random-walk.html" class="sidebar-item-text sidebar-link">Random Walk Concepts in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./blondel.html" class="sidebar-item-text sidebar-link">Role Similarity Across Graphs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-similarity.html" class="sidebar-item-text sidebar-link">Similarity and Equivalence in Two-Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">Communities and Clustering</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./community.html" class="sidebar-item-text sidebar-link">Community Structure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spectral.html" class="sidebar-item-text sidebar-link">Community Detection Using Spectral Clustering</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-community-ca.html" class="sidebar-item-text sidebar-link">Community Detection in Two-Mode Networks Using CA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-spectral.html" class="sidebar-item-text sidebar-link">Spectral Clustering of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ahn.html" class="sidebar-item-text sidebar-link">Assigning Nodes to Multiple Communities</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Two-Mode Networks</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-basic.html" class="sidebar-item-text sidebar-link">Analyzing Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-duality.html" class="sidebar-item-text sidebar-link">The Duality of Persons and Groups</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-ca.html" class="sidebar-item-text sidebar-link">Correspondence Analysis (CA) of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-reflections.html" class="sidebar-item-text sidebar-link">The Method of Reflections and Correspondence Analysis in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-fitness.html" class="sidebar-item-text sidebar-link">Fitness and Complexity in Two Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-null.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./backbone.html" class="sidebar-item-text sidebar-link">Extracting the Backbone of Bipartite Projections Using Two-Mode Graph Ensembles</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Statistical Models</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./swap.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./qap.html" class="sidebar-item-text sidebar-link">Network Regression Using Permutation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm1.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm2.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models II</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">Data Management</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loading.html" class="sidebar-item-text sidebar-link">Loading Network Data from a File</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./network-lists.html" class="sidebar-item-text sidebar-link">Handling Graph Objects in Lists</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subgraph-select.html" class="sidebar-item-text sidebar-link">Selecting a Subgraph Based on Edge Conditions</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">208B</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208B.html" class="sidebar-item-text sidebar-link">208B Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208B-S24.html" class="sidebar-item-text sidebar-link">SOCIOL 208B Reading Schedule (Spring 2024)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link active" data-scroll-target="#loading-data">Loading Data</a></li>
  <li><a href="#number-of-nodes-and-edges" id="toc-number-of-nodes-and-edges" class="nav-link" data-scroll-target="#number-of-nodes-and-edges">Number of Nodes and Edges</a></li>
  <li><a href="#graph-density" id="toc-graph-density" class="nav-link" data-scroll-target="#graph-density">Graph Density</a></li>
  <li><a href="#degree" id="toc-degree" class="nav-link" data-scroll-target="#degree">Degree</a></li>
  <li><a href="#the-degree-distribution-in-undirected-graphs" id="toc-the-degree-distribution-in-undirected-graphs" class="nav-link" data-scroll-target="#the-degree-distribution-in-undirected-graphs">The Degree Distribution in Undirected Graphs</a></li>
  <li><a href="#the-degree-correlation" id="toc-the-degree-correlation" class="nav-link" data-scroll-target="#the-degree-correlation">The Degree Correlation</a></li>
  <li><a href="#the-average-shortest-path-length" id="toc-the-average-shortest-path-length" class="nav-link" data-scroll-target="#the-average-shortest-path-length">The Average Shortest Path Length</a></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together">Putting it all Together</a></li>
  <li><a href="#graph-degree-metrics-in-directed-graphs" id="toc-graph-degree-metrics-in-directed-graphs" class="nav-link" data-scroll-target="#graph-degree-metrics-in-directed-graphs">Graph Degree Metrics in Directed Graphs</a>
  <ul class="collapse">
  <li><a href="#the-indegree-and-outdegree-distributions" id="toc-the-indegree-and-outdegree-distributions" class="nav-link" data-scroll-target="#the-indegree-and-outdegree-distributions">The Indegree and Outdegree Distributions</a></li>
  <li><a href="#the-four-different-flavors-of-degree-correlations-in-the-directed-case" id="toc-the-four-different-flavors-of-degree-correlations-in-the-directed-case" class="nav-link" data-scroll-target="#the-four-different-flavors-of-degree-correlations-in-the-directed-case">The Four Different Flavors of Degree Correlations in the Directed Case</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/olizardo/SOCIOL208/blob/main/basic.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Basic Network Statistics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading Data</h2>
<p>Here we will analyze a small network and computer some basic statistics of interest. The first thing we need to do is get some data! For this purpose, we will use the package <code>networkdata</code> (available <a href="https://schochastics.github.io/networkdata/">here</a>). To install the package, use the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>   <span class="co">#install.packages("remotes") </span></span>
<span id="cb1-2"><a href="#cb1-2"></a>   remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"schochastics/networkdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To load the network datasets in the <code>networkdata</code> just type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>   <span class="fu">library</span>(networkdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The package contains a bunch of human and animal social networks to browse through them, type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>   <span class="fu">data</span>(<span class="at">package =</span> <span class="st">"networkdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will pick one of the movies for this analysis, namely, <em>Pulp Fiction</em>. This is <code>movie_559</code>. In the movie network two characters are linked by an edge if they appear in a scene together. The <code>networkdata</code> data sets come in <code>igraph</code> format, so we need to load that package (or install it using <code>install.packages</code> if you haven’t done that yet).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>   <span class="co">#install.packages("igraph") </span></span>
<span id="cb4-2"><a href="#cb4-2"></a>   <span class="fu">library</span>(igraph)</span>
<span id="cb4-3"><a href="#cb4-3"></a>   g <span class="ot">&lt;-</span> movie_559</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="number-of-nodes-and-edges" class="level2">
<h2 class="anchored" data-anchor-id="number-of-nodes-and-edges">Number of Nodes and Edges</h2>
<p>Now we are ready to compute some <strong>basic network statistics</strong>. As with any network, we want to know what the number of <em>nodes</em> and the number of <em>edges</em> (links) are. Since this is a relatively small network, we can begin by listing the actors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>   <span class="fu">V</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 38/38 vertices, named, from 9e7cc7a:
 [1] BRETT           BUDDY           BUTCH           CAPT KOONS     
 [5] ED SULLIVAN     ENGLISH DAVE    ESMARELDA       FABIENNE       
 [9] FOURTH MAN      GAWKER #2       HONEY BUNNY     JIMMIE         
[13] JODY            JULES           LANCE           MANAGER        
[17] MARSELLUS       MARVIN          MAYNARD         MIA            
[21] MOTHER          PATRON          PEDESTRIAN      PREACHER       
[25] PUMPKIN         RAQUEL          ROGER           SPORTSCASTER #1
[29] SPORTSCASTER #2 THE GIMP        THE WOLF        VINCENT        
[33] WAITRESS        WINSTON         WOMAN           YOUNG MAN      
[37] YOUNG WOMAN     ZED            </code></pre>
</div>
</div>
<p>The function <code>V</code> takes the <code>igraph</code> network object as input and returns an <code>igraph.vs</code> object as output (short for “igraph vertex sequence”), listing the names (if given as a graph attribute) of each node. The first line also tells us that there are 38 nodes in this network.</p>
<p>The <code>igraph.vs</code> object operates much like an <code>R</code> character vector, so we can query its length to figure out the number of nodes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>   <span class="fu">length</span>(<span class="fu">V</span>(g))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 38</code></pre>
</div>
</div>
<p>The analogue function for edges in <code>igraph</code> is <code>E</code> which also takes the network object as input and returns an object of class <code>igraph.es</code> (“igraph edge sequence”) as output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>   <span class="fu">E</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 102/102 edges from 9e7cc7a (vertex names):
 [1] BRETT      --MARSELLUS       BRETT      --MARVIN         
 [3] BRETT      --ROGER           BRETT      --VINCENT        
 [5] BUDDY      --MIA             BUDDY      --VINCENT        
 [7] BRETT      --BUTCH           BUTCH      --CAPT KOONS     
 [9] BUTCH      --ESMARELDA       BUTCH      --GAWKER #2      
[11] BUTCH      --JULES           BUTCH      --MARSELLUS      
[13] BUTCH      --PEDESTRIAN      BUTCH      --SPORTSCASTER #1
[15] BUTCH      --ENGLISH DAVE    BRETT      --FABIENNE       
[17] BUTCH      --FABIENNE        FABIENNE   --JULES          
[19] FOURTH MAN --JULES           FOURTH MAN --VINCENT        
+ ... omitted several edges</code></pre>
</div>
</div>
<p>This tells us that there are 102 edges (connected dyads) in the network. Some of these include Brett and Marsellus and Fabienne and Jules, but not all can be listed for reasons of space.</p>
<p><code>igraph</code> also has two dedicated functions that return the number of nodes and edges in the graph in one fell swoop. They are called <code>vcount</code> and <code>ecount</code> and take the graph object as input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>   <span class="fu">vcount</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 38</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>   <span class="fu">ecount</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 102</code></pre>
</div>
</div>
</section>
<section id="graph-density" class="level2">
<h2 class="anchored" data-anchor-id="graph-density">Graph Density</h2>
<p>Once we have the number of edges and nodes, we can calculate the most basic derived statistic in a network, which is the <strong>density</strong>. Since the movie network is an <strong>undirected</strong> graph, the density is given by:</p>
<p><span class="math display">\[
   \frac{2m}{n(n-1)}
\]</span></p>
<p>Where <span class="math inline">\(m\)</span> is the number of edges and <span class="math inline">\(n\)</span> is the number of nodes, or in our case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>   (<span class="dv">2</span> <span class="sc">*</span> <span class="dv">102</span>) <span class="sc">/</span> (<span class="dv">38</span> <span class="sc">*</span> (<span class="dv">38</span> <span class="sc">-</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1450925</code></pre>
</div>
</div>
<p>Of course, igraph has a dedicated function called <code>edge_density</code> to compute the density too, which takes the igraph object as input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>   <span class="fu">edge_density</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1450925</code></pre>
</div>
</div>
</section>
<section id="degree" class="level2">
<h2 class="anchored" data-anchor-id="degree">Degree</h2>
<p>The next set of graph metrics are based on the <strong>degree</strong> of the graph. We can list the graph’s <strong>degree set</strong> using the <code>igraph</code> function <code>degree</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>   <span class="fu">degree</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          BRETT           BUDDY           BUTCH      CAPT KOONS     ED SULLIVAN 
              7               2              17               5               2 
   ENGLISH DAVE       ESMARELDA        FABIENNE      FOURTH MAN       GAWKER #2 
              4               1               3               2               3 
    HONEY BUNNY          JIMMIE            JODY           JULES           LANCE 
              8               3               4              16               4 
        MANAGER       MARSELLUS          MARVIN         MAYNARD             MIA 
              5              10               6               3              11 
         MOTHER          PATRON      PEDESTRIAN        PREACHER         PUMPKIN 
              5               5               3               3               8 
         RAQUEL           ROGER SPORTSCASTER #1 SPORTSCASTER #2        THE GIMP 
              3               6               2               1               2 
       THE WOLF         VINCENT        WAITRESS         WINSTON           WOMAN 
              3              25               4               3               5 
      YOUNG MAN     YOUNG WOMAN             ZED 
              4               4               2 </code></pre>
</div>
</div>
<p>The <code>degree</code> function takes the igraph network object as input and returns a plain old <code>R</code> <strong>named vector</strong> as output with the names being the <code>names</code> attribute of vertices in the network object.</p>
<p>Usually we are interested in who are the “top nodes” in the network by degree (a kind of <strong>centrality</strong>). To figure that out, all we need to do is sort the degree set (to generate the graph’s <strong>degree sequence</strong>) and list the top entries:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>   d <span class="ot">&lt;-</span> <span class="fu">degree</span>(g)</span>
<span id="cb21-2"><a href="#cb21-2"></a>   d.sort <span class="ot">&lt;-</span> <span class="fu">sort</span>(d, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-3"><a href="#cb21-3"></a>   d.sort[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    VINCENT       BUTCH       JULES         MIA   MARSELLUS HONEY BUNNY 
         25          17          16          11          10           8 
    PUMPKIN       BRETT 
          8           7 </code></pre>
</div>
</div>
<p>Line 1 stores the degrees in an object “d”, line 2 creates a “sorted” version of the same object (from bigger to smaller) and line 3 shows the first eight entries of the sorted degree sequence.</p>
<p>Because the degree vector “d” is just a regular old vector we can use native <code>R</code> mathematical operations to figure out things like the <strong>sum</strong>, <strong>maximum</strong>, <strong>minimum</strong>, and <strong>average degree</strong> of the graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>   <span class="fu">sum</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 204</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>   <span class="fu">max</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>   <span class="fu">min</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>   <span class="fu">mean</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.368421</code></pre>
</div>
</div>
<p>So the sum of degrees is 204, the maximum degree is 25 (belonging to Vincent), the minimum is one, and the average is about 5.4.</p>
<p>Note that these numbers recreate some well-known equalities in graph theory:</p>
<ul>
<li>The sum of degrees is twice the number of edges (the <a href="https://www3.nd.edu/~dgalvin1/40210/40210_F12/CGT_early.pdf">first theorem of graph theory</a>):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>   <span class="dv">2</span> <span class="sc">*</span> <span class="fu">ecount</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 204</code></pre>
</div>
</div>
<ul>
<li>The average degree is just the sum of degrees divided by the number of nodes:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>   <span class="fu">sum</span>(d)<span class="sc">/</span><span class="fu">vcount</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.368421</code></pre>
</div>
</div>
<ul>
<li>The density is just the average degree divided by the number of nodes minus one, as explained <a href="https://olizardo.github.io/networks-textbook/lesson-graphs-degree-metrics.html#the-connection-between-density-and-average-degree">here</a>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>   <span class="fu">mean</span>(d)<span class="sc">/</span>(<span class="fu">vcount</span>(g) <span class="sc">-</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1450925</code></pre>
</div>
</div>
<p>Some people also consider the <strong>degree variance</strong> of the graph as a measure of inequality of connectivity in the system. It is equal to the average sum of square deviations of each node’s degree from the average:</p>
<p><span class="math display">\[
  \mathcal{v}(G) = \frac{\sum_i (k_i - \bar{k})^2}{n}
\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>   <span class="fu">sum</span>((d <span class="sc">-</span> <span class="fu">mean</span>(d))<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="fu">vcount</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22.96953</code></pre>
</div>
</div>
<p>This tells us that there is a lot of inequality in the distribution of degrees in the graph (a graph with all nodes equal degree would have variance zero).</p>
</section>
<section id="the-degree-distribution-in-undirected-graphs" class="level2">
<h2 class="anchored" data-anchor-id="the-degree-distribution-in-undirected-graphs">The Degree Distribution in Undirected Graphs</h2>
<p>Another way of looking at inequalities of degrees in a graph is to examine its <strong>degree distribution</strong>. This gives us the probability of observing a node with a given degree <em>k</em> in the graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>   deg.dist <span class="ot">&lt;-</span> <span class="fu">degree_distribution</span>(g)</span>
<span id="cb39-2"><a href="#cb39-2"></a>   deg.dist <span class="ot">&lt;-</span> <span class="fu">round</span>(deg.dist, <span class="dv">3</span>)</span>
<span id="cb39-3"><a href="#cb39-3"></a>   deg.dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.000 0.053 0.158 0.237 0.158 0.132 0.053 0.026 0.053 0.000 0.026 0.026
[13] 0.000 0.000 0.000 0.000 0.026 0.026 0.000 0.000 0.000 0.000 0.000 0.000
[25] 0.000 0.026</code></pre>
</div>
</div>
<p>The igraph function <code>degree_distribution</code> just returns a numeric vector of the same length as the <strong>maximum degree</strong> of the graph plus one. In this case that’s a vector of length 25 + 1 = 26. The first entry gives us the proportion of nodes with degree zero (isolates), the second the proportion of nodes of degree one, and so on up to the graph’s <strong>maximum degree</strong>.</p>
<p>Since there are no isolates in the network, we can ignore the first element of this vector, to get the proportion of nodes of each degree in the <em>Pulp Fiction</em> network. To that, we fist create a two-column <code>data.frame</code> with the degrees in the first column and the proportions in the second:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>   degree <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">max</span>(d))</span>
<span id="cb41-2"><a href="#cb41-2"></a>   prop <span class="ot">&lt;-</span> deg.dist</span>
<span id="cb41-3"><a href="#cb41-3"></a>   prop <span class="ot">&lt;-</span> prop[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb41-4"><a href="#cb41-4"></a>   deg.dist <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(degree, prop)</span>
<span id="cb41-5"><a href="#cb41-5"></a>   deg.dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   degree  prop
1       1 0.053
2       2 0.158
3       3 0.237
4       4 0.158
5       5 0.132
6       6 0.053
7       7 0.026
8       8 0.053
9       9 0.000
10     10 0.026
11     11 0.026
12     12 0.000
13     13 0.000
14     14 0.000
15     15 0.000
16     16 0.026
17     17 0.026
18     18 0.000
19     19 0.000
20     20 0.000
21     21 0.000
22     22 0.000
23     23 0.000
24     24 0.000
25     25 0.026</code></pre>
</div>
</div>
<p>Of course, a better way to display the degree distribution of a graph is via some kind of data visualization, particularly for large networks where a long table of numbers is just not feasible. To do that, we can call on our good friend <code>ggplot</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>   <span class="co"># install.packages(ggplot2)</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>   <span class="fu">library</span>(ggplot2)</span>
<span id="cb43-3"><a href="#cb43-3"></a>   p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> deg.dist, <span class="fu">aes</span>(<span class="at">x =</span> degree, <span class="at">y =</span> prop))</span>
<span id="cb43-4"><a href="#cb43-4"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb43-5"><a href="#cb43-5"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb43-6"><a href="#cb43-6"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, </span>
<span id="cb43-7"><a href="#cb43-7"></a>                 <span class="at">title =</span> <span class="st">"Degree Distribution in Pulp Fiction Network"</span>) </span>
<span id="cb43-8"><a href="#cb43-8"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(d), </span>
<span id="cb43-9"><a href="#cb43-9"></a>                       <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span>
<span id="cb43-10"><a href="#cb43-10"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>))</span>
<span id="cb43-11"><a href="#cb43-11"></a>   p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="basic_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The plot clearly shows that the <em>Pulp Fiction</em> network degree distribution is <em>skewed</em> with a small number of characters having a large degree <span class="math inline">\(k \geq 15\)</span> while most other characters in the movie have a small degree <span class="math inline">\(k \leq 5\)</span> indicating inequality of connectivity in the system.</p>
</section>
<section id="the-degree-correlation" class="level2">
<h2 class="anchored" data-anchor-id="the-degree-correlation">The Degree Correlation</h2>
<p>Another overall network statistic we may want to know is the <strong>degree correlation</strong> <span class="citation" data-cites="newman02">(<a href="#ref-newman02" role="doc-biblioref">Newman 2002</a>)</span>. How do we compute it? Imagine taking each edge in the network and creating two degree vectors, one based on the degree of the node in one end and the degre of the node in another. Then the <strong>degree assortativity coefficient</strong> is just the Pearson product moment correlation between these two vectors.</p>
<p>Let’s see how this would work for the <em>Pulp Fiction</em> network. First we need to extract an <em>edge list</em> from the graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>   g.el <span class="ot">&lt;-</span> <span class="fu">as_edgelist</span>(g) <span class="co">#transforming graph to edgelist</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>   <span class="fu">head</span>(g.el)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]    [,2]       
[1,] "BRETT" "MARSELLUS"
[2,] "BRETT" "MARVIN"   
[3,] "BRETT" "ROGER"    
[4,] "BRETT" "VINCENT"  
[5,] "BUDDY" "MIA"      
[6,] "BUDDY" "VINCENT"  </code></pre>
</div>
</div>
<p>We can see that the <code>as_edgelist</code> function takes the igraph network object as input and returns an <span class="math inline">\(E \times 2\)</span> matrix, with <span class="math inline">\(E = 102\)</span> being the number of rows. Each column of the matrix records the name of the node on each end of the edge. So the first row of the edge list with entries “BRETT” and “MARSELLUS” tells us that there is an edge linking Brett and Marsellus, and so forth for each row.</p>
<p>To compute the correlation between the degrees of each node, all we need to do is attach the corresponding degrees to each name for each of the columns of the edge list, which can be done via data wrangling magic from the <code>dplyr</code> package (part of the <code>tidyverse</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>   <span class="co"># install.packages(dplyr)</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>   <span class="fu">library</span>(dplyr)</span>
<span id="cb46-3"><a href="#cb46-3"></a>   deg.dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name1 =</span> <span class="fu">names</span>(d), <span class="at">name2 =</span> <span class="fu">names</span>(d), d)</span>
<span id="cb46-4"><a href="#cb46-4"></a>   el.temp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name2 =</span> g.el[, <span class="dv">2</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="#cb46-5"></a>      <span class="fu">left_join</span>(deg.dat, <span class="at">by =</span> <span class="st">"name2"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="#cb46-6"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"name2"</span>, <span class="st">"d"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-7"><a href="#cb46-7"></a>      <span class="fu">rename</span>(<span class="at">d2 =</span> d) </span>
<span id="cb46-8"><a href="#cb46-8"></a>   d.el <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name1 =</span> g.el[, <span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb46-9"><a href="#cb46-9"></a>      <span class="fu">left_join</span>(deg.dat, <span class="at">by =</span> <span class="st">"name1"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-10"><a href="#cb46-10"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"name1"</span>, <span class="st">"d"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-11"><a href="#cb46-11"></a>      <span class="fu">rename</span>(<span class="at">d1 =</span> d) <span class="sc">%&gt;%</span> </span>
<span id="cb46-12"><a href="#cb46-12"></a>      <span class="fu">cbind</span>(el.temp)</span>
<span id="cb46-13"><a href="#cb46-13"></a><span class="fu">head</span>(d.el)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  name1 d1     name2 d2
1 BRETT  7 MARSELLUS 10
2 BRETT  7    MARVIN  6
3 BRETT  7     ROGER  6
4 BRETT  7   VINCENT 25
5 BUDDY  2       MIA 11
6 BUDDY  2   VINCENT 25</code></pre>
</div>
</div>
<p>Line 3 creates a two-column data frame called “deg.dat” with as many rows as there are nodes in the network. The first two columns contain the names of each node (identically listed with different names) and the third columns contains the corresponding node’s degree.</p>
<p>Lines 4-7 use <code>dplyr</code> functions to create a new object “el.temp” joining the degree information to each of the node names listed in the second position in the original edge list “g.el,” and rename the imported column of degrees “d2.”</p>
<p>Lines 8-12 do the same for the nodes listed in the first position in the original edge list, renames the imported columns of degrees “d1,” and the binds the columns of the “el.temp” object to the new object “d.el.” The resulting object has four columns: Two for the names of the nodes incident to each edge on the edge list (columns 1 and 3), and two other ones corresponding to the degrees of the corresponding nodes (columns 2 and 4).</p>
<p>We can see from the output of the first few rows of the “d.el” object that indeed “BRETT” is assigned a degree of 7 in each row of the edge list, “BUDDY” a degree of 2, “MARSELLUS” a degree of 10, “VINCENT” a degree of 25 and so forth.</p>
<p>Now to compute the degree correlation in the network all we need to do is call the native <code>R</code> function <code>cor</code> on the two columns from “d.el” that containing the degree information. <strong>Note that because each degree appears twice at the end of each edge in an undirected graph (as both “sender” and “receiver”), we need to double each column by appending the other degree column at the end</strong>. So the first degree column is the vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>   d1 <span class="ot">&lt;-</span> <span class="fu">c</span>(d.el<span class="sc">$</span>d1, d.el<span class="sc">$</span>d2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And the second degree column is the vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>   d2 <span class="ot">&lt;-</span> <span class="fu">c</span>(d.el<span class="sc">$</span>d2, d.el<span class="sc">$</span>d1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And the graph’s degree correlation <span class="citation" data-cites="newman03">(<a href="#ref-newman03" role="doc-biblioref">Newman 2003</a>)</span> is just the Pearson correlation between these two degree vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>   <span class="fu">cor</span>(d1, d2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2896427</code></pre>
</div>
</div>
<p>The result <span class="math inline">\(r_{deg} = -0.29\)</span> tells us that there is <em>anti-correlation</em> by degree in the <em>Pulp Fiction</em> network. That is high-degree characters tend to appear with low degree characters, or conversely, high-degree characters (like Marsellus and Jules) don’t appear together very often.</p>
<p>If you hate <code>dplyr</code> (and some people do with a passion) here’s a relatively quick way to do the same thing without it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>   A <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(g)) <span class="co">#vectorized version of adjacency matrix</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>   dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">e =</span> <span class="fu">as.vector</span>(A), </span>
<span id="cb52-3"><a href="#cb52-3"></a>                     <span class="at">rd =</span> <span class="fu">rep</span>(<span class="fu">rowSums</span>(A), <span class="fu">ncol</span>(A)), </span>
<span id="cb52-4"><a href="#cb52-4"></a>                     <span class="at">cd =</span> <span class="fu">rep</span>(<span class="fu">colSums</span>(A), <span class="at">each =</span> <span class="fu">nrow</span>(A)),</span>
<span id="cb52-5"><a href="#cb52-5"></a>                     <span class="at">rn =</span> <span class="fu">rep</span>(<span class="fu">rownames</span>(A), <span class="fu">ncol</span>(A)),</span>
<span id="cb52-6"><a href="#cb52-6"></a>                     <span class="at">cn =</span> <span class="fu">rep</span>(<span class="fu">colnames</span>(A), <span class="at">each =</span> <span class="fu">nrow</span>(A))</span>
<span id="cb52-7"><a href="#cb52-7"></a>                     )</span>
<span id="cb52-8"><a href="#cb52-8"></a>   <span class="fu">cor</span>(dat[dat<span class="sc">$</span>e <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>rd, dat[dat<span class="sc">$</span>e <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>cd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2896427</code></pre>
</div>
</div>
<p>Of course, <code>igraph</code> has a function called <code>assortativity_degree</code> that does all the work for us:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>   <span class="fu">assortativity_degree</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2896427</code></pre>
</div>
</div>
</section>
<section id="the-average-shortest-path-length" class="level2">
<h2 class="anchored" data-anchor-id="the-average-shortest-path-length">The Average Shortest Path Length</h2>
<p>The final statistic people use to characterize networks is the <strong>average shortest path length</strong>. In a network, even non-adjacent nodes, could be <strong>indirectly connected</strong> to other nodes via a <strong>path</strong> of some <strong>length</strong> (<span class="math inline">\(l &gt; 1\)</span>) So it is useful to know what the average of this quantity is across all dyads in the network.</p>
<p>To do that, we first need to compute the length of the shortest path <span class="math inline">\(l\)</span> for each pair of nodes in the network (also known as the <strong>geodesic distance</strong>). Adjacent nodes get an automatic score of <span class="math inline">\(l = 1\)</span>. In <code>igraph</code> this is done as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>   S <span class="ot">&lt;-</span> <span class="fu">distances</span>(g)</span>
<span id="cb56-2"><a href="#cb56-2"></a>   S[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             BRETT BUDDY BUTCH CAPT KOONS ED SULLIVAN ENGLISH DAVE ESMARELDA
BRETT            0     2     1          2           2            2         3
BUDDY            2     0     2          2           2            2         4
BUTCH            1     2     0          1           2            1         2
CAPT KOONS       2     2     1          0           2            2         3
ED SULLIVAN      2     2     2          2           0            2         4
ENGLISH DAVE     2     2     1          2           2            0         3
ESMARELDA        3     4     2          3           4            3         0</code></pre>
</div>
</div>
<p>The <code>igraph</code> function <code>distances</code> takes the network object as input and returns the desired shortest path matrix. So for instance, Brett is directly connected to Butch (they appear in a scene together) but indirectly connected to Buddy via a path of length two (they both appear in scenes with common neighbors even if they don’t appear together).</p>
<p>The maximum distance between two nodes in the graph (the longest shortest path to put it confusingly) is called the <strong>graph diameter</strong>. We can find this out simply by using the native <code>R</code> function for the maximum on the shortest paths matrix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>   <span class="fu">max</span>(S)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>This means that in the <em>Pulp Fiction</em> network the maximum degree of separation between two characters is a path of length 8.</p>
<p>Of course, we cann also call the <code>igraph</code> function <code>diameter</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>   <span class="fu">diameter</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>Once we have the geodesic distance matrix, it is easy to calculate the average path length of the graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>   rs.S <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(S)</span>
<span id="cb62-2"><a href="#cb62-2"></a>   rm.S <span class="ot">&lt;-</span> rs.S<span class="sc">/</span>(<span class="fu">vcount</span>(g) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb62-3"><a href="#cb62-3"></a>   <span class="fu">mean</span>(rm.S)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.769559</code></pre>
</div>
</div>
<ul>
<li><p>First (line 1) we sum all the rows (or columns) of the geodesic distance matrix. This vector (of the same length as the number of nodes) gives us the sum of the geodesic distance of each node to each of the nodes (we will use this to compute <strong>closeness centrality</strong> later).</p></li>
<li><p>Then (line 2) we divide this vector by the number of nodes minus one (to exclude the focal node) to create a vector of the <em>average</em> distance of each node to each of the other nodes.</p></li>
<li><p>Finally (line 3) we take the average across all nodes of this average distance vector to get the <em>graph</em>’s average shortest path length, which in this case equals L = 2.8.</p></li>
</ul>
<p>This means that, on average, each character in <em>Pulp Fiction</em> is separated by little less than three contacts in the co-appearance network (a fairly small world).</p>
<p>Of course this can also be done in just one step on <code>igraph</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>   <span class="fu">mean_distance</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.769559</code></pre>
</div>
</div>
</section>
<section id="putting-it-all-together" class="level2">
<h2 class="anchored" data-anchor-id="putting-it-all-together">Putting it all Together</h2>
<p>Now we can put together all the basic network statistics that we have computed into some sort of summary table, like the ones <a href="https://networkrepository.com/soc.php">here</a>. We first create a vector with the names of each statistic:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>   Stat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Nodes"</span>, <span class="st">"Edges"</span>, <span class="st">"Min. Degree"</span>, <span class="st">"Max. Degree"</span>, <span class="st">"Avg. Degree"</span>, <span class="st">"Degree Corr."</span>, <span class="st">"Diameter"</span>, <span class="st">"Avg. Shortest Path Length"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we create a vector with the values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>   Value <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">vcount</span>(g), <span class="fu">ecount</span>(g), <span class="fu">min</span>(d), <span class="fu">max</span>(d), <span class="fu">round</span>(<span class="fu">mean</span>(d), <span class="dv">2</span>), <span class="fu">round</span>(<span class="fu">assortativity_degree</span>(g), <span class="dv">2</span>), <span class="fu">max</span>(S), <span class="fu">round</span>(<span class="fu">mean_distance</span>(g), <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then put these two vector together into a data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>   net.stats <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Stat, Value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then use the package <code>kableExtra</code> (a nice table maker) to create a nice html table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>   <span class="co"># intall.packages(kableExtra)</span></span>
<span id="cb69-2"><a href="#cb69-2"></a>   <span class="fu">library</span>(kableExtra)</span>
<span id="cb69-3"><a href="#cb69-3"></a>   <span class="fu">kbl</span>(net.stats, <span class="at">format =</span> <span class="st">"pipe"</span>, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>),</span>
<span id="cb69-4"><a href="#cb69-4"></a>       <span class="at">caption =</span> <span class="st">"Key Statistics for Pulp Fiction Network."</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-5"><a href="#cb69-5"></a>   <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>Key Statistics for Pulp Fiction Network.</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Stat </th>
   <th style="text-align:center;"> Value </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Nodes </td>
   <td style="text-align:center;"> 38.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Edges </td>
   <td style="text-align:center;"> 102.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Min. Degree </td>
   <td style="text-align:center;"> 1.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Max. Degree </td>
   <td style="text-align:center;"> 25.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Avg. Degree </td>
   <td style="text-align:center;"> 5.37 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Degree Corr. </td>
   <td style="text-align:center;"> -0.29 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Diameter </td>
   <td style="text-align:center;"> 8.00 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Avg. Shortest Path Length </td>
   <td style="text-align:center;"> 2.77 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="graph-degree-metrics-in-directed-graphs" class="level2">
<h2 class="anchored" data-anchor-id="graph-degree-metrics-in-directed-graphs">Graph Degree Metrics in Directed Graphs</h2>
<p>As we saw earlier, the <strong>degree distribution</strong> and the <strong>degree correlation</strong> are two basic things we want to have a sense of when characterizing a network, and we showed examples for the undirected graph case. However, when you have a network measuring a tie with some meaningful “from” “to” directionality (represented as a <strong>directed graph</strong>) the number of things you have to compute in terms of degrees “doubles.”</p>
<p>For instance, instead of a single degree set and sequence, now we have two: An <strong>outdegree</strong> and an <strong>indegree</strong> set and sequence. The same thing applies to the degree distribution and the degree correlation.</p>
<section id="the-indegree-and-outdegree-distributions" class="level3">
<h3 class="anchored" data-anchor-id="the-indegree-and-outdegree-distributions">The Indegree and Outdegree Distributions</h3>
<p>In the case of the degree distribution, now we have <em>two distributions</em>: An <strong>outdegree distribution</strong> and an <strong>indegree distribution</strong>.</p>
<p>Let’s see an example using the <code>law_advice</code> data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>   <span class="fu">library</span>(networkdata)</span>
<span id="cb70-2"><a href="#cb70-2"></a>   <span class="fu">library</span>(igraph)</span>
<span id="cb70-3"><a href="#cb70-3"></a>   g <span class="ot">&lt;-</span> law_advice</span>
<span id="cb70-4"><a href="#cb70-4"></a>   i.prop <span class="ot">&lt;-</span> <span class="fu">degree_distribution</span>(g, <span class="at">mode =</span> <span class="st">"in"</span>)</span>
<span id="cb70-5"><a href="#cb70-5"></a>   o.prop <span class="ot">&lt;-</span> <span class="fu">degree_distribution</span>(g, <span class="at">mode =</span> <span class="st">"out"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So the main complication is that now we have to specify a value for the “mode” argument; “in” for indegree and “out” for outdegree.</p>
<p>That also means that when plotting, we have to create two data frames and present two plots.</p>
<p>First the data frames:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>   i.d <span class="ot">&lt;-</span> <span class="fu">degree</span>(g, <span class="at">mode =</span> <span class="st">"in"</span>)</span>
<span id="cb71-2"><a href="#cb71-2"></a>   o.d <span class="ot">&lt;-</span> <span class="fu">degree</span>(g, <span class="at">mode =</span> <span class="st">"out"</span>)</span>
<span id="cb71-3"><a href="#cb71-3"></a>   i.d.vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="fu">max</span>(i.d))</span>
<span id="cb71-4"><a href="#cb71-4"></a>   o.d.vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="fu">max</span>(o.d))</span>
<span id="cb71-5"><a href="#cb71-5"></a>   i.deg.dist <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(i.d.vals, i.prop)</span>
<span id="cb71-6"><a href="#cb71-6"></a>   o.deg.dist <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(o.d.vals, o.prop)</span>
<span id="cb71-7"><a href="#cb71-7"></a>   <span class="fu">head</span>(i.deg.dist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  i.d.vals     i.prop
1        0 0.01408451
2        1 0.02816901
3        2 0.07042254
4        3 0.02816901
5        4 0.08450704
6        5 0.02816901</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>   <span class="fu">head</span>(o.deg.dist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  o.d.vals     o.prop
1        0 0.01408451
2        1 0.00000000
3        2 0.01408451
4        3 0.05633803
5        4 0.04225352
6        5 0.04225352</code></pre>
</div>
</div>
<p>Now, to plotting. To be effective, the resulting plot has to show the outdegree and indegree distribution side by side so as to allow the reader to compare. To do that, we first generate each plot separately:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>   <span class="fu">library</span>(ggplot2)</span>
<span id="cb75-2"><a href="#cb75-2"></a>   p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> o.deg.dist, <span class="fu">aes</span>(<span class="at">x =</span> o.d.vals, <span class="at">y =</span> o.prop))</span>
<span id="cb75-3"><a href="#cb75-3"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb75-4"><a href="#cb75-4"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb75-5"><a href="#cb75-5"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, </span>
<span id="cb75-6"><a href="#cb75-6"></a>                 <span class="at">title =</span> <span class="st">"Outdegree Distribution in Law Advice Network"</span>) </span>
<span id="cb75-7"><a href="#cb75-7"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(o.d), </span>
<span id="cb75-8"><a href="#cb75-8"></a>                       <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">0.75</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span>
<span id="cb75-9"><a href="#cb75-9"></a>   p1 <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">40</span>)</span>
<span id="cb75-10"><a href="#cb75-10"></a></span>
<span id="cb75-11"><a href="#cb75-11"></a>   p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> i.deg.dist, <span class="fu">aes</span>(<span class="at">x =</span> i.d.vals, <span class="at">y =</span> i.prop))</span>
<span id="cb75-12"><a href="#cb75-12"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb75-13"><a href="#cb75-13"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb75-14"><a href="#cb75-14"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>, </span>
<span id="cb75-15"><a href="#cb75-15"></a>                 <span class="at">title =</span> <span class="st">"Indegree Distribution in Law Advice Network"</span>) </span>
<span id="cb75-16"><a href="#cb75-16"></a>   p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(i.d), </span>
<span id="cb75-17"><a href="#cb75-17"></a>                       <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">0.75</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span>
<span id="cb75-18"><a href="#cb75-18"></a>   p2 <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we use the magical package <code>patchwork</code> to combine the plots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>   <span class="co"># install.packages("patchwork")</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>   <span class="fu">library</span>(patchwork)</span>
<span id="cb76-3"><a href="#cb76-3"></a>   p <span class="ot">&lt;-</span> p1 <span class="sc">/</span> p2</span>
<span id="cb76-4"><a href="#cb76-4"></a>   p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="basic_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The data clearly shows that while both distributions are skewed, the indegree distribution is more heterogeneous, with a larger proportion of nodes in the high end of <em>receiving</em> advice as compared to giving advice.</p>
<p>Note also that since the mean degree is the same regardless of whether we use the out or indegree distribution, then the blue line pointing to the mean degree falls in the same spot on the x-axis for both plots.</p>
</section>
<section id="the-four-different-flavors-of-degree-correlations-in-the-directed-case" class="level3">
<h3 class="anchored" data-anchor-id="the-four-different-flavors-of-degree-correlations-in-the-directed-case">The Four Different Flavors of Degree Correlations in the Directed Case</h3>
<p>The same doubling (really quadrupling) happens to degree correlations in directed graphs. While in an undirected graph, there is a single degree correlation, in the directed case we have <em>four</em> quantities to compute: The out-out degree correlation, the in-in degree correlation, the out-in degree correlation, and the in-out degree correlation (see <a href="https://barabasi.com/f/620.pdf">here</a>, p.&nbsp;38).</p>
<p>To proceed, we need to create an edge list data set with six columns: The node id of the “from” node, the node id of the “to” node, the indegree of the “from” node, the outdegree of the “from” node, the indegree of the “to” node, and the outdegree of the “to” node.</p>
<p>We can adapt the code we used for the undirected case for this purpose. First, we create an edge list data frame using the <code>igraph</code> function <code>as_data_frame</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>   <span class="fu">library</span>(dplyr)</span>
<span id="cb77-2"><a href="#cb77-2"></a>   g.el <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">as_data_frame</span>(g) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3"></a>      <span class="fu">rename</span>(<span class="at">fr =</span> from)</span>
<span id="cb77-4"><a href="#cb77-4"></a>   <span class="fu">head</span>(g.el)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  fr to
1  1  2
2  1 17
3  1 20
4  2  1
5  2  6
6  2 17</code></pre>
</div>
</div>
<p>Note that we have to specify that this is in an <code>igraph</code> function by typing <code>igraph::</code> in front of the <code>as_data_frame</code> because there is an (older) <code>dplyr</code> function with the same name that was used for data wrangling.</p>
<p>Second, we create data frames containing the in and outdegrees of each node in the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>    deg.dat.fr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">fr =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(g), o.d, i.d)</span>
<span id="cb79-2"><a href="#cb79-2"></a>    deg.dat.to <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">to =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(g), o.d, i.d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Third, we merge this info into the edge list data frame to get the in and outdegrees of the from and to nodes in the directed edge:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>   d.el <span class="ot">&lt;-</span> g.el <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="#cb80-2"></a>      <span class="fu">left_join</span>(deg.dat.fr) <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="#cb80-3"></a>      <span class="fu">rename</span>(<span class="at">o.d.fr =</span> o.d, <span class="at">i.d.fr =</span> i.d) <span class="sc">%&gt;%</span> </span>
<span id="cb80-4"><a href="#cb80-4"></a>      <span class="fu">left_join</span>(deg.dat.to, <span class="at">by =</span> <span class="st">"to"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb80-5"><a href="#cb80-5"></a>      <span class="fu">rename</span>(<span class="at">o.d.to =</span> o.d, <span class="at">i.d.to =</span> i.d) </span>
<span id="cb80-6"><a href="#cb80-6"></a>   <span class="fu">head</span>(d.el)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  fr to o.d.fr i.d.fr o.d.to i.d.to
1  1  2      3     22      7     23
2  1 17      3     22     21     26
3  1 20      3     22     11     22
4  2  1      7     23      3     22
5  2  6      7     23      0     21
6  2 17      7     23     21     26</code></pre>
</div>
</div>
<p>Now we can compute the four different flavors of the degree correlation for directed graphs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a>   <span class="fu">round</span>(<span class="fu">cor</span>(d.el<span class="sc">$</span>o.d.fr, d.el<span class="sc">$</span>o.d.to), <span class="dv">4</span>) <span class="co">#out-out correlation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.0054</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a>   <span class="fu">round</span>(<span class="fu">cor</span>(d.el<span class="sc">$</span>i.d.fr, d.el<span class="sc">$</span>i.d.to), <span class="dv">4</span>) <span class="co">#in-in correlation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.187</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>   <span class="fu">round</span>(<span class="fu">cor</span>(d.el<span class="sc">$</span>i.d.fr, d.el<span class="sc">$</span>o.d.to), <span class="dv">4</span>) <span class="co">#in-out correlation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.0283</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>   <span class="fu">round</span>(<span class="fu">cor</span>(d.el<span class="sc">$</span>o.d.fr, d.el<span class="sc">$</span>i.d.to), <span class="dv">4</span>) <span class="co">#out-in correlation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.0843</code></pre>
</div>
</div>
<p>These results tell us that there is not much degree assortativity going on in the law advice network, <em>except</em> for a slight tendency of people who receive advice from lots of others to give advice to people who also receive advice from a lot of other people (the “in-in” correlation)</p>
<p>Note that by default, the <code>assortativity_degree</code> function in <code>igraph</code> only returns the <em>out-in</em> correlation for directed graphs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>   <span class="fu">round</span>(<span class="fu">assortativity_degree</span>(g, <span class="at">directed =</span> <span class="cn">TRUE</span>), <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.0843</code></pre>
</div>
</div>
<p>That is, <code>assortativity_degree</code> checks if more active senders are more likely to send ties to people who are popular receivers of ties.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-newman02" class="csl-entry" role="doc-biblioentry">
Newman, Mark EJ. 2002. <span>“Assortative Mixing in Networks.”</span> <em>Physical Review Letters</em> 89 (20): 208701.
</div>
<div id="ref-newman03" class="csl-entry" role="doc-biblioentry">
———. 2003. <span>“Mixing Patterns in Networks.”</span> <em>Physical Review E</em> 67 (2): 026126.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>