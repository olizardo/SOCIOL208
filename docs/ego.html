<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOCIOL 208 - Analyzing Ego Networks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="SOCIOL 208 - Analyzing Ego Networks">
<meta property="og:description" content="An ego-network, is just a subgraph of a larger network–referred to as an ego graph–that includes a node of interest (“ego”), all of the connections between ego and their neighbors (called “alters”)…">
<meta property="og:site-name" content="SOCIOL 208">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Analyzing Ego Networks</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SOCIOL 208</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">208A</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208A.html" class="sidebar-item-text sidebar-link">208A Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208A-F24.html" class="sidebar-item-text sidebar-link">SOCIOL 208A Reading Schedule (Fall 2024)</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Lecture Notes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic.html" class="sidebar-item-text sidebar-link">Basic Network Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ego.html" class="sidebar-item-text sidebar-link active">Analyzing Ego Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eigen.html" class="sidebar-item-text sidebar-link">Matrix Eigendecomposition</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Centrality and Prestige</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./centrality.html" class="sidebar-item-text sidebar-link">Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cube.html" class="sidebar-item-text sidebar-link">The Centrality Cube</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-centrality.html" class="sidebar-item-text sidebar-link">Centrality in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pagerank.html" class="sidebar-item-text sidebar-link">PageRank Prestige Scoring</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hits.html" class="sidebar-item-text sidebar-link">Hubs and Authorities</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-prestige.html" class="sidebar-item-text sidebar-link">Status and Prestige in Two Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Equivalence and Similarity</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structequiv.html" class="sidebar-item-text sidebar-link">Role Equivalence and Structural Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./similarity.html" class="sidebar-item-text sidebar-link">Vertex Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./random-walk.html" class="sidebar-item-text sidebar-link">Random Walk Concepts in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./blondel.html" class="sidebar-item-text sidebar-link">Role Similarity Across Graphs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-similarity.html" class="sidebar-item-text sidebar-link">Similarity and Equivalence in Two-Mode Networks</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">Communities and Clustering</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./community.html" class="sidebar-item-text sidebar-link">Community Structure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spectral.html" class="sidebar-item-text sidebar-link">Community Detection Using Spectral Clustering</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-community-ca.html" class="sidebar-item-text sidebar-link">Community Detection in Two-Mode Networks Using CA</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-spectral.html" class="sidebar-item-text sidebar-link">Spectral Clustering of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ahn.html" class="sidebar-item-text sidebar-link">Assigning Nodes to Multiple Communities</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Two-Mode Networks</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-basic.html" class="sidebar-item-text sidebar-link">Analyzing Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-duality.html" class="sidebar-item-text sidebar-link">The Duality of Persons and Groups</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-ca.html" class="sidebar-item-text sidebar-link">Correspondence Analysis (CA) of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-fitness.html" class="sidebar-item-text sidebar-link">Fitness and Complexity in Two Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tm-null.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./backbone.html" class="sidebar-item-text sidebar-link">Extracting the Backbone of Bipartite Projections Using Two-Mode Graph Ensembles</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Statistical Models</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./swap.html" class="sidebar-item-text sidebar-link">Graph Ensembles in Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./qap.html" class="sidebar-item-text sidebar-link">Network Regression Using Permutation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm1.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ergm2.html" class="sidebar-item-text sidebar-link">Exponential Random Graphs Models II</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">Data Management</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loading.html" class="sidebar-item-text sidebar-link">Loading Network Data from a File</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./network-lists.html" class="sidebar-item-text sidebar-link">Handling Graph Objects in Lists</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subgraph-select.html" class="sidebar-item-text sidebar-link">Selecting a Subgraph Based on Edge Conditions</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">208B</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208B.html" class="sidebar-item-text sidebar-link">208B Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208B-S24.html" class="sidebar-item-text sidebar-link">SOCIOL 208B Reading Schedule (Spring 2024)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ego-networks-and-ego-network-data" id="toc-ego-networks-and-ego-network-data" class="nav-link active" data-scroll-target="#ego-networks-and-ego-network-data">Ego Networks and Ego Network Data</a></li>
  <li><a href="#structural-measures" id="toc-structural-measures" class="nav-link" data-scroll-target="#structural-measures">Structural Measures</a>
  <ul class="collapse">
  <li><a href="#the-clustering-coefficient" id="toc-the-clustering-coefficient" class="nav-link" data-scroll-target="#the-clustering-coefficient">The Clustering Coefficient</a></li>
  </ul></li>
  <li><a href="#effective-size" id="toc-effective-size" class="nav-link" data-scroll-target="#effective-size">Effective Size</a>
  <ul class="collapse">
  <li><a href="#ego-network-betweenness" id="toc-ego-network-betweenness" class="nav-link" data-scroll-target="#ego-network-betweenness">Ego-Network Betweenness</a></li>
  </ul></li>
  <li><a href="#compositional-measures" id="toc-compositional-measures" class="nav-link" data-scroll-target="#compositional-measures">Compositional Measures</a>
  <ul class="collapse">
  <li><a href="#ego-network-diversity" id="toc-ego-network-diversity" class="nav-link" data-scroll-target="#ego-network-diversity">Ego Network Diversity</a></li>
  <li><a href="#other-ways-of-accounting-for-imbalanced-group-sizes-in-homophily-metrics" id="toc-other-ways-of-accounting-for-imbalanced-group-sizes-in-homophily-metrics" class="nav-link" data-scroll-target="#other-ways-of-accounting-for-imbalanced-group-sizes-in-homophily-metrics">Other Ways of Accounting for Imbalanced Group Sizes in Homophily Metrics</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/olizardo/SOCIOL208/blob/main/ego.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Analyzing Ego Networks</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="ego-networks-and-ego-network-data" class="level2">
<h2 class="anchored" data-anchor-id="ego-networks-and-ego-network-data">Ego Networks and Ego Network Data</h2>
<p>An ego-network, is just a <strong>subgraph</strong> of a larger network–referred to as an <strong>ego graph</strong>–that includes a node of interest (“ego”), all of the connections between ego and their neighbors (called “alters”) and usually all of the connections between each of the alters, <em>excluding</em> the connections alters may have with other nodes who are not directly tied to ego.</p>
<p><strong>Ego network data</strong> is social network data collected in such way (e.g., using standard social survey techniques) that you capture the ego networks of some set of people, usually a convenience sample or, more rarely, a probability sample of some population.</p>
<p>Note that if you collect traditional (“whole”) network data (e.g., all the people in a classroom) you have ego network data for that settings (the ego subgraphs of each node as just defined), but not the reverse; ego-network data cannot be converted into “whole” network data, although it can approximate it.</p>
<p>Once you have ego network data you can analyze each ego graph using the standard techniques we learned so far (if you are only interested in the structural characteristics of the ego graph).</p>
<p>If you have attributes on each alter, you can alternatively compute measures of <strong>diversity</strong> to or <strong>homophily</strong> to get a sense of how likely ego is to connect to similar or diverse others.</p>
</section>
<section id="structural-measures" class="level2">
<h2 class="anchored" data-anchor-id="structural-measures">Structural Measures</h2>
<section id="the-clustering-coefficient" class="level3">
<h3 class="anchored" data-anchor-id="the-clustering-coefficient">The Clustering Coefficient</h3>
<p>Perhaps the most basic structural characteristic of an ego network is the density of the subgraph formed by all of the connections between the alters. This is called ego’s <strong>clustering coefficient</strong>.</p>
<p>Let’s see how it works. First we load up the <em>New Hope</em> Star Wars social network included in the <code>networkdata</code> package <span class="citation" data-cites="gabasova16">(<a href="#ref-gabasova16" role="doc-biblioref">Gabasova 2016</a>)</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>   <span class="fu">library</span>(networkdata)</span>
<span id="cb1-2"><a href="#cb1-2"></a>   g <span class="ot">&lt;-</span> starwars[[<span class="dv">4</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>starwars</code> object contain a <code>list</code> of igraph network data sets corresponding to seven of the Star Wars films (the three originals, three prequels, and <em>The Force Awakens</em>). They are ordered in terms of the film chronology, so Episode IV, <em>A New Hope</em> is the fourth element in the list.</p>
<p>As we said an ego graph is just a subgraph centered on a particular actor. So R2-D2’s ego graph is just:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>   <span class="fu">library</span>(igraph)</span>
<span id="cb2-2"><a href="#cb2-2"></a>   N <span class="ot">&lt;-</span> <span class="fu">neighbors</span>(g, <span class="st">"R2-D2"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>   r2 <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, <span class="fu">c</span>(<span class="st">"R2-D2"</span>, <span class="fu">names</span>(N))) <span class="co">#ego graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we can just plot it like we would any <code>igraph</code> object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>   <span class="fu">V</span>(r2)<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2</span>, <span class="fu">vcount</span>(r2)) <span class="co">#alters appear in blue</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>   <span class="fu">V</span>(r2)<span class="sc">$</span>color[<span class="fu">which</span>(<span class="fu">V</span>(r2)<span class="sc">$</span>name <span class="sc">==</span> <span class="st">"R2-D2"</span>)] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co">#ego appears in tan  </span></span>
<span id="cb3-3"><a href="#cb3-3"></a>   <span class="fu">plot</span>(r2, </span>
<span id="cb3-4"><a href="#cb3-4"></a>     <span class="at">vertex.size=</span><span class="dv">10</span>, <span class="at">vertex.frame.color=</span><span class="st">"lightgray"</span>, </span>
<span id="cb3-5"><a href="#cb3-5"></a>     <span class="at">vertex.label.dist=</span><span class="dv">2</span>, </span>
<span id="cb3-6"><a href="#cb3-6"></a>     <span class="at">layout =</span> <span class="fu">layout_as_star</span>(r2, <span class="at">center =</span> <span class="st">"R2-D2"</span>),</span>
<span id="cb3-7"><a href="#cb3-7"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">1.25</span>, <span class="at">edge.color =</span> <span class="st">"lightgray"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">R2-D2’s Ego Network.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Note that we use the <code>layout_as_star()</code> for the layout, so that the ego is put in the center of the star graph surrounded by their alters, we can specify who the star node is using the option <code>center</code>.</p>
<p>R2-D2’s clustering coefficient is just the density of the graph that includes only the alters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>   alters <span class="ot">&lt;-</span> r2 <span class="sc">-</span> <span class="fu">vertex</span>(<span class="st">"R2-D2"</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>   C <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">edge_density</span>(alters), <span class="dv">2</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a>   C</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.67</code></pre>
</div>
</div>
<p>The clustering coefficient <span class="math inline">\(C_i\)</span> for an ego <span class="math inline">\(i\)</span> ranges from zero to one. <span class="math inline">\(C = 0\)</span> means that <em>none</em> of ego’s alters are connected to one another and <span class="math inline">\(C = 1\)</span> means that <em>all</em> of ego’s alters are connected to one another. In this case, <span class="math inline">\(C = 0.67\)</span> means that 67% of R2-D2’s alters are connected (e.g., co-appear in scenes) to one another.</p>
<p>Typically we would want to compute the clustering coefficient of every node in a graph. This can be done using our trusty <code>lapply</code> and <code>sapply</code> meta-functions.</p>
<p>We proceed in three steps:</p>
<p>First, we turn the code we used to find R2-D2’s ego graph into a function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>   create.ego <span class="ot">&lt;-</span> <span class="cf">function</span>(x, w) {</span>
<span id="cb6-2"><a href="#cb6-2"></a>      alter.net <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(w, <span class="fu">neighbors</span>(w, x))</span>
<span id="cb6-3"><a href="#cb6-3"></a>      <span class="fu">return</span>(alter.net)</span>
<span id="cb6-4"><a href="#cb6-4"></a>      }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we <code>lapply</code> the function to each node in the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>   ego.graphs <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, create.ego, <span class="at">w =</span> g)</span>
<span id="cb7-2"><a href="#cb7-2"></a>   <span class="fu">head</span>(ego.graphs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
IGRAPH 810ef73 UNW- 9 24 -- Episode IV – A New Hope
+ attr: name (g/c), name (v/c), height (v/n), mass (v/n), hair_color
| (v/c), skin_color (v/c), eye_color (v/c), birth_year (v/n), sex
| (v/c), homeworld (v/c), species (v/c), weight (e/n)
+ edges from 810ef73 (vertex names):
 [1] CHEWBACCA--C-3PO   CHEWBACCA--LUKE    C-3PO    --LUKE    C-3PO    --BIGGS  
 [5] LUKE     --BIGGS   CHEWBACCA--LEIA    C-3PO    --LEIA    LUKE     --LEIA   
 [9] BIGGS    --LEIA    C-3PO    --BERU    LUKE     --BERU    LEIA     --BERU   
[13] C-3PO    --OWEN    LUKE     --OWEN    BERU     --OWEN    CHEWBACCA--OBI-WAN
[17] C-3PO    --OBI-WAN LUKE     --OBI-WAN LEIA     --OBI-WAN CHEWBACCA--HAN    
[21] C-3PO    --HAN     LUKE     --HAN     LEIA     --HAN     OBI-WAN  --HAN    

[[2]]
IGRAPH 810f581 UNW- 6 15 -- Episode IV – A New Hope
+ attr: name (g/c), name (v/c), height (v/n), mass (v/n), hair_color
| (v/c), skin_color (v/c), eye_color (v/c), birth_year (v/n), sex
| (v/c), homeworld (v/c), species (v/c), weight (e/n)
+ edges from 810f581 (vertex names):
 [1] R2-D2  --C-3PO   R2-D2  --LUKE    C-3PO  --LUKE    R2-D2  --LEIA   
 [5] C-3PO  --LEIA    LUKE   --LEIA    R2-D2  --OBI-WAN C-3PO  --OBI-WAN
 [9] LUKE   --OBI-WAN LEIA   --OBI-WAN R2-D2  --HAN     C-3PO  --HAN    
[13] LUKE   --HAN     LEIA   --HAN     OBI-WAN--HAN    

[[3]]
IGRAPH 810f684 UNW- 10 27 -- Episode IV – A New Hope
+ attr: name (g/c), name (v/c), height (v/n), mass (v/n), hair_color
| (v/c), skin_color (v/c), eye_color (v/c), birth_year (v/n), sex
| (v/c), homeworld (v/c), species (v/c), weight (e/n)
+ edges from 810f684 (vertex names):
 [1] R2-D2    --CHEWBACCA R2-D2    --LUKE      CHEWBACCA--LUKE     
 [4] R2-D2    --BIGGS     LUKE     --BIGGS     R2-D2    --LEIA     
 [7] CHEWBACCA--LEIA      LUKE     --LEIA      BIGGS    --LEIA     
[10] R2-D2    --BERU      LUKE     --BERU      LEIA     --BERU     
[13] R2-D2    --OWEN      LUKE     --OWEN      BERU     --OWEN     
[16] R2-D2    --OBI-WAN   CHEWBACCA--OBI-WAN   LUKE     --OBI-WAN  
+ ... omitted several edges

[[4]]
IGRAPH 810f78c UNW- 15 36 -- Episode IV – A New Hope
+ attr: name (g/c), name (v/c), height (v/n), mass (v/n), hair_color
| (v/c), skin_color (v/c), eye_color (v/c), birth_year (v/n), sex
| (v/c), homeworld (v/c), species (v/c), weight (e/n)
+ edges from 810f78c (vertex names):
 [1] R2-D2    --CHEWBACCA R2-D2    --C-3PO     R2-D2    --BERU     
 [4] R2-D2    --OWEN      R2-D2    --OBI-WAN   R2-D2    --LEIA     
 [7] R2-D2    --BIGGS     R2-D2    --HAN       CHEWBACCA--OBI-WAN  
[10] CHEWBACCA--C-3PO     CHEWBACCA--HAN       CHEWBACCA--LEIA     
[13] CAMIE    --BIGGS     BERU     --OWEN      C-3PO    --BERU     
[16] C-3PO    --OWEN      C-3PO    --LEIA      LEIA     --BERU     
+ ... omitted several edges

[[5]]
IGRAPH 810f882 UNW- 4 4 -- Episode IV – A New Hope
+ attr: name (g/c), name (v/c), height (v/n), mass (v/n), hair_color
| (v/c), skin_color (v/c), eye_color (v/c), birth_year (v/n), sex
| (v/c), homeworld (v/c), species (v/c), weight (e/n)
+ edges from 810f882 (vertex names):
[1] LEIA --OBI-WAN LEIA --MOTTI   LEIA --TARKIN  MOTTI--TARKIN 

[[6]]
IGRAPH 810f975 UNW- 2 1 -- Episode IV – A New Hope
+ attr: name (g/c), name (v/c), height (v/n), mass (v/n), hair_color
| (v/c), skin_color (v/c), eye_color (v/c), birth_year (v/n), sex
| (v/c), homeworld (v/c), species (v/c), weight (e/n)
+ edge from 810f975 (vertex names):
[1] LUKE--BIGGS</code></pre>
</div>
</div>
<p>The result is a <code>list</code> object with <span class="math inline">\(|V| = 21\)</span> ego subgraphs composed of each node’s alters and their connections.</p>
<p>Finally, to find out the clustering coefficient of each node, we just <code>sapply</code> the <code>igraph</code> function <code>edge_density</code> to each member of the <code>ego.graphs</code> list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>   C <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ego.graphs, edge_density)</span>
<span id="cb9-2"><a href="#cb9-2"></a>   <span class="fu">names</span>(C) <span class="ot">&lt;-</span> <span class="fu">V</span>(g)<span class="sc">$</span>name</span>
<span id="cb9-3"><a href="#cb9-3"></a>   <span class="fu">round</span>(C, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
       0.67        1.00        0.60        0.34        0.67        1.00 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
       0.54        0.42        0.90        1.00        0.76        1.00 
     TARKIN         HAN      GREEDO       JABBA     DODONNA GOLD LEADER 
       1.00        0.54         NaN         NaN        1.00        0.80 
      WEDGE  RED LEADER     RED TEN 
       0.80        0.57        1.00 </code></pre>
</div>
</div>
<p>Note we have a couple of <code>NaN</code> values in the slots corresponding to Greedo and Jabba in the clustering coefficient vector.</p>
<p>Let’s check out why:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>   <span class="fu">degree</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
          9           6          10          15           4           2 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
          8          12           5           4           7           3 
     TARKIN         HAN      GREEDO       JABBA     DODONNA GOLD LEADER 
          3           8           1           1           3           5 
      WEDGE  RED LEADER     RED TEN 
          5           7           2 </code></pre>
</div>
</div>
<p>Here we see the problem is that both Greedo and Jabba are singleton nodes (with degree equal to one), so it doesn’t make sense to analyze their clustering coefficients because their ego graph is just an isolated node!</p>
<p>We can just drop them and re-analyze:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>   g <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, <span class="fu">degree</span>(g)<span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a>   ego.graphs <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, create.ego, <span class="at">w =</span> g)</span>
<span id="cb13-3"><a href="#cb13-3"></a>   C <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ego.graphs, edge_density)</span>
<span id="cb13-4"><a href="#cb13-4"></a>   <span class="fu">names</span>(C) <span class="ot">&lt;-</span> <span class="fu">V</span>(g)<span class="sc">$</span>name</span>
<span id="cb13-5"><a href="#cb13-5"></a>   <span class="fu">round</span>(C, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
       0.67        1.00        0.60        0.34        0.67        1.00 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
       0.54        0.42        0.90        1.00        0.76        1.00 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
       1.00        1.00        1.00        0.80        0.80        0.57 
    RED TEN 
       1.00 </code></pre>
</div>
</div>
<p>Much better!</p>
<p>Note that in this analysis, Luke has the lowest clustering coefficient (<span class="math inline">\(C = 0.34\)</span>) this usually indicates an ego whose alters are partitioned into distinct clusters (and hence they are not connected to one another), and ego is a mediator or <em>broker</em> between those clusters.</p>
<p>Let’s see what that looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>   <span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a>   N <span class="ot">&lt;-</span> <span class="fu">neighbors</span>(g, <span class="st">"LUKE"</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a>   luke.alters <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, N)  </span>
<span id="cb15-4"><a href="#cb15-4"></a>   <span class="fu">V</span>(luke.alters)<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="fu">cluster_leading_eigen</span>(luke.alters)<span class="sc">$</span>membership</span>
<span id="cb15-5"><a href="#cb15-5"></a>   luke <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, <span class="fu">c</span>(<span class="st">"LUKE"</span>, <span class="fu">names</span>(N)))</span>
<span id="cb15-6"><a href="#cb15-6"></a>   luke <span class="ot">&lt;-</span> <span class="fu">simplify</span>(<span class="fu">union</span>(luke, luke.alters))</span>
<span id="cb15-7"><a href="#cb15-7"></a>   <span class="fu">V</span>(luke)<span class="sc">$</span>color[<span class="fu">which</span>(<span class="fu">is.na</span>(<span class="fu">V</span>(luke)<span class="sc">$</span>color))] <span class="ot">&lt;-</span> <span class="st">"red"</span></span>
<span id="cb15-8"><a href="#cb15-8"></a>   <span class="fu">plot</span>(luke, </span>
<span id="cb15-9"><a href="#cb15-9"></a>     <span class="at">vertex.size=</span><span class="dv">6</span>, <span class="at">vertex.frame.color=</span><span class="st">"lightgray"</span>, </span>
<span id="cb15-10"><a href="#cb15-10"></a>     <span class="at">vertex.label.dist=</span><span class="fl">1.25</span>,  </span>
<span id="cb15-11"><a href="#cb15-11"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">0.75</span>, <span class="at">edge.color =</span> <span class="st">"lightgray"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Luke’s ego network with alter nodes colored by community assingment via Newman’s leading eigenvector method.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Here we can see that Luke mediates between the Rebel Pilot community on the left and the Obi-Wan, Leia, Chewbacca, Han Solo and Droid communities on the right. Note that we didn’t have to use that <code>layout_as_star</code> option because when ego’s network has community structure, the traditional spring embedding layout will put ego at the center.</p>
<p>Note that in the ego graph that includes ego, each connected alter is a <strong>triangle</strong> in the ego graph. So the clustering coefficient is simply a count of the <em>number of undirected triangles that are centered on ego</em>, or the number of <em>cycles of length three centered on ego</em>.</p>
<p>So that means that the diagonals of the cube of the adjacency matrix also contain the information needed to compute the clustering coefficient:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>   A <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(g))</span>
<span id="cb16-2"><a href="#cb16-2"></a>   A3 <span class="ot">&lt;-</span> A <span class="sc">%*%</span> A <span class="sc">%*%</span> A</span>
<span id="cb16-3"><a href="#cb16-3"></a>   <span class="fu">diag</span>(A3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
         48          30          54          72           8           2 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
         30          56          18          12          32           6 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
          6          30           6          16          16          24 
    RED TEN 
          2 </code></pre>
</div>
</div>
<p>So all we need to do is divide these numbers by the maximum possible number of undirected triangles that could be centered on a node, which is <span class="math inline">\(k_i(k_i - 1)\)</span> where <span class="math inline">\(k_i\)</span> is ego’s degree:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>   k <span class="ot">&lt;-</span> <span class="fu">degree</span>(g)</span>
<span id="cb18-2"><a href="#cb18-2"></a>   C <span class="ot">&lt;-</span> <span class="fu">diag</span>(A3)<span class="sc">/</span>(k<span class="sc">*</span>(k <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb18-3"><a href="#cb18-3"></a>   <span class="fu">round</span>(C, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
       0.67        1.00        0.60        0.34        0.67        1.00 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
       0.54        0.42        0.90        1.00        0.76        1.00 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
       1.00        1.00        1.00        0.80        0.80        0.57 
    RED TEN 
       1.00 </code></pre>
</div>
</div>
<p>Which gives us the answer as before!</p>
<p>Finally, from each ego’s clustering coefficient (sometimes called the <strong>local clustering coefficient</strong> of each node) we can compute the graph’s <strong>global clustering coefficient</strong> which is just the average this quantity across each node in the graph:</p>
<p><span class="math display">\[
C(G) = \frac{1}{N}\sum_iC_i
\]</span></p>
<p>In <code>R</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>   C.glob <span class="ot">&lt;-</span> <span class="fu">mean</span>(C)</span>
<span id="cb20-2"><a href="#cb20-2"></a>   <span class="fu">round</span>(C.glob, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.79</code></pre>
</div>
</div>
<p>Which indicates a fairly clustered graph.</p>
<p>In <code>igraph</code> we can use the function <code>transitivity</code> to compute the local and global clustering coefficients, which can be specified using the argument <code>type</code>. For the local version, the function also expects a list of vertices:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>   <span class="fu">round</span>(<span class="fu">transitivity</span>(g, <span class="fu">V</span>(g)<span class="sc">$</span>name, <span class="at">type =</span> <span class="st">"local"</span>), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
       0.67        1.00        0.60        0.34        0.67        1.00 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
       0.54        0.42        0.90        1.00        0.76        1.00 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
       1.00        1.00        1.00        0.80        0.80        0.57 
    RED TEN 
       1.00 </code></pre>
</div>
</div>
<p>And the graph’s global clustering coefficient is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>   <span class="fu">round</span>(<span class="fu">transitivity</span>(g, <span class="at">type =</span> <span class="st">"average"</span>), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.79</code></pre>
</div>
</div>
</section>
</section>
<section id="effective-size" class="level2">
<h2 class="anchored" data-anchor-id="effective-size">Effective Size</h2>
<p>Another structural measure at the ego-network level, closely related to the clustering coefficient, is the <strong>effective size</strong> <span class="citation" data-cites="burt92">(<a href="#ref-burt92" role="doc-biblioref">Burt 1992</a>)</span>.</p>
<p>The basic idea here is that if you have two alters in your network who are themselves connected to one another then they are <em>redundant</em>, that is the information you get from one can be substituted for the information you can get from the other (because you can always find the information of one via the other).</p>
<p>This means that instead of counting them as two alters, we should (dis)count them as one (or if you were engineering your ego network to optimize effective size, you would drop one and keep the other).</p>
<p>For an ego, the effective size <span class="math inline">\(ES\)</span> is then given by:</p>
<p><span class="math display">\[
ES_i = k_i - \bar{k}_{j \in N(i)}
\]</span></p>
<p>Where <span class="math inline">\(k_i\)</span> is the ego network size (ego’s degree) and <span class="math inline">\(\bar{k}_{j \in N(i)}\)</span> is the <strong>average degree</strong> of the subgraph formed by ego’s alters (excluding ego).</p>
<p>So to calculate <span class="math inline">\(ES\)</span> in our network all we have to do is calculate the average degree of each ego graph and the subtract that from ego’s degree. We can obtain the average degree of each ego using the first two <code>lapply</code> and <code>sapply</code> lines in the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>   mk <span class="ot">&lt;-</span> <span class="fu">lapply</span>(ego.graphs, degree) <span class="co">#degree sequence of each ego</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>   mk <span class="ot">&lt;-</span> <span class="fu">sapply</span>(mk, mean) </span>
<span id="cb26-3"><a href="#cb26-3"></a>   <span class="fu">names</span>(mk) <span class="ot">&lt;-</span> <span class="fu">V</span>(g)<span class="sc">$</span>name</span>
<span id="cb26-4"><a href="#cb26-4"></a>   <span class="fu">round</span>(mk, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
       5.33        5.00        5.40        4.80        2.00        1.00 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
       3.75        4.67        3.60        3.00        4.57        2.00 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
       2.00        5.00        2.00        3.20        3.20        3.43 
    RED TEN 
       1.00 </code></pre>
</div>
</div>
<p>We can then compute ES as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>   ES <span class="ot">&lt;-</span> <span class="fu">degree</span>(g) <span class="sc">-</span> mk</span>
<span id="cb28-2"><a href="#cb28-2"></a>   <span class="fu">round</span>(ES, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
        3.7         1.0         4.6        10.2         2.0         1.0 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
        4.2         7.3         1.4         1.0         2.4         1.0 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
        1.0         1.0         1.0         1.8         1.8         3.6 
    RED TEN 
        1.0 </code></pre>
</div>
</div>
<p>Note that for nodes with the maximum clustering coefficient (<span class="math inline">\(C_i = 1\)</span>) (like Han) the <span class="math inline">\(ES\)</span> measure reaches its minimum value of 1.0. The reason for this is that if the alter-to-alter network for an ego is a <strong>complete graph</strong>, then the average degree of that graph will necessarily be equal to the number of nodes in the alter-to-alter graph (ego’s degree) minus one.</p>
<p>Generally, <span class="math inline">\(ES\)</span> will be smaller than ego’s degree, except in the case where ego is at the center of a star graph with <span class="math inline">\(C_i = 0\)</span> (none of their contacts are connected to one another), in which case <span class="math inline">\(ES\)</span> will be equal to ego’s degree (the effective size will be equal to the actual size).</p>
<p>Note that if two nodes have the same degree, but different clustering coefficients, then the effective size of their networks will be different, with the node with the <em>larger</em> clustering coefficient having a <em>smaller</em> effective size.</p>
<p>Here’s an example from <em>A New Hope</em>:</p>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">k = 7, C = 0.76, ES = 2.4</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">k = 7, C = 0.57, ES = 3.6</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Two Ego Networks of the Same Size but Different Effective Size</p>
</div>
</div>
</div>
<p>Here we can see that even though both Obi-Wan and Red Leader have an ego network of the same size (<span class="math inline">\(k = 7\)</span>), a larger proportion of Obi-Wan’s contacts (<span class="math inline">\(C = 0.76\)</span>) are connected to one another that Red Leader’s (<span class="math inline">\(C = 0.57\)</span>), which means that Obi-Wan’s effective size (<span class="math inline">\(ES = 2.4\)</span>) ends up being smaller than Red Leader’s (<span class="math inline">\(ES = 3.6\)</span>).</p>
<section id="ego-network-betweenness" class="level3">
<h3 class="anchored" data-anchor-id="ego-network-betweenness">Ego-Network Betweenness</h3>
<p>An alternative structural measure of ego’s position in the ego network, also closely related to the clustering coefficient, is <strong>ego network betweenness</strong>. As <span class="citation" data-cites="everett_borgatti05">Everett and Borgatti (<a href="#ref-everett_borgatti05" role="doc-biblioref">2005</a>)</span> note, in an ego network betweenness is determined by the number of paths of length two that involve ego, that is, by the number of disconnected alters.</p>
<p>Therefore, if <span class="math inline">\(\mathbf{A}\)</span> is the adjacency matrix recording the links between the alters, then <span class="math inline">\(\mathbf{A}^2\)</span> will contain the number of paths of length two between each pair of alters. Because we are only interested in the number of paths of length two between each pair of <em>disconnected</em> alters, we multiply (element-wise) this matrix by the adjacency matrix corresponding to the <strong>graph complement</strong> (a matrix with a one for every zero in the original adjacency matrix and a zero for each one). We then take the sum of the reciprocals of one of the triangles (excluding the main diagonal) of the resulting matrix to find the betweenness of ego.</p>
<p>In math:</p>
<p><span class="math display">\[
C_B(Ego) = \sum_{i &lt; j}\left[\mathbf{A}^2 \bullet (\mathbf{J} - \mathbf{A})\right]_{ij}^{-1}
\]</span></p>
<p>Where <span class="math inline">\(\mathbf{J}\)</span> is a matrix full of ones of the same dimensions as <span class="math inline">\(\mathbf{A}\)</span> and <span class="math inline">\(\bullet\)</span> indicates element-wise matrix multiplication.</p>
<p>A simple function that does this looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>   ego.bet <span class="ot">&lt;-</span> <span class="cf">function</span>(x, n) {</span>
<span id="cb30-2"><a href="#cb30-2"></a>      N <span class="ot">&lt;-</span> <span class="fu">neighbors</span>(x, n)</span>
<span id="cb30-3"><a href="#cb30-3"></a>      alter.net <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(x, <span class="fu">c</span>(n, <span class="fu">names</span>(N)))</span>
<span id="cb30-4"><a href="#cb30-4"></a>      A <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(alter.net))</span>
<span id="cb30-5"><a href="#cb30-5"></a>      A2 <span class="ot">&lt;-</span> A <span class="sc">%*%</span> A</span>
<span id="cb30-6"><a href="#cb30-6"></a>      J <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(A), <span class="fu">ncol</span>(A))</span>
<span id="cb30-7"><a href="#cb30-7"></a>      cb <span class="ot">&lt;-</span> A2 <span class="sc">*</span> (J <span class="sc">-</span> A)</span>
<span id="cb30-8"><a href="#cb30-8"></a>      cb <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>cb</span>
<span id="cb30-9"><a href="#cb30-9"></a>      cb[<span class="fu">is.infinite</span>(cb)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb30-10"><a href="#cb30-10"></a>      cb <span class="ot">&lt;-</span> <span class="fu">sum</span>(cb[<span class="fu">upper.tri</span>(cb)])</span>
<span id="cb30-11"><a href="#cb30-11"></a>      <span class="fu">return</span>(cb)</span>
<span id="cb30-12"><a href="#cb30-12"></a>   }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see how it works for Luke:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>   <span class="fu">round</span>(<span class="fu">ego.bet</span>(g, <span class="st">"LUKE"</span>), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 45.92</code></pre>
</div>
</div>
<p>Which says that Luke has pretty high ego-network betweenness.</p>
<p>We can, of course, compute it for everyone in the network like before:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>   <span class="fu">round</span>(<span class="fu">sapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, ego.bet, <span class="at">x =</span> g), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      R2-D2   CHEWBACCA       C-3PO        LUKE DARTH VADER       CAMIE 
       3.33        0.00        5.42       45.92        1.00        0.00 
      BIGGS        LEIA        BERU        OWEN     OBI-WAN       MOTTI 
       5.58       25.83        0.25        0.00        2.50        0.00 
     TARKIN         HAN     DODONNA GOLD LEADER       WEDGE  RED LEADER 
       0.00        0.00        0.00        0.67        0.67        3.83 
    RED TEN 
       0.00 </code></pre>
</div>
</div>
<p>Which confirms our original impression of Luke as the highest ego-network betweenness character with Leia in second place.</p>
<p>What does it mean to have an ego-network betweenness of zero? Well, this is only possible if your clustering coefficient is 1.0, that is, when all of your alters are directly connected to one another. This is evident in Chewbacca’s ego network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>   N <span class="ot">&lt;-</span> <span class="fu">neighbors</span>(g, <span class="st">"CHEWBACCA"</span>)</span>
<span id="cb35-2"><a href="#cb35-2"></a>   chew <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, <span class="fu">c</span>(<span class="st">"CHEWBACCA"</span>, <span class="fu">names</span>(N)))</span>
<span id="cb35-3"><a href="#cb35-3"></a>   <span class="fu">V</span>(chew)<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">2</span>, <span class="fu">vcount</span>(chew))</span>
<span id="cb35-4"><a href="#cb35-4"></a>   <span class="fu">V</span>(chew)<span class="sc">$</span>color[<span class="fu">which</span>(<span class="fu">V</span>(chew)<span class="sc">$</span>name <span class="sc">==</span> <span class="st">"CHEWBACCA"</span>)] <span class="ot">&lt;-</span> <span class="dv">1</span> </span>
<span id="cb35-5"><a href="#cb35-5"></a>   <span class="fu">plot</span>(chew, </span>
<span id="cb35-6"><a href="#cb35-6"></a>     <span class="at">vertex.size=</span><span class="dv">10</span>, <span class="at">vertex.frame.color=</span><span class="st">"lightgray"</span>, </span>
<span id="cb35-7"><a href="#cb35-7"></a>     <span class="at">vertex.label.dist=</span><span class="dv">2</span>, </span>
<span id="cb35-8"><a href="#cb35-8"></a>     <span class="at">layout =</span> <span class="fu">layout_as_star</span>(chew, <span class="at">center =</span> <span class="st">"CHEWBACCA"</span>),</span>
<span id="cb35-9"><a href="#cb35-9"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">1.25</span>, <span class="at">edge.color =</span> <span class="st">"lightgray"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Chewbacca’s Ego Network.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Which is a complete clique of size seven.</p>
</section>
</section>
<section id="compositional-measures" class="level2">
<h2 class="anchored" data-anchor-id="compositional-measures">Compositional Measures</h2>
<section id="ego-network-diversity" class="level3">
<h3 class="anchored" data-anchor-id="ego-network-diversity">Ego Network Diversity</h3>
<p>If we have information on the categorical vertex attributes of ego’s alters we may be interested in how diverse are ego’s choices across those attributes.</p>
<p>The most common measure is <strong>Blau’s Diversity Index</strong> (<span class="math inline">\(H\)</span>). For a categorical attribute with <span class="math inline">\(m\)</span> levels, this is given by:</p>
<p><span class="math display">\[
H = 1 - \sum_{k=1}^m p_k^2
\]</span></p>
<p>Where <span class="math inline">\(p_k\)</span> is the proportion of ego’s alters that fall under category level <span class="math inline">\(k\)</span>.</p>
<p>The <span class="math inline">\(H\)</span> measure ranges from a minimum of <span class="math inline">\(H = 0\)</span> (all of ego’s alters belong to a single category) to a maximum of <span class="math inline">\(H = 1- \frac{1}{m}\)</span> (all of ego’s alters belong to a different category).</p>
<p>When the Blau diversity index is normalized by its theoretical maximum, it is sometimes referred to as the <strong>Index of Qualitative Variation</strong> or <span class="math inline">\(IQV\)</span>:</p>
<p><span class="math display">\[
IQV = \frac{1 - \sum_{k=1}^m p_k^2}{1-\frac{1}{m}}
\]</span></p>
<p>The main difference between <span class="math inline">\(H\)</span> and <span class="math inline">\(IQV\)</span> is that the latter has a maximum of <span class="math inline">\(IQV = 1.0\)</span> indicating the top diversity that can be observed for a categorical attribute with <span class="math inline">\(m\)</span> categories.</p>
<p>Let’s see how this would work.</p>
<p>First, let’s switch to the <em>Attack of the Clones</em> Star Wars graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>   g <span class="ot">&lt;-</span> starwars[[<span class="dv">2</span>]]</span>
<span id="cb36-2"><a href="#cb36-2"></a>   g <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(g, <span class="fu">degree</span>(g)<span class="sc">&gt;</span> <span class="dv">1</span>) <span class="co">#removing singletons</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we will pick the vertex attribute <code>homeworld</code> and try to measure how diverse is each character’s ego network on this score.</p>
<p>To do that, we need to get the proportion of characters from each homeworld in the network.</p>
<p>Let’s check out this vertex attribute:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>   <span class="fu">V</span>(g)<span class="sc">$</span>homeworld</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Naboo"          "Naboo"          "Naboo"          NA              
 [5] NA               "Haruun Kal"     NA               "Cerea"         
 [9] "Alderaan"       "Naboo"          "Stewjon"        "Tatooine"      
[13] "Naboo"          NA               NA               NA              
[17] "Kamino"         "Kamino"         "Kamino"         "Concord Dawn"  
[21] "Tatooine"       "Tatooine"       "Tatooine"       "Tatooine"      
[25] "Serenno"        NA               "Geonosis"       "Cato Neimoidia"</code></pre>
</div>
</div>
<p>There are some <code>NA</code> values here, so let’s create a residual category called “other”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>   <span class="fu">V</span>(g)<span class="sc">$</span>homeworld[<span class="fu">is.na</span>(<span class="fu">V</span>(g)<span class="sc">$</span>homeworld)] <span class="ot">&lt;-</span> <span class="st">"Other"</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>   <span class="fu">V</span>(g)<span class="sc">$</span>homeworld</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Naboo"          "Naboo"          "Naboo"          "Other"         
 [5] "Other"          "Haruun Kal"     "Other"          "Cerea"         
 [9] "Alderaan"       "Naboo"          "Stewjon"        "Tatooine"      
[13] "Naboo"          "Other"          "Other"          "Other"         
[17] "Kamino"         "Kamino"         "Kamino"         "Concord Dawn"  
[21] "Tatooine"       "Tatooine"       "Tatooine"       "Tatooine"      
[25] "Serenno"        "Other"          "Geonosis"       "Cato Neimoidia"</code></pre>
</div>
</div>
<p>Great! Now we can use the native <code>R</code> function <code>table</code> to get the relevant proportions.</p>
<p>The function <code>table</code> gives us the count of characters in each category, and then we divide by the total number of actors in the network, given by <code>vcount</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>   p.hw <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">table</span>(<span class="fu">V</span>(g)<span class="sc">$</span>homeworld)<span class="sc">/</span><span class="fu">vcount</span>(g), <span class="dv">3</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a>   p.hw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Alderaan Cato Neimoidia          Cerea   Concord Dawn       Geonosis 
         0.036          0.036          0.036          0.036          0.036 
    Haruun Kal         Kamino          Naboo          Other        Serenno 
         0.036          0.107          0.179          0.250          0.036 
       Stewjon       Tatooine 
         0.036          0.179 </code></pre>
</div>
</div>
<p>Now that we know how to get the proportions we need, we can write a custom function that will compute <span class="math inline">\(H\)</span> (or its normalized counterpart the <span class="math inline">\(IQV\)</span>) for a given ego network for any given attribute:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>   blau <span class="ot">&lt;-</span> <span class="cf">function</span>(n, w, a, <span class="at">norm =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb43-2"><a href="#cb43-2"></a>      x <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(w, <span class="fu">neighbors</span>(w, n)) <span class="co">#ego subgraph</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>      p <span class="ot">&lt;-</span> <span class="fu">table</span>(<span class="fu">vertex_attr</span>(x, a))<span class="sc">/</span><span class="fu">vcount</span>(x) <span class="co">#proportion of alters in each category of the attribute a</span></span>
<span id="cb43-4"><a href="#cb43-4"></a>      m <span class="ot">&lt;-</span> <span class="fu">length</span>(p)</span>
<span id="cb43-5"><a href="#cb43-5"></a>      res <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(p<span class="sc">^</span><span class="dv">2</span>) <span class="co">#blau diversity</span></span>
<span id="cb43-6"><a href="#cb43-6"></a>      <span class="cf">if</span> (norm <span class="sc">==</span> <span class="cn">TRUE</span>) {res <span class="ot">&lt;-</span> res <span class="sc">/</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="dv">1</span><span class="sc">/</span>m)} <span class="co">#IQV</span></span>
<span id="cb43-7"><a href="#cb43-7"></a>      <span class="fu">return</span>(res)</span>
<span id="cb43-8"><a href="#cb43-8"></a>      }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This function takes three inputs: The name of the ego <code>n</code>, the graph object <code>w</code>, and the name of the attribute <code>a</code>. It returns the Blau diversity index score for that ego on that attribute by default; when <code>norm</code> is set to <code>TRUE</code> it returns the normalized Blau score (a.k.a. the <span class="math inline">\(IQV\)</span>).</p>
<p>Let’s see Padme’s Home World ego network diversity score:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>   <span class="fu">round</span>(<span class="fu">blau</span>(<span class="st">"PADME"</span>, g, <span class="st">"homeworld"</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.796</code></pre>
</div>
</div>
<p>Which says that Padme has a fairly diverse ego network when it comes to Home World.</p>
<p>We can, of course, just use <code>sapply</code> to compute everyone’s Home World ego network diversity score:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>   <span class="fu">round</span>(<span class="fu">sapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, blau, <span class="at">w =</span> g, <span class="at">a =</span> <span class="st">"homeworld"</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          R2-D2   CAPTAIN TYPHO         EMPEROR SENATOR ASK AAK    ORN FREE TAA 
          0.444           0.667           0.815           0.776           0.444 
     MACE WINDU            YODA    KI-ADI-MUNDI     BAIL ORGANA         JAR JAR 
          0.820           0.840           0.750           0.776           0.780 
        OBI-WAN          ANAKIN           PADME            SOLA           JOBAL 
          0.858           0.809           0.796           0.625           0.625 
          RUWEE         TAUN WE         LAMA SU       BOBA FETT      JANGO FETT 
          0.625           0.625           0.500           0.667           0.625 
          C-3PO            OWEN            BERU          CLIEGG     COUNT DOOKU 
          0.444           0.320           0.320           0.320           0.860 
        SUN RIT          POGGLE     NUTE GUNRAY 
          0.833           0.833           0.833 </code></pre>
</div>
</div>
<p>In this network Count Dooku stands out as having a very diverse ego network by Home World, while Owen sports a very homogeneous ego network on the same attribute.</p>
<p>Let’s see a side-by-side comparison:</p>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="ego_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="768"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="ego_files/figure-html/unnamed-chunk-30-2.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Two Ego Networks with Nodes Colored by Homeworld</p>
</div>
</div>
</div>
<p>And here are the corresponding <span class="math inline">\(IQV\)</span> scores for everyone in the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>   <span class="fu">round</span>(<span class="fu">sapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, blau, <span class="at">w =</span> g, </span>
<span id="cb48-2"><a href="#cb48-2"></a>                <span class="at">a =</span> <span class="st">"homeworld"</span>, <span class="at">norm =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          R2-D2   CAPTAIN TYPHO         EMPEROR SENATOR ASK AAK    ORN FREE TAA 
          0.889           1.000           0.951           0.969           0.889 
     MACE WINDU            YODA    KI-ADI-MUNDI     BAIL ORGANA         JAR JAR 
          0.957           0.960           1.000           0.969           0.936 
        OBI-WAN          ANAKIN           PADME            SOLA           JOBAL 
          0.953           0.924           0.910           0.937           0.937 
          RUWEE         TAUN WE         LAMA SU       BOBA FETT      JANGO FETT 
          0.937           0.937           1.000           1.000           0.937 
          C-3PO            OWEN            BERU          CLIEGG     COUNT DOOKU 
          0.889           0.640           0.640           0.640           0.983 
        SUN RIT          POGGLE     NUTE GUNRAY 
          1.000           1.000           1.000 </code></pre>
</div>
</div>
<p>As we noted an ego network with maximum diversity <span class="math inline">\(IQV = 1.0\)</span> is one where every alter is in a different category. Here are two examples:</p>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="ego_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="768"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="ego_files/figure-html/unnamed-chunk-32-2.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Two Ego Networks with Maximum Homeworld Diversity.</p>
</div>
</div>
</div>
<section id="ego-network-homophily" class="level4">
<h4 class="anchored" data-anchor-id="ego-network-homophily">Ego Network Homophily</h4>
<p>Diversity measures the extent to which ego’s connect to alters who are the same or different from <em>one another</em>. We may also want to get a sense of how <em>homophilous</em> an ego network is, namely, the extent to which ego connects to alters that are the same or different from <em>them</em>.</p>
<p>For instance, a person can have an ego network composed of 100% alters who are different from them on a given attribute (maximum “heterophily”) but those alters could be 100% homogeneous—e.g., all come from the same planet—and thus ego will have the <em>minimum</em> Blau diversity score (<span class="math inline">\(H = 0\)</span>).</p>
<p>To measure homophily in the ego network we use the <strong>EI homophily index</strong>. This is given by:</p>
<p><span class="math display">\[
EI = \frac{E-I}{E+I}
\]</span></p>
<p>Where <span class="math inline">\(E\)</span> is the number of “external” ties (alter different from ego on attribute), and <span class="math inline">\(I\)</span> is the number of “internal” ties (alter same as ego on attribute).</p>
<p>The <span class="math inline">\(EI\)</span> index ranges from a minimum of <span class="math inline">\(EI = -1\)</span>, indicating maximum homophily, to a maximum of <span class="math inline">\(EI = 1\)</span>, indicating maximum heterophily. An EI index value of zero indicates no preference for internal over external ties.</p>
<p>So let’s write a function that does what we want to calculate EI:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>   EI <span class="ot">&lt;-</span> <span class="cf">function</span>(n, w, a) {</span>
<span id="cb50-2"><a href="#cb50-2"></a>      x <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(w, <span class="fu">neighbors</span>(w, n))</span>
<span id="cb50-3"><a href="#cb50-3"></a>      E <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">vertex_attr</span>(w, a, n) <span class="sc">!=</span> <span class="fu">vertex_attr</span>(x, a)) <span class="co">#n. external ties</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>      I <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">vertex_attr</span>(w, a, n) <span class="sc">==</span> <span class="fu">vertex_attr</span>(x, a))  <span class="co">#n. internal ties</span></span>
<span id="cb50-5"><a href="#cb50-5"></a>      res <span class="ot">=</span> (E <span class="sc">-</span> I)<span class="sc">/</span>(E <span class="sc">+</span> I) <span class="co">#EI Index</span></span>
<span id="cb50-6"><a href="#cb50-6"></a>      <span class="fu">return</span>(res)</span>
<span id="cb50-7"><a href="#cb50-7"></a>      }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s look at the attribute <code>sex</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>   <span class="fu">V</span>(g)<span class="sc">$</span>sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "none"   "male"   "male"   NA       NA       "male"   "male"   "male"  
 [9] "male"   "male"   "male"   "male"   "female" NA       NA       NA      
[17] "female" "male"   "male"   "male"   "none"   "male"   "female" "male"  
[25] "male"   NA       "male"   "male"  </code></pre>
</div>
</div>
<p>Getting rid of the <code>NA</code> values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>   <span class="fu">V</span>(g)<span class="sc">$</span>sex[<span class="fu">is.na</span>(<span class="fu">V</span>(g)<span class="sc">$</span>sex)] <span class="ot">&lt;-</span> <span class="st">"Other"</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>   <span class="fu">V</span>(g)<span class="sc">$</span>sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "none"   "male"   "male"   "Other"  "Other"  "male"   "male"   "male"  
 [9] "male"   "male"   "male"   "male"   "female" "Other"  "Other"  "Other" 
[17] "female" "male"   "male"   "male"   "none"   "male"   "female" "male"  
[25] "male"   "Other"  "male"   "male"  </code></pre>
</div>
</div>
<p>And calculating the homophily index on gender for everyone:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>   EI <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, EI, <span class="at">w =</span> g, <span class="at">a =</span> <span class="st">"sex"</span>)</span>
<span id="cb55-2"><a href="#cb55-2"></a>   <span class="fu">round</span>(EI, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          R2-D2   CAPTAIN TYPHO         EMPEROR SENATOR ASK AAK    ORN FREE TAA 
           0.33           -1.00           -0.56            0.71            0.33 
     MACE WINDU            YODA    KI-ADI-MUNDI     BAIL ORGANA         JAR JAR 
          -0.60           -0.60           -1.00           -0.71           -0.40 
        OBI-WAN          ANAKIN           PADME            SOLA           JOBAL 
          -0.53           -0.11            0.88            0.00            0.00 
          RUWEE         TAUN WE         LAMA SU       BOBA FETT      JANGO FETT 
           0.00            1.00            0.00           -0.33           -0.50 
          C-3PO            OWEN            BERU          CLIEGG     COUNT DOOKU 
           0.67            0.20            0.60            0.20           -0.60 
        SUN RIT          POGGLE     NUTE GUNRAY 
           1.00           -0.33           -0.33 </code></pre>
</div>
</div>
<p>As we can see, the Emperor, Mace Windu, Obi-Wan and other such characters have a homophilous “bro” network. Padme, on the other hand, has a heterophilous network with respect to gender.</p>
<p>Let’s see a side-by-side comparison:</p>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">H = -0.60</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-37-2.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">H = 0.88</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Two Ego Networks with Nodes Colored by Gender</p>
</div>
</div>
</div>
<p>As we can see, Mace Windu is mostly surrounded by other men (like him) but Padme’s network includes only one other woman, and the rest are composed of people with a different gender presentation than her (or have no discernible gender like the droids).</p>
<p>Like the clustering coefficient, we can compute a graph level index of homophily on a given attribute. This is given by the average EI index of nodes in the graph for that attribute.</p>
<p>In the case of gender in <em>Attack of the Clones</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>   EI.gender <span class="ot">=</span> <span class="fu">mean</span>(EI)</span>
<span id="cb57-2"><a href="#cb57-2"></a>   <span class="fu">round</span>(EI.gender, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.06</code></pre>
</div>
</div>
<p>Which shows a slight preference for same-gender ties in the network.</p>
</section>
<section id="normalized-ei" class="level4">
<h4 class="anchored" data-anchor-id="normalized-ei">Normalized EI</h4>
<p>Sometimes we may want to take into account that the group sizes of different categories of people is unequal in the network. For instance, Star Wars is full characters gendered as men, which means that any homophily index will penalize men as being more homophilous simply because there are more men around to form ties with.</p>
<p><span class="citation" data-cites="everett_borgatti12">Everett and Borgatti (<a href="#ref-everett_borgatti12" role="doc-biblioref">2012, 564–65</a>)</span> propose approach to normalizing the EI index to account for unequal group sizes, yielding the <span class="math inline">\(NEI\)</span>. So instead of computing EI they suggest calculating:</p>
<p><span class="math display">\[
E^* = \frac{E}{N-Ns}
\]</span></p>
<p><span class="math display">\[
I^* = \frac{I}{Ns}
\]</span></p>
<p><span class="math display">\[
NEI = \frac{E^*-I^*}{E^*+I^*}
\]</span></p>
<p>With <span class="math inline">\(N_s\)</span> being the number of “similar” nodes to ego in the whole graph (or external population) and <span class="math inline">\(N\)</span> being the total number of nodes (or persons in the population). As you can see, the <span class="math inline">\(NEI\)</span> weights both the number of external and <span class="math inline">\(E\)</span> the number of internal ties <span class="math inline">\(I\)</span> by their maximum possible values in the network.</p>
<p>Here’s a function that does that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>   NEI <span class="ot">&lt;-</span> <span class="cf">function</span>(n, w, a) {</span>
<span id="cb59-2"><a href="#cb59-2"></a>      N <span class="ot">&lt;-</span> <span class="fu">vcount</span>(w) </span>
<span id="cb59-3"><a href="#cb59-3"></a>      Ns <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">vertex_attr</span>(w, a) <span class="sc">==</span> <span class="fu">vertex_attr</span>(w, a, n))</span>
<span id="cb59-4"><a href="#cb59-4"></a>      x <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(w, <span class="fu">neighbors</span>(w, n))</span>
<span id="cb59-5"><a href="#cb59-5"></a>      E <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">vertex_attr</span>(w, a, n) <span class="sc">!=</span> <span class="fu">vertex_attr</span>(x, a)) </span>
<span id="cb59-6"><a href="#cb59-6"></a>      I <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">vertex_attr</span>(w, a, n) <span class="sc">==</span> <span class="fu">vertex_attr</span>(x, a)) </span>
<span id="cb59-7"><a href="#cb59-7"></a>      E <span class="ot">&lt;-</span> E<span class="sc">/</span>(N <span class="sc">-</span> Ns) <span class="co">#normalized E</span></span>
<span id="cb59-8"><a href="#cb59-8"></a>      I <span class="ot">&lt;-</span> I<span class="sc">/</span>Ns <span class="co">#normalized I</span></span>
<span id="cb59-9"><a href="#cb59-9"></a>      res <span class="ot">=</span> (E <span class="sc">-</span> I)<span class="sc">/</span>(E <span class="sc">+</span> I)</span>
<span id="cb59-10"><a href="#cb59-10"></a>      <span class="fu">return</span>(res)</span>
<span id="cb59-11"><a href="#cb59-11"></a>   }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s re-check Mace Windu’s and Padme’s EI index using the normalized version:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>   <span class="fu">round</span>(<span class="fu">NEI</span>(<span class="st">"MACE WINDU"</span>, g, <span class="st">"sex"</span>), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.44</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>   <span class="fu">round</span>(<span class="fu">NEI</span>(<span class="st">"PADME"</span>, g, <span class="st">"sex"</span>), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.32</code></pre>
</div>
</div>
<p>As we can see the NEI scores are less extreme than the unnormalized ones, once we take into account that the majority of characters in the film are men.</p>
<p>Here are the NEI scores with respect to gender for everyone:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>   NEI <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, NEI, <span class="at">w =</span> g, <span class="at">a =</span> <span class="st">"sex"</span>)</span>
<span id="cb64-2"><a href="#cb64-2"></a>   <span class="fu">round</span>(NEI, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          R2-D2   CAPTAIN TYPHO         EMPEROR SENATOR ASK AAK    ORN FREE TAA 
          -0.73           -1.00           -0.39            0.24           -0.29 
     MACE WINDU            YODA    KI-ADI-MUNDI     BAIL ORGANA         JAR JAR 
          -0.44           -0.44           -1.00           -0.59           -0.20 
        OBI-WAN          ANAKIN           PADME            SOLA           JOBAL 
          -0.36            0.11            0.32           -0.57           -0.57 
          RUWEE         TAUN WE         LAMA SU       BOBA FETT      JANGO FETT 
          -0.57            1.00            0.21           -0.13           -0.32 
          C-3PO            OWEN            BERU          CLIEGG     COUNT DOOKU 
          -0.44            0.40           -0.35            0.40           -0.44 
        SUN RIT          POGGLE     NUTE GUNRAY 
           1.00           -0.13           -0.13 </code></pre>
</div>
</div>
<p>Interestingly, while most people’s scores are attenuated towards zero in the normalized scale, R2-D2’s becomes more extreme going from weakly positive (demonstrating “gender” heterophily) to extreme negative (showing same “gender” preference).</p>
<p>Let’s see what’s going on:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="480"></p>
<p></p><figcaption class="figure-caption">R2-D2’s Ego Network with Nodes Colored by Gender</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Here we can see that the reason why R2-D2 ends up being high in homophily in the NEI despite containing a network with just three nodes and only a single “same-gender” (i.e., none) tie, is that he is connected to C3PO who is the only other character (a droid) whose gender is also assigned to “none.”</p>
<p>And here’s the graph’s overall NEI:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>   NEI.gender <span class="ot">=</span> <span class="fu">mean</span>(NEI)</span>
<span id="cb66-2"><a href="#cb66-2"></a>   <span class="fu">round</span>(NEI.gender, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.19</code></pre>
</div>
</div>
<p>Which shows that our previous unnormalized average under-estimated homophily in this network. Instead, there is a moderately strong tendency for characters to co-appear with others of the same gender classification once the imbalance favoring men is accounted for.</p>
</section>
</section>
<section id="other-ways-of-accounting-for-imbalanced-group-sizes-in-homophily-metrics" class="level3">
<h3 class="anchored" data-anchor-id="other-ways-of-accounting-for-imbalanced-group-sizes-in-homophily-metrics">Other Ways of Accounting for Imbalanced Group Sizes in Homophily Metrics</h3>
<p>As may already be evident, when constructing a homophily measure that takes into account the population (or local network) proportions of various types of alters, there are four pieces of information that we have to take into account:</p>
<ol type="a">
<li>Number of alters linked to ego of the same category as ego.</li>
<li>Number of alters linked to ego of a different category from ego.</li>
<li>Number of alters not linked to ego of the same category as ego.</li>
<li>Number of alters not linked to ego of a different category from ego.</li>
</ol>
<p>Which yields a classic 2 by 2 table.</p>
<p>Here’s a function that produces such a table for each ego for a given attribute:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>   abcd <span class="ot">&lt;-</span> <span class="cf">function</span>(n, w, a) {</span>
<span id="cb68-2"><a href="#cb68-2"></a>      x <span class="ot">&lt;-</span> <span class="fu">subgraph</span>(w, <span class="fu">neighbors</span>(w, n))</span>
<span id="cb68-3"><a href="#cb68-3"></a>      same <span class="ot">&lt;-</span> <span class="fu">vertex_attr</span>(w, a, n) <span class="sc">==</span> <span class="fu">vertex_attr</span>(w, a)</span>
<span id="cb68-4"><a href="#cb68-4"></a>      same <span class="ot">&lt;-</span> same[<span class="sc">!</span>(same <span class="sc">%in%</span> n)] <span class="co">#deleting ego node from vector</span></span>
<span id="cb68-5"><a href="#cb68-5"></a>      tied <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">V</span>(w)<span class="sc">$</span>name) <span class="sc">%in%</span> <span class="fu">names</span>(<span class="fu">neighbors</span>(w, n))</span>
<span id="cb68-6"><a href="#cb68-6"></a>      tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tied, same)</span>
<span id="cb68-7"><a href="#cb68-7"></a>      tab <span class="ot">&lt;-</span> tab[<span class="dv">2</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">1</span>] <span class="co">#reversing row and column order of table</span></span>
<span id="cb68-8"><a href="#cb68-8"></a>      <span class="fu">return</span>(tab)</span>
<span id="cb68-9"><a href="#cb68-9"></a>   }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So for Count Dooku with respect to gender, this 2 X 2 table looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>   <span class="fu">abcd</span>(<span class="st">"COUNT DOOKU"</span>, g, <span class="st">"sex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       same
tied    TRUE FALSE
  TRUE     8     2
  FALSE    9     9</code></pre>
</div>
</div>
<p>So here we can see that Dooku is linked to eight others of the same gender, but there are nine other men he’s not linked to. In the same way, he has two different-gender ties, but there are nine others of a different gender he’s not tied to.</p>
<p>As <span class="citation" data-cites="everett_borgatti12">Everett and Borgatti (<a href="#ref-everett_borgatti12" role="doc-biblioref">2012</a>)</span> note, we can label the cells of the 2 X 2 EI table with the letters from the above list to highlight each piece of information in each cell:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>       same
tied    TRUE FALSE
  TRUE  a    b    
  FALSE c    d    </code></pre>
</div>
</div>
<p>Using this nomenclature, the EI index is given by:</p>
<p><span class="math display">\[
EI = \frac{a-b}{a+b}
\]</span></p>
<p>It is clear that the EI only uses information only from the first row (alters tied to ego) and is thus sensitive to group size imbalances because it ignores the other pieces of information (<span class="math inline">\(c\)</span> and <span class="math inline">\(d\)</span>).</p>
<p>The NEI, on the other hand, using the same 2 X 2 table cell coding, is given by:</p>
<p><span class="math display">\[
NEI =  \frac{\left(\frac{a}{a+c}\right)-\left(\frac{b}{b+d}\right)}{\left(\frac{a}{a+c}\right)+\left(\frac{b}{b+d}\right)}
\]</span></p>
<p>Which makes clear that NEI uses information from all four cells therefore, it is insensitive to group size imbalances.</p>
<p>Other measures of homophily could thus be constructed from the entries in the 2 X 2 table, that, like the NEI, are not sensitive to group sizes because they use all four pieces of information.</p>
<section id="the-point-biserial-correlation" class="level4">
<h4 class="anchored" data-anchor-id="the-point-biserial-correlation">The Point Biserial Correlation</h4>
<p>One such measure <span class="citation" data-cites="everett_borgatti12">Everett and Borgatti (<a href="#ref-everett_borgatti12" role="doc-biblioref">2012, 565</a>)</span> recommend is the <strong>point biserial correlation coefficient</strong> (<span class="math inline">\(r^{pb}\)</span>), which is given, using the cell labels in the table above, by:</p>
<p><span class="math display">\[
r^{pb} = \frac{ad-bc}{\sqrt{(a+c)(b+d)(a+b)(c+d))}}
\]</span></p>
<p>From the formula it is clear that <span class="math inline">\(r^{pb}\)</span> is positive whenever ego is connected to similar alters and disconnected from non-similar ones (the numbers in the main diagonals of the 2 X 2 table, <span class="math inline">\(a\)</span> and <span class="math inline">\(d\)</span>, are big). In this way, the <span class="math inline">\(r^{pb}\)</span> works just like a correlation coefficient. A value 1.0 indicates maximum preference for same category alters, and a value closer to -1.0 indicates preference to connect with people different from ego.</p>
<p>A function that computes <span class="math inline">\(r^{pb}\)</span> from the output of <code>abcd</code> above is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>   pb.corr <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb72-2"><a href="#cb72-2"></a>      a <span class="ot">&lt;-</span> x[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb72-3"><a href="#cb72-3"></a>      b <span class="ot">&lt;-</span> x[<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb72-4"><a href="#cb72-4"></a>      c <span class="ot">&lt;-</span> x[<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb72-5"><a href="#cb72-5"></a>      d <span class="ot">&lt;-</span> x[<span class="dv">2</span>,<span class="dv">2</span>]</span>
<span id="cb72-6"><a href="#cb72-6"></a>   num <span class="ot">&lt;-</span> (a<span class="sc">*</span>d <span class="sc">-</span> b<span class="sc">*</span>c)</span>
<span id="cb72-7"><a href="#cb72-7"></a>   den <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((a<span class="sc">+</span>c)<span class="sc">*</span>(b<span class="sc">+</span>d)<span class="sc">*</span>(a<span class="sc">+</span>b)<span class="sc">*</span>(c<span class="sc">+</span>d))</span>
<span id="cb72-8"><a href="#cb72-8"></a>   <span class="fu">return</span>(num<span class="sc">/</span>den)</span>
<span id="cb72-9"><a href="#cb72-9"></a>   }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Dooku, <span class="math inline">\(r^{pb}\)</span> is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>   <span class="fu">round</span>(<span class="fu">pb.corr</span>(<span class="fu">abcd</span>(<span class="st">"COUNT DOOKU"</span>, g, <span class="st">"sex"</span>)), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.29</code></pre>
</div>
</div>
<p>Which shows a positive tendency for same gender ties, net of the imbalance between men and other-gendered characters in the film.</p>
<p>To calculate <span class="math inline">\(r^{pb}\)</span> for the whole network, first we need to create a list containing the corresponding 2 X 2 EI tables for each node for the gender attribute:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>   abcd.gender <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">V</span>(g)<span class="sc">$</span>name, abcd, <span class="at">w =</span> g, <span class="at">a =</span> <span class="st">"sex"</span>)</span>
<span id="cb75-2"><a href="#cb75-2"></a>   <span class="fu">names</span>(abcd.gender) <span class="ot">&lt;-</span> <span class="fu">V</span>(g)<span class="sc">$</span>name</span>
<span id="cb75-3"><a href="#cb75-3"></a>   <span class="fu">head</span>(abcd.gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`R2-D2`
       same
tied    TRUE FALSE
  TRUE     1     2
  FALSE    1    24

$`CAPTAIN TYPHO`
       same
tied    TRUE FALSE
  TRUE     3     0
  FALSE   14    11

$EMPEROR
       same
tied    TRUE FALSE
  TRUE     7     2
  FALSE   10     9

$`SENATOR ASK AAK`
       same
tied    TRUE FALSE
  TRUE     1     6
  FALSE    5    16

$`ORN FREE TAA`
       same
tied    TRUE FALSE
  TRUE     1     2
  FALSE    5    20

$`MACE WINDU`
       same
tied    TRUE FALSE
  TRUE     8     2
  FALSE    9     9</code></pre>
</div>
</div>
<p>And then <code>sapply</code> the function <code>pb.corr</code> to each element of this list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>   PBC <span class="ot">&lt;-</span> <span class="fu">sapply</span>(abcd.gender, pb.corr)</span>
<span id="cb77-2"><a href="#cb77-2"></a>   <span class="fu">round</span>(PBC, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          R2-D2   CAPTAIN TYPHO         EMPEROR SENATOR ASK AAK    ORN FREE TAA 
           0.35            0.28            0.24           -0.10            0.10 
     MACE WINDU            YODA    KI-ADI-MUNDI     BAIL ORGANA         JAR JAR 
           0.29            0.29            0.33            0.30            0.14 
        OBI-WAN          ANAKIN           PADME            SOLA           JOBAL 
           0.40           -0.14           -0.19            0.28            0.28 
          RUWEE         TAUN WE         LAMA SU       BOBA FETT      JANGO FETT 
           0.28           -0.14           -0.06            0.04            0.12 
          C-3PO            OWEN            BERU          CLIEGG     COUNT DOOKU 
           0.19           -0.20            0.14           -0.20            0.29 
        SUN RIT          POGGLE     NUTE GUNRAY 
          -0.27            0.06            0.06 </code></pre>
</div>
</div>
<p>Which shows that, after accounting for group sizes, most characters display slight to moderate preferences for same-gender ties, with the exception of Anakin, Padme, Taun We, Owen, Clegg, and Sun Rit.</p>
<p>If we wanted to see what proportion of nodes have a same-gender preference we just type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>   <span class="fu">round</span>(<span class="fu">sum</span>(PBC <span class="sc">&gt;</span> <span class="dv">0</span>)<span class="sc">/</span><span class="fu">length</span>(PBC), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.71</code></pre>
</div>
</div>
<p>Which suggest that about 70% of the characters display a tendency to appear with same gender others (accounting for differences in the sizes of different gender groups).</p>
<p>And at the network level, the point-biserial correlation homophily measure for gender is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>   <span class="fu">round</span>(<span class="fu">mean</span>(PBC), <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1139</code></pre>
</div>
</div>
<p>Which also suggests a slight preference for same gender ties in this network.</p>
</section>
<section id="yules-q" class="level4">
<h4 class="anchored" data-anchor-id="yules-q">Yule’s Q</h4>
<p>The point biserial correlation is a good measure of homiphily but comes at the expense of the simplicity of the EI index. If you favor a simpler approach that also makes us of all of the information in the 2 X 2 table, Yule’s <span class="math inline">\(Q\)</span> is a good option <span class="citation" data-cites="borgatti_etal24">(<a href="#ref-borgatti_etal24" role="doc-biblioref">Borgatti et al. 2024, 159</a>)</span>:</p>
<p><span class="math display">\[
Q = \frac{ad-bc}{ad+bc}
\]</span></p>
<p>Like <span class="math inline">\(r^{pb}\)</span>, <span class="math inline">\(Q\)</span> works like a correlation coefficient. It is at is maximum value of <span class="math inline">\(Q = 1\)</span> when ego has no connections to different-category others (<span class="math inline">\(b=0\)</span>)—maximum homophily—and it is at a minimum of <span class="math inline">\(Q = -1\)</span> when ego has no connections to same-category others (<span class="math inline">\(a=0\)</span>)—maximum heterophily.</p>
<p>A function to calculate <span class="math inline">\(Q\)</span> from the <code>abcd</code> function output is as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>   y.Q <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb83-2"><a href="#cb83-2"></a>      a <span class="ot">&lt;-</span> x[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb83-3"><a href="#cb83-3"></a>      b <span class="ot">&lt;-</span> x[<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb83-4"><a href="#cb83-4"></a>      c <span class="ot">&lt;-</span> x[<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb83-5"><a href="#cb83-5"></a>      d <span class="ot">&lt;-</span> x[<span class="dv">2</span>,<span class="dv">2</span>]</span>
<span id="cb83-6"><a href="#cb83-6"></a>   num <span class="ot">&lt;-</span> a<span class="sc">*</span>d <span class="sc">-</span> b<span class="sc">*</span>c</span>
<span id="cb83-7"><a href="#cb83-7"></a>   den <span class="ot">&lt;-</span> a<span class="sc">*</span>d <span class="sc">+</span> b<span class="sc">*</span>c</span>
<span id="cb83-8"><a href="#cb83-8"></a>   <span class="fu">return</span>(num<span class="sc">/</span>den)    </span>
<span id="cb83-9"><a href="#cb83-9"></a>   }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And here are the values for the <em>Attack of the Clones</em> network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a>   Q <span class="ot">&lt;-</span> <span class="fu">sapply</span>(abcd.gender, y.Q)</span>
<span id="cb84-2"><a href="#cb84-2"></a>   <span class="fu">round</span>(Q, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          R2-D2   CAPTAIN TYPHO         EMPEROR SENATOR ASK AAK    ORN FREE TAA 
           0.85            1.00            0.52           -0.30            0.33 
     MACE WINDU            YODA    KI-ADI-MUNDI     BAIL ORGANA         JAR JAR 
           0.60            0.60            1.00            0.69            0.30 
        OBI-WAN          ANAKIN           PADME            SOLA           JOBAL 
           0.70           -0.30           -0.56            0.67            0.67 
          RUWEE         TAUN WE         LAMA SU       BOBA FETT      JANGO FETT 
           0.67           -1.00           -0.23            0.14            0.36 
          C-3PO            OWEN            BERU          CLIEGG     COUNT DOOKU 
           0.62           -0.48            0.45           -0.48            0.60 
        SUN RIT          POGGLE     NUTE GUNRAY 
          -1.00            0.16            0.16 </code></pre>
</div>
</div>
<p>Let’s compare four egos with extreme values on <span class="math inline">\(Q\)</span>:</p>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Q = 1</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-55-2.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Q = -1</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-55-3.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Q = -1</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ego_files/figure-html/unnamed-chunk-55-4.png" class="img-fluid figure-img" width="768"></p>
<p></p><figcaption class="figure-caption">Q = 1</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Two Ego Networks with Maximum and Minimum Q Values</p>
</div>
</div>
</div>
<p>As we can see, Ki-Adi-Mundi and Captain Typhoo have an ego network that combine maximum homophily and homogeneity with respect to gender (both ego networks are composed of all men)–and therefore both receive the minimum score of <span class="math inline">\(Q=-1\)</span>.</p>
<p>Taun We, on the other hand, has an ego network that combines maximum heterophily with maximum homogeneity of alters with respect to the same attribute (she has an all-men ego network), thus receiving the maximum <span class="math inline">\(Q=-1\)</span>. Sun Rit has some heterogeneity in their ego network, but because all alters are of a different gender category from them, they also receive a minimum score of <span class="math inline">\(Q=-1\)</span>.</p>
<p>The average value of <span class="math inline">\(Q\)</span> for the whole network is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>   <span class="fu">round</span>(<span class="fu">mean</span>(Q), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.24</code></pre>
</div>
</div>
<p>Which also suggests a slight same-gender preference in the network after accounting for imbalanced group sizes.</p>



</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-borgatti_etal24" class="csl-entry" role="doc-biblioentry">
Borgatti, Stephen P, Filip Agneessens, Jeffrey C Johnson, and Martin G Everett. 2024. <em>Analyzing Social Networks Using r</em>. SAGE publications Ltd.
</div>
<div id="ref-burt92" class="csl-entry" role="doc-biblioentry">
Burt, Ronald S. 1992. <em>Structural Holes</em>. Harvard University Press.
</div>
<div id="ref-everett_borgatti05" class="csl-entry" role="doc-biblioentry">
Everett, Martin, and Stephen P Borgatti. 2005. <span>“Ego Network Betweenness.”</span> <em>Social Networks</em> 27 (1): 31–38.
</div>
<div id="ref-everett_borgatti12" class="csl-entry" role="doc-biblioentry">
———. 2012. <span>“Categorical Attribute Based Centrality: E–i and g–f Centrality.”</span> <em>Social Networks</em> 34 (4): 562–69.
</div>
<div id="ref-gabasova16" class="csl-entry" role="doc-biblioentry">
Gabasova, Evelina. 2016. <span>“<span class="nocase">Star Wars social network</span>.”</span> <a href="https://doi.org/10.5281/zenodo.1411479">https://doi.org/10.5281/zenodo.1411479</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>