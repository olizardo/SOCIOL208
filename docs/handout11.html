<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SOCIOL 208 - Statistical Models of Networks III</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="SOCIOL 208 - Statistical Models of Networks III">
<meta property="og:description" content="In the previous handout we saw how to fit exponential random graph models (ergms) for simple undirected networks.">
<meta property="og:site-name" content="SOCIOL 208">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Statistical Models of Networks III</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SOCIOL 208</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">208A</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208A.html" class="sidebar-item-text sidebar-link">208A Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208A-F24.html" class="sidebar-item-text sidebar-link">SOCIOL 208A Reading Schedule (Fall 2024)</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Handouts</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout1.html" class="sidebar-item-text sidebar-link">Basic Network Statistics</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout2.html" class="sidebar-item-text sidebar-link">Centrality</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cube.html" class="sidebar-item-text sidebar-link">The Cube</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout3.html" class="sidebar-item-text sidebar-link">Status and Prestige</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout4.html" class="sidebar-item-text sidebar-link">Role Equivalence and Structural Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout5.html" class="sidebar-item-text sidebar-link">Vertex Similarity</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./blondel.html" class="sidebar-item-text sidebar-link">Role Similarity Across Graphs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout6.html" class="sidebar-item-text sidebar-link">Community Structure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ahn.html" class="sidebar-item-text sidebar-link">Assigning Nodes to Multiple Communities</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout7.html" class="sidebar-item-text sidebar-link">Analyzing Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ca.html" class="sidebar-item-text sidebar-link">Correspondence Analysis (CA) of Two-Mode Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spectral.html" class="sidebar-item-text sidebar-link">Community Detection Using Spectral Clustering</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout8.html" class="sidebar-item-text sidebar-link">Analyzing Ego Networks</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout9.html" class="sidebar-item-text sidebar-link">Statistical Models of Networks I</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout10.html" class="sidebar-item-text sidebar-link">Statistical Models of Networks II</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout11.html" class="sidebar-item-text sidebar-link active">Statistical Models of Networks III</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handout12.html" class="sidebar-item-text sidebar-link">Statistical Models of Networks IV</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">208B</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus-208B.html" class="sidebar-item-text sidebar-link">208B Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule-208B-S24.html" class="sidebar-item-text sidebar-link">SOCIOL 208B Reading Schedule (Spring 2024)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ergms-in-directed-networks" id="toc-ergms-in-directed-networks" class="nav-link active" data-scroll-target="#ergms-in-directed-networks">ERGMs in Directed Networks</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/olizardo/SOCIOL208/blob/main/handout11.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Statistical Models of Networks III</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In the previous handout we saw how to fit exponential random graph models (ergms) for simple undirected networks. As noted, these models are useful for <em>multivariate null hypothesis testing</em> using network data, answering questions of the form: Is this network statistic larger or smaller than I would expect by chance, after conditioning (e.g., “controling for”) these <em>other</em> network statistics?</p>
<p>The ergm modeling framework is pretty flexible, allowing you to test for the statistical significance of <em>any</em> network statistic you can imagine while holding constant a bunch of other ones.</p>
<p>Here we will see how to extend the ergm framework to other types of directed, two-mode, and temporal networks.</p>
<section id="ergms-in-directed-networks" class="level2">
<h2 class="anchored" data-anchor-id="ergms-in-directed-networks">ERGMs in Directed Networks</h2>
<p>The extension to the directed case is the most straightforward.</p>
<p>The key network statistic that we need to think about in the directed case is <strong>reciprocity</strong> or <strong>mutuality</strong>, namely, the fact that in the directed case, it is possible that I send a tie to you but you don’t send it back. In this advice network case this would happen if I seek advice from you, but you don’t seek advice from me.</p>
<p>In an ergm, we use the <code>mutual</code> term to condition on the number of dyads featuring arcs going on both directions (e.g., from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span> <em>and</em> from <span class="math inline">\(j\)</span> to <span class="math inline">\(i\)</span>).</p>
<p>Let’s see an example using Krackhardt’s High-Tech Managers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>   <span class="fu">library</span>(networkdata)</span>
<span id="cb1-2"><a href="#cb1-2"></a>   <span class="fu">library</span>(igraph)</span>
<span id="cb1-3"><a href="#cb1-3"></a>   <span class="fu">library</span>(ergm)</span>
<span id="cb1-4"><a href="#cb1-4"></a>   <span class="fu">library</span>(intergraph)</span>
<span id="cb1-5"><a href="#cb1-5"></a>   <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1-6"><a href="#cb1-6"></a>   g1 <span class="ot">&lt;-</span> ht_friends</span>
<span id="cb1-7"><a href="#cb1-7"></a>   n1 <span class="ot">&lt;-</span> <span class="fu">asNetwork</span>(g1)</span>
<span id="cb1-8"><a href="#cb1-8"></a>   g2 <span class="ot">&lt;-</span> ht_advice</span>
<span id="cb1-9"><a href="#cb1-9"></a>   n2 <span class="ot">&lt;-</span> <span class="fu">asNetwork</span>(g2)</span>
<span id="cb1-10"><a href="#cb1-10"></a>   m1 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n1 <span class="sc">~</span> edges <span class="sc">+</span> mutual)</span>
<span id="cb1-11"><a href="#cb1-11"></a>   <span class="fu">summary</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n1 ~ edges + mutual)

Monte Carlo Maximum Likelihood Results:

       Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges   -1.5416     0.1553      0  -9.929  &lt; 1e-04 ***
mutual   1.3320     0.3607      0   3.692 0.000222 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 451.6  on 418  degrees of freedom
 
AIC: 455.6  BIC: 463.7  (Smaller is better. MC Std. Err. = 0.3209)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>   m2 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n2 <span class="sc">~</span> edges <span class="sc">+</span> mutual)</span>
<span id="cb3-2"><a href="#cb3-2"></a>   <span class="fu">summary</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n2 ~ edges + mutual)

Monte Carlo Maximum Likelihood Results:

       Estimate Std. Error MCMC % z value Pr(&gt;|z|)  
edges   -0.2752     0.1629      0  -1.690   0.0911 .
mutual   0.1693     0.2939      0   0.576   0.5647  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 578.2  on 418  degrees of freedom
 
AIC: 582.2  BIC: 590.2  (Smaller is better. MC Std. Err. = 0.05879)</code></pre>
</div>
</div>
<p>Here we see strong evidence for mutuality effects in <em>friendship</em> nominations (<span class="math inline">\(\theta_m = 1.33, p &lt; 0.01\)</span>), consistent with the social meaning of the relation, but not in advice relations (<span class="math inline">\(\theta_m = 0.17, p = 0.57\)</span>), suggesting that these ties are more hierarchical).</p>
<p>Next we may also want to fit models that condition on the different types of dependence between pairs of directed ties that are centered on the same node. There are three flavors of these types of dependencies:</p>
<ul>
<li><p><em>Nodes that send a tie are more likely to send another tie</em>. This is a rich get richer effect for outdegree.</p></li>
<li><p><em>Nodes that receive a tie are more likely to receive another tie</em>. This is a rich get richer effect for indegree.</p></li>
<li><p><em>Nodes that send/receive a tie are more like to receive/send a tie</em>. This fits the correlation between in and outdegree at the node level. If positive, nodes that send ties also receive ties.</p></li>
</ul>
<p>The respective ergm terms for these three effects are <code>ostar(2)</code>, <code>istar(2)</code> and <code>twopath</code>.</p>
<p>Let’s test for a twopath effect in the friendship and advice networks:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>   <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>   m3 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n1 <span class="sc">~</span> edges <span class="sc">+</span> mutual <span class="sc">+</span> twopath)</span>
<span id="cb5-3"><a href="#cb5-3"></a>   <span class="fu">summary</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n1 ~ edges + mutual + twopath)

Monte Carlo Maximum Likelihood Results:

        Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges   -1.69215    0.52987      0  -3.194  0.00141 ** 
mutual   1.33011    0.34058      0   3.905  &lt; 1e-04 ***
twopath  0.01649    0.05477      0   0.301  0.76330    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 450.1  on 417  degrees of freedom
 
AIC: 456.1  BIC: 468.2  (Smaller is better. MC Std. Err. = 0.4178)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>   m4 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n2 <span class="sc">~</span> edges <span class="sc">+</span> mutual <span class="sc">+</span> twopath)</span>
<span id="cb7-2"><a href="#cb7-2"></a>   <span class="fu">summary</span>(m4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n2 ~ edges + mutual + twopath)

Monte Carlo Maximum Likelihood Results:

        Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges    3.11004    0.51671      0   6.019   &lt;1e-04 ***
mutual   0.48283    0.30122      0   1.603    0.109    
twopath -0.20636    0.03315      0  -6.225   &lt;1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 542.9  on 417  degrees of freedom
 
AIC: 548.9  BIC: 561  (Smaller is better. MC Std. Err. = 0.7573)</code></pre>
</div>
</div>
<p>We can see that in the friendship network, there is no two path effect (<span class="math inline">\(p = 0.76\)</span>); that is, people who send friendship nominations are not more or less likely to receive them.</p>
<p>However, in the advice network, we see a significant and <em>negative</em> two path effect (<span class="math inline">\(\theta_{2p} = -0.21\)</span>); people who seek advice are less likely to be sought as advisors from others, which makes sense.</p>
<p>Now let’s look at rich get richer effects by indegree: Are people who are nominated as friends byy one person more likely to be nominated as friends by others? Are people who are sought after for advice by one person more likely to be sought after for advice by others?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>   <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>   m5 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n1 <span class="sc">~</span> edges <span class="sc">+</span> mutual <span class="sc">+</span> <span class="fu">istar</span>(<span class="dv">2</span>))</span>
<span id="cb9-3"><a href="#cb9-3"></a>   <span class="fu">summary</span>(m5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n1 ~ edges + mutual + istar(2))

Monte Carlo Maximum Likelihood Results:

       Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges  -1.84755    0.37451      0  -4.933  &lt; 1e-04 ***
mutual  1.34842    0.35668      0   3.780 0.000157 ***
istar2  0.06630    0.07263      0   0.913 0.361348    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 450.0  on 417  degrees of freedom
 
AIC: 456  BIC: 468.2  (Smaller is better. MC Std. Err. = 0.3208)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>   m6 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n2 <span class="sc">~</span> edges <span class="sc">+</span> mutual <span class="sc">+</span> twopath <span class="sc">+</span> <span class="fu">istar</span>(<span class="dv">2</span>))</span>
<span id="cb11-2"><a href="#cb11-2"></a>   <span class="fu">summary</span>(m6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n2 ~ edges + mutual + twopath + istar(2))

Monte Carlo Maximum Likelihood Results:

        Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges    0.85773    0.78088      0   1.098   0.2720    
mutual   0.77351    0.31932      0   2.422   0.0154 *  
twopath -0.15003    0.03577      0  -4.194   &lt;1e-04 ***
istar2   0.13288    0.03318      0   4.005   &lt;1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 534.1  on 416  degrees of freedom
 
AIC: 542.1  BIC: 558.3  (Smaller is better. MC Std. Err. = 0.7616)</code></pre>
</div>
</div>
<p>We can that friendship network displays not cumulative advantage by indegree, but that they advice network does (<span class="math inline">\(\theta_{is} = 0.13\)</span>), consistent with the idea that the latter is more unequal and hierarchical. Note also that once we adjust for the two path and the rich get richer indegree effect, we can see a strong <em>mutuality</em> effect in advice relations (<span class="math inline">\(\theta_{m} = 0.77\)</span>).</p>
<p>Now, let’s adjust for the tendency of people who send one tie, to send other ties:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>   <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a>   m7 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n1 <span class="sc">~</span> edges <span class="sc">+</span> mutual <span class="sc">+</span> <span class="fu">ostar</span>(<span class="dv">2</span>), </span>
<span id="cb13-3"><a href="#cb13-3"></a>              <span class="at">estimate =</span> <span class="st">"MPLE"</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>              <span class="at">control =</span> <span class="fu">control.ergm</span>(<span class="at">MPLE.covariance.method =</span> <span class="st">"Godambe"</span>))</span>
<span id="cb13-5"><a href="#cb13-5"></a>   <span class="fu">summary</span>(m7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n1 ~ edges + mutual + ostar(2), estimate = "MPLE", 
    control = control.ergm(MPLE.covariance.method = "Godambe"))

Maximum Pseudolikelihood Results:

       Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges  -3.06823    0.35873      0  -8.553   &lt;1e-04 ***
mutual  1.70160    0.32521      0   5.232   &lt;1e-04 ***
ostar2  0.26496    0.05675      0   4.669   &lt;1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 356.9  on 417  degrees of freedom
 
AIC: 362.9  BIC: 375.1  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>   m8 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n2 <span class="sc">~</span> edges <span class="sc">+</span> mutual <span class="sc">+</span> twopath  </span>
<span id="cb15-2"><a href="#cb15-2"></a>                 <span class="sc">+</span> <span class="fu">istar</span>(<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">ostar</span>(<span class="dv">2</span>),  </span>
<span id="cb15-3"><a href="#cb15-3"></a>              <span class="at">estimate =</span> <span class="st">"MPLE"</span>,</span>
<span id="cb15-4"><a href="#cb15-4"></a>              <span class="at">control =</span> <span class="fu">control.ergm</span>(<span class="at">MPLE.covariance.method =</span> <span class="st">"Godambe"</span>))</span>
<span id="cb15-5"><a href="#cb15-5"></a>   <span class="fu">summary</span>(m8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n2 ~ edges + mutual + twopath + istar(2) + ostar(2), 
    estimate = "MPLE", control = control.ergm(MPLE.covariance.method = "Godambe"))

Maximum Pseudolikelihood Results:

        Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges   -4.38711    1.45877      0  -3.007  0.00263 ** 
mutual   1.70972    0.07481      0  22.855  &lt; 1e-04 ***
twopath -0.09056    0.03393      0  -2.669  0.00760 ** 
istar2   0.27931    0.06355      0   4.395  &lt; 1e-04 ***
ostar2   0.29084    0.04304      0   6.757  &lt; 1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 389.0  on 415  degrees of freedom
 
AIC: 399  BIC: 419.2  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
</div>
<p>We can now see that in contrast to the previous null results, there is outdegree dependency between nominations sent by the same node in the friendship network: People who nominate one person as a friend tend to nominate others (<span class="math inline">\(\theta_{os} = 0.27, p &lt; 0.01\)</span>).</p>
<p>In the advice network, we can see that all tendencies are operative, as the network displays all forms of degree dependence at the node level, along with mutuality.</p>
<p>We can also incorporate homophily based non attributes into our analysis of reciprocity. That is, we can test hypotheses of the form: Is mutuality weaker or stronger for dyads that match on a certain characteristic?</p>
<p>For instance, we may suspect that friendship ties among high-tech managers are influenced by formal organizational position, so that there is more mutuality within levels (e.g., mid-manager to mid-manager) than across levels (mid to lower-level). This is what <span class="citation" data-cites="lusher_etal13">Lusher, Koskinen, and Robins (<a href="#ref-lusher_etal13" role="doc-biblioref">2013, 18</a>)</span> call “reciprocated homophily.”</p>
<p>We can test this hypothesis as using the <code>same</code> argument in the <code>mutual</code> ergm term:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>   <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a>   m9 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n1 <span class="sc">~</span> edges </span>
<span id="cb17-3"><a href="#cb17-3"></a>              <span class="sc">+</span> <span class="fu">mutual</span>(<span class="at">same =</span> <span class="st">"level"</span>, <span class="at">diff =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> <span class="dv">2</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a>              <span class="sc">+</span> <span class="fu">ostar</span>(<span class="dv">2</span>), </span>
<span id="cb17-5"><a href="#cb17-5"></a>              <span class="at">estimate =</span> <span class="st">"MPLE"</span>,</span>
<span id="cb17-6"><a href="#cb17-6"></a>              <span class="at">control =</span> <span class="fu">control.ergm</span>(<span class="at">MPLE.covariance.method =</span> <span class="st">"Godambe"</span>))</span>
<span id="cb17-7"><a href="#cb17-7"></a>   <span class="fu">summary</span>(m9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n1 ~ edges + mutual(same = "level", diff = TRUE, 
    levels = 2) + ostar(2), estimate = "MPLE", control = control.ergm(MPLE.covariance.method = "Godambe"))

Maximum Pseudolikelihood Results:

                    Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges               -2.53164    0.18751      0 -13.501   &lt;1e-04 ***
mutual.same.level.2  3.53634    0.58476      0   6.047   &lt;1e-04 ***
ostar2               0.25071    0.02919      0   8.589   &lt;1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 380.1  on 417  degrees of freedom
 
AIC: 386.1  BIC: 398.2  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>   m10 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n2 <span class="sc">~</span> edges </span>
<span id="cb19-2"><a href="#cb19-2"></a>              <span class="sc">+</span> <span class="fu">mutual</span>(<span class="at">same =</span> <span class="st">"level"</span>, <span class="at">diff =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> <span class="dv">2</span>)</span>
<span id="cb19-3"><a href="#cb19-3"></a>              <span class="sc">+</span> twopath  <span class="sc">+</span> <span class="fu">istar</span>(<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">ostar</span>(<span class="dv">2</span>), </span>
<span id="cb19-4"><a href="#cb19-4"></a>              <span class="at">estimate =</span> <span class="st">"MPLE"</span>,</span>
<span id="cb19-5"><a href="#cb19-5"></a>              <span class="at">control =</span> <span class="fu">control.ergm</span>(<span class="at">MPLE.covariance.method =</span> <span class="st">"Godambe"</span>))</span>
<span id="cb19-6"><a href="#cb19-6"></a>   <span class="fu">summary</span>(m10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n2 ~ edges + mutual(same = "level", diff = TRUE, 
    levels = 2) + twopath + istar(2) + ostar(2), estimate = "MPLE", 
    control = control.ergm(MPLE.covariance.method = "Godambe"))

Maximum Pseudolikelihood Results:

                    Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges               -4.13775    1.36925      0  -3.022  0.00251 ** 
mutual.same.level.2  1.56828    0.35108      0   4.467  &lt; 1e-04 ***
twopath             -0.02600    0.03249      0  -0.800  0.42345    
istar2               0.23461    0.05989      0   3.918  &lt; 1e-04 ***
ostar2               0.26504    0.04004      0   6.619  &lt; 1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 416.7  on 415  degrees of freedom
 
AIC: 426.7  BIC: 446.9  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
</div>
<p>Recall than in this network there are three managerial levels but only one top manager, so we here, we compare the middle level to the rest. And indeed, we find that compared to lower level managers, tendencies toward mutuality in friendship choices are stronger among mid-level managers. Note also that once we adjust for this attribute-specific mutuality effect, the two path effect in the advice network is no longer significant.</p>
<p>We can also test hypotheses of the form: Are nodes with certain characteristics more likely to be involved in mutual dyads <em>regardless of the characteristics of the node at the other end of the tie</em>? That is, this tests for differential tendencies toward mutuality with other people in the network based on an actor attribute.</p>
<p>We can do this using the <code>by</code> argument in the <code>mutual</code> term, this time using department as the relevant attribute:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>   <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a>   m11 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n1 <span class="sc">~</span> edges </span>
<span id="cb21-3"><a href="#cb21-3"></a>              <span class="sc">+</span> <span class="fu">mutual</span>(<span class="at">by =</span> <span class="st">"dept"</span>, <span class="at">levels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb21-4"><a href="#cb21-4"></a>              <span class="sc">+</span> <span class="fu">ostar</span>(<span class="dv">2</span>), </span>
<span id="cb21-5"><a href="#cb21-5"></a>              <span class="at">estimate =</span> <span class="st">"MPLE"</span>,</span>
<span id="cb21-6"><a href="#cb21-6"></a>              <span class="at">control =</span> <span class="fu">control.ergm</span>(<span class="at">MPLE.covariance.method =</span> <span class="st">"Godambe"</span>))</span>
<span id="cb21-7"><a href="#cb21-7"></a>   <span class="fu">summary</span>(m11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n1 ~ edges + mutual(by = "dept", levels = 2:4) + 
    ostar(2), estimate = "MPLE", control = control.ergm(MPLE.covariance.method = "Godambe"))

Maximum Pseudolikelihood Results:

                 Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges            -2.76686    0.27732      0  -9.977   &lt;1e-04 ***
mutual.by.dept.1  1.08797    0.25097      0   4.335   &lt;1e-04 ***
mutual.by.dept.2  0.54380    0.30474      0   1.784   0.0743 .  
mutual.by.dept.3  0.33191    0.58650      0   0.566   0.5715    
ostar2            0.24691    0.04965      0   4.972   &lt;1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 371.6  on 415  degrees of freedom
 
AIC: 381.6  BIC: 401.8  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>   m12 <span class="ot">&lt;-</span> <span class="fu">ergm</span>(n2 <span class="sc">~</span> edges </span>
<span id="cb23-2"><a href="#cb23-2"></a>              <span class="sc">+</span> <span class="fu">mutual</span>(<span class="at">by =</span> <span class="st">"dept"</span>, <span class="at">levels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a>              <span class="sc">+</span> <span class="fu">istar</span>(<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">ostar</span>(<span class="dv">2</span>), </span>
<span id="cb23-4"><a href="#cb23-4"></a>              <span class="at">estimate =</span> <span class="st">"MPLE"</span>,</span>
<span id="cb23-5"><a href="#cb23-5"></a>              <span class="at">control =</span> <span class="fu">control.ergm</span>(<span class="at">MPLE.covariance.method =</span> <span class="st">"Godambe"</span>))</span>
<span id="cb23-6"><a href="#cb23-6"></a>   <span class="fu">summary</span>(m12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = n2 ~ edges + mutual(by = "dept", levels = 2:4) + 
    istar(2) + ostar(2), estimate = "MPLE", control = control.ergm(MPLE.covariance.method = "Godambe"))

Maximum Pseudolikelihood Results:

                 Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges            -5.26275    0.57206      0  -9.200   &lt;1e-04 ***
mutual.by.dept.1  1.03995    0.06568      0  15.834   &lt;1e-04 ***
mutual.by.dept.2 -0.06611    0.09533      0  -0.694    0.488    
mutual.by.dept.3  1.11460    0.03769      0  29.571   &lt;1e-04 ***
istar2            0.25074    0.03531      0   7.101   &lt;1e-04 ***
ostar2            0.29014    0.02182      0  13.296   &lt;1e-04 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 582.2  on 420  degrees of freedom
 Residual Deviance: 397.1  on 414  degrees of freedom
 
AIC: 409.1  BIC: 433.3  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
</div>
<p>The results show that, in the friendship network, nodes in Dept 2 tend to have more mutual ties compared to nodes in Dept 1 (the reference), in the advice network, both nodes in Dept 2 and and Dept 4 tend to have more mutual ties, while nodes in Dept 3 are not statistically different from nodes in Dept 1.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-lusher_etal13" class="csl-entry" role="doc-biblioentry">
Lusher, Dean, Johan Koskinen, and Garry Robins. 2013. <em>Exponential Random Graph Models for Social Networks: Theory, Methods, and Applications</em>. Cambridge University Press.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>